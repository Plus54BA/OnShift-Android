/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/**
 * @license RequireJS text 2.0.9 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */

/*\
|*|
|*|  :: cookies.js ::
|*|
|*|  A complete cookies reader/writer framework with full unicode support.
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/document.cookie
|*|
|*|  This framework is released under the GNU Public License, version 3 or later.
|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html
|*|
|*|  Syntaxes:
|*|
|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])
|*|  * docCookies.getItem(name)
|*|  * docCookies.removeItem(name[, path], domain)
|*|  * docCookies.hasItem(name)
|*|  * docCookies.keys()
|*|
\*/

/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */

// i18next, v1.7.7
// Copyright (c)2014 Jan Mühlemann (jamuhl).
// Distributed under MIT license
// http://i18next.com

/*! jQuery Mobile v1.3.2 | Copyright 2010, 2013 jQuery Foundation, Inc. | jquery.org/license */

/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(w.acceptData(e)){var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||r!==t||"string"!=typeof n)return l||(l=a?e[u]=c.pop()||w.guid++:u),f[l]||(f[l]=a?{}:{toJSON:w.noop}),("object"==typeof n||"function"==typeof n)&&(i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n)),o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),"string"==typeof n?(s=o[n],null==s&&(s=o[w.camelCase(n)])):s=o,s}}function R(e,t,n){if(w.acceptData(e)){var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}(n||(delete o[u].data,z(o[u])))&&(s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function U(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(I,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&w.hasData(e)){var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=w.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=w.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==w.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,w.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e)if(r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],$n.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(P(),w.ready())},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(s=o.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||w.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r));return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?!--w.readyWait:!w.isReady){if(!o.body)return setTimeout(w.ready);w.isReady=!0,e!==!0&&--w.readyWait>0||(n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=w.trim(n),n&&C.test(n.replace(L,"@").replace(A,"]").replace(k,"")))?Function("return "+n)():(w.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("﻿ ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(H(Object(e))?w.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===w.type(r)){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n)if(n=w.Deferred(),"complete"===o.readyState)setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;if((t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,w=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=x++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=null==x?1:Math.random()||.1;for(E&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:E,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(E,e)?-1:t===n||y(E,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e="string"==typeof e?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||i&&!f||(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=1!==r||e&&w.isFunction(e.promise)?r:0,s=1===i?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==p.className,t.leadingWhitespace=3===p.firstChild.nodeType,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip;for(h in w(t))break;return t.ownLast="0"!==h,w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===p.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null)}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length&&(s=w.data(u),1===u.nodeType&&!w._data(u,"parsedAttrs"))){for(r=u.attributes;r.length>o;o++)i=r[o].name,0===i.indexOf("data-")&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=w._data(e,n),r&&(!i||w.isArray(r)?i=w._data(e,n,w.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=w.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=w.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,w(this).val()):e,null==s?s="":"number"==typeof s?s+="":w.isArray(s)&&(s=w.map(s,function(e){return null==e?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(w.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&w.nodeName(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=w.inArray(w(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?w.prop(e,n,r):(1===u&&w.isXMLDoc(e)||(n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W)),r===t?s&&"get"in s&&null!==(o=s.get(e,n))?o:(o=w.find.attr(e,n),null==o?t:o):null!==r?s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(w.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&1===e.nodeType)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}}),Y&&G||(w.attrHooks.value={set:function(e,n,r){return w.nodeName(e,"input")?(e.defaultValue=n,t):W&&W.set(e,n,r)}}),G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,""===t?!1:t,n)}},w.each(["width","height"],function(e,n){w.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,n){return w.isArray(n)?e.checked=w.inArray(w(e).val(),n)>=0:t}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),v&&(c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(m&&(l=m.events)){t=(t||"").match(S)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||w.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[f],n,r,!0);w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))}},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+w.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[w.expando]?n:new w.Event(v,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{},s||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!s&&!c.noBubble&&!w.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ot()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return w.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,n){return this instanceof w.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&w.extend(this,n),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0,t):new w.Event(e,n)},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!w.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){return w.nodeName(this,"form")?!1:(w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return w.nodeName(this,"form")?!1:(w.event.remove(this,"._submit"),t)}}),w.support.changeBubbles||(w.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1):(w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?w.event.trigger(e,n,r,!0):t}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;i>t;t++)if(w.contains(r[t],this))return!0}));for(t=0;i>t;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,"string"==typeof e&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?w(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!w(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!w.support.htmlSerialize&&mt.test(e)||!w.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(1>=l||"string"!=typeof d||w.support.checkClone)&&Tt.test(d))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l&&(a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,1===a.childNodes.length&&(a=r),r)){for(o=w.map(jt(a,"script"),_t),s=o.length;l>f;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s)for(u=o[o.length-1].ownerDocument,w.map(o,Dt),f=0;s>f;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")));a=r=null}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===w.type(s))w.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!w.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===w.inArray(s,r))&&(o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;null!=(n=e[u]);u++)if((t||w.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+E+")(.*)$","i"),Jt=RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=w.camelCase(n),f=e.style;if(n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||w.cssNumber[a]||(r+="px"),w.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||w.contains(e.ownerDocument,e)||(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),w.each(["height","width"],function(e,n){w.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,i),i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===w.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,n){return n?w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,n){w.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?w(e).position()[n]+"px":r):t}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==b&&(b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l),l?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),204===e||"HEAD"===c.type?T="nocontent":304===e?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===b)return x;a=c.global,a&&0===w.active++&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==b){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(2>b))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||"px"!==s&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};return r.duration=w.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;for(Xn=w.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");"static"===r&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=("absolute"===r||"fixed"===r)&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===w.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position"))e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(e.jQuery=e.$=w,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}))}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),function(e){define("handlebars",[],function(){return function(){var t={};return function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";e.registerHelper=function(t,r,s){if(n.call(t)===i){if(s||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(r.not=s),this.helpers[t]=r},e.registerPartial=function(t,r){n.call(t)===i?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,i){var s=i.fn,o=i.inverse,u=0,a="",f,l=n.call(t);l===r&&(t=t.call(this)),i.data&&(f=e.createFrame(i.data));if(t&&typeof t=="object")if(t instanceof Array)for(var c=t.length;u<c;u++)f&&(f.index=u),a+=s(t[u],{data:f});else for(var h in t)t.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(t[h],{data:f}),u++);return u===0&&(a=o(this)),a}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,i){var s=n.call(t);s===r&&(t=t.call(this));if(!e.Utils.isEmpty(t))return i.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var s=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2][2]==="&");break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[o[a]],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=o[a];break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],o[a]];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[a]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[a]));break;case 47:this.$=new i.DataNode(o[a]);break;case 48:this.$=new i.IdNode(o[a]);break;case 49:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 50:this.$=[{part:o[a]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return n.yytext="\\",14;case 1:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 2:return 14;case 3:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 4:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),31;case 23:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return n.yytext=n.yytext.substr(1,n.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=s,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID";var n="",r=[],i=0;for(var s=0,o=t.length;s<o;s++){var u=t[s].part;n+=(t[s].separator||"")+u;if(u===".."||u==="."||u==="this"){if(r.length>0)throw new e.Exception("Invalid path: "+n);u===".."?i++:this.isScoped=!0}else r.push(u)}this.original=n,this.parts=r,this.string=r.join("."),this.depth=i,this.isSimple=t.length===1&&!this.isScoped&&i===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e.original},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.original=this.string=this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<o.length;n++)this[o[n]]=t[o[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/,l=function(e){return u[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":(t=t.toString(),f.test(t)?t.replace(a,l):t)},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}};var c=e.Compiler=function(){},h=e.JavaScriptCompiler=function(){};c.prototype={compiler:c,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(t){this.options.data=!0;if(t.id.isScoped||t.id.depth)throw new e.Exception("Scoped data references are not supported: "+t.original);this.opcode("lookupData");var n=t.id.parts;for(var r=0,i=n.length;r<i;r++)this.opcode("lookup",n[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var p=function(e){this.value=e};h.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":h.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(g=s.length;this.i<g;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",n;for(var r=0,i=this.source.length;r<i;r++){var s=this.source[r];s.appendToBuffer?n?n=n+"\n    + "+s.content:n=s.content:(n&&(e+="buffer += "+n+";\n  ",n=t),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:h,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new p(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r;if(n){var i=this.popStack(!0);if(i instanceof p)r=i.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(s)+" = "+i+"),",r=this.topStack()}}else r=this.topStack();var o=e.call(this,r);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+o+")")):(/^stack/.test(r)||(r=this.nextStack()),this.source.push(r+" = ("+t+o+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof p?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof p?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof p?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),v=h.RESERVED_WORDS={};for(var m=0,g=d.length;m<g;m++)v[d[m]]=!0;h.isValidJavaScriptVariableName=function(e){return!h.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(t,n){if(t==null||typeof t!="string"&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);n=n||{},"data"in n||(n.data=!0);var r=e.parse(t),i=(new c).compile(r,n);return(new h).compile(i,n)},e.compile=function(n,r){function s(){var i=e.parse(n),s=(new c).compile(i,r),o=(new h).compile(s,r,t,!0);return e.template(o)}if(n==null||typeof n!="string"&&n.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);r=r||{},"data"in r||(r.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?i=e.VM.program(t,n,r):i||(i=this.programs[t]=e.VM.program(t,n)),i},merge:function(t,n){var r=t||n;return t&&n&&(r={},e.Utils.extend(r,n),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template}(t),e.Handlebars=t}.apply(e,arguments)})}(this),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.9",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",[],function(){}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,n=e.CultureInfo,r=function(e,t){return t||(t=2),("000"+e).slice(t*-1)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return e.compareTo(t)===0},e.getDayNumberFromName=function(e){var t=n.dayNames,r=n.abbreviatedDayNames,i=n.shortestDayNames,s=e.toLowerCase();for(var o=0;o<t.length;o++)if(t[o].toLowerCase()==s||r[o].toLowerCase()==s||i[o].toLowerCase()==s)return o;return-1},e.getMonthNumberFromName=function(e){var t=n.monthNames,r=n.abbreviatedMonthNames,i=e.toLowerCase();for(var s=0;s<t.length;s++)if(t[s].toLowerCase()==i||r[s].toLowerCase()==i)return s;return-1},e.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},e.getDaysInMonth=function(t,n){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getTimezoneAbbreviation=function(e){var t=n.timezones,r;for(var i=0;i<t.length;i++)if(t[i].offset===e)return t[i].name;return null},e.getTimezoneOffset=function(e){var t=n.timezones,r;for(var i=0;i<t.length;i++)if(t[i].name===e.toUpperCase())return t[i].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return this.compareTo(e||new Date)===1},t.isBefore=function(e){return this.compareTo(e||new Date)===-1},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(e*1e3)},t.addMinutes=function(e){return this.addMilliseconds(e*6e4)},t.addHours=function(e){return this.addMilliseconds(e*36e5)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(e*7)},t.addMonths=function(t){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(n,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(e*12)},t.add=function(e){if(typeof e=="number")return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var i,s,o;t.getWeek=function(){var e,t,n,r,u,a,f,l,c,h;return i=i?i:this.getFullYear(),s=s?s:this.getMonth()+1,o=o?o:this.getDate(),s<=2?(e=i-1,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),c=t-n,u=0,a=o-1+31*(s-1)):(e=i,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),c=t-n,u=c+1,a=o+(153*(s-3)+2)/5+58+c),f=(e+t)%7,r=(a+f-u)%7,l=a+3-r|0,l<0?h=53-((f-c)/5|0):l>364+c?h=1:h=(l/7|0)+1,i=s=o=null,h},t.getISOWeek=function(){return i=this.getUTCFullYear(),s=this.getUTCMonth()+1,o=this.getUTCDate(),r(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,n,r){if(typeof e=="undefined")return!1;if(typeof e!="number")throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+r+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,n,r){return e._validate(t,1,e.getDaysInMonth(n,r),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(t===-1)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},t.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(n===0?n+=7*(t||1):n)},t.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(n===0?n+=12*(t||1):n)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=Number(e)*-6/10;return this.addMinutes(n-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e=this.getTimezoneOffset()*-10/6,t;return e<0?(t=(e-1e4).toString(),t.charAt(0)+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&e.length==1){var i=n.formatPatterns;t.t=t.toString;switch(e){case"d":return t.t(i.shortDate);case"D":return t.t(i.longDate);case"F":return t.t(i.fullDateTime);case"m":return t.t(i.monthDay);case"r":return t.t(i.rfc1123);case"s":return t.t(i.sortableDateTime);case"t":return t.t(i.shortTime);case"T":return t.t(i.longTime);case"u":return t.t(i.universalSortableDateTime);case"y":return t.t(i.yearMonth)}}var s=function(e){switch(e*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if(e.charAt(0)==="\\")return e.replace("\\","");t.h=t.getHours;switch(e){case"hh":return r(t.h()<13?t.h()===0?12:t.h():t.h()-12);case"h":return t.h()<13?t.h()===0?12:t.h():t.h()-12;case"HH":return r(t.h());case"H":return t.h();case"mm":return r(t.getMinutes());case"m":return t.getMinutes();case"ss":return r(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return r(t.getFullYear(),4);case"yy":return r(t.getFullYear());case"dddd":return n.dayNames[t.getDay()];case"ddd":return n.abbreviatedDayNames[t.getDay()];case"dd":return r(t.getDate());case"d":return t.getDate();case"MMMM":return n.monthNames[t.getMonth()];case"MMM":return n.abbreviatedMonthNames[t.getMonth()];case"MM":return r(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?n.amDesignator.substring(0,1):n.pmDesignator.substring(0,1);case"tt":return t.h()<12?n.amDesignator:n.pmDesignator;case"S":return s(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,n=e.CultureInfo,r=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,r._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return typeof t=="string"?e.parse(this.toString("d")+" "+t):this.set(t)},r.fromNow=r.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},r.ago=r.before=function(e){var t={};return t[this._dateElement]=this*-1,(e?e.clone():new Date).add(t)};var i="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),s="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),u="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),a="final first second third fourth fifth".split(/\s/),f;t.toObject=function(){var e={};for(var t=0;t<o.length;t++)e[o[t].toLowerCase()]=this["get"+u[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};var l=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var n=this._nth;this._nth=null;var r=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(t,n);if(this>r)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(r.getMonth())+" "+r.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},c=function(t){return function(){var r=e.today(),i=t-r.getDay();return t===0&&n.firstDayOfWeek===1&&r.getDay()!==0&&(i+=7),r.addDays(i)}};for(var h=0;h<i.length;h++)e[i[h].toUpperCase()]=e[i[h].toUpperCase().substring(0,3)]=h,e[i[h]]=e[i[h].substring(0,3)]=c(h),t[i[h]]=t[i[h].substring(0,3)]=l(h);var p=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},d=function(t){return function(){return e.today().set({month:t,day:1})}};for(var v=0;v<s.length;v++)e[s[v].toUpperCase()]=e[s[v].toUpperCase().substring(0,3)]=v,e[s[v]]=e[s[v].substring(0,3)]=d(v),t[s[v]]=t[s[v].substring(0,3)]=p(v);var m=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var t=this.toObject(),n=(arguments[0]||new Date).toObject(),r="",i=e.toLowerCase();for(var s=o.length-1;s>-1;s--){r=o[s].toLowerCase();if(t[r]!=n[r])return!1;if(i==r)break}return!0}return e.substring(e.length-1)!="s"&&(e+="s"),this["add"+e](this._orient)}},g=function(e){return function(){return this._dateElement=e,this}};for(var y=0;y<o.length;y++)f=o[y].toLowerCase(),t[f]=t[f+"s"]=m(o[y]),r[f]=r[f+"s"]=g(f);t._ss=m("Second");var b=function(e){return function(t){return this._same?this._ss(arguments[0]):t||t===0?this.moveToNthOccurrence(t,e):(this._nth=e,e!==2||t!==undefined&&t!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var w=0;w<a.length;w++)t[a[w]]=w===0?b(-1):b(w)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(e){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){n.push(r[0]),t=r[1];continue}break}return[n,t]}},many:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){return[n,t]}n.push(r[0]),t=r[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(r){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(r){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=[];for(var i=0;i<e.length;i++)r.push(t.each(e[i],n));return r},cache:function(t){var n={},r=null;return function(i){try{r=n[i]=n[i]||t.call(this,i)}catch(s){r=n[i]=s}if(r instanceof e.Exception)throw r;return r}},any:function(){var t=arguments;return function(n){var r=null;for(var i=0;i<t.length;i++){if(t[i]==null)continue;try{r=t[i].call(this,n)}catch(s){r=null}if(r)return r}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){var r=[],i=null;for(var s=0;s<t.length;s++){if(t[s]==null)continue;try{i=t[s].call(this,n)}catch(o){throw new e.Exception(n)}r.push(i[0]),n=i[1]}return[r,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,n.length==1?n[0]:function(t){var s=null,o=null,u=[];for(var a=0;a<n.length;a++){try{s=n[a].call(this,t)}catch(f){break}u.push(s[0]);try{o=r.call(this,s[1])}catch(l){o=null;break}t=o[1]}if(!s)throw new e.Exception(t);if(o)throw new e.Exception(o[1]);if(i)try{s=i.call(this,s[1])}catch(h){throw new e.Exception(s[1])}return[u,s?s[1]:t]}},between:function(e,n,i){i=i||e;var s=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(r)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(r))},set:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,function(s){var o=null,u=null,a=null,f=null,l=[[],s],h=!1;for(var p=0;p<n.length;p++){a=null,u=null,o=null,h=n.length==1;try{o=n[p].call(this,s)}catch(v){continue}f=[[o[0]],o[1]];if(o[1].length>0&&!h)try{a=r.call(this,o[1])}catch(m){h=!0}else h=!0;!h&&a[1].length===0&&(h=!0);if(!h){var g=[];for(var y=0;y<n.length;y++)p!=y&&g.push(n[y]);u=t.set(g,r).call(this,a[1]),u[0].length>0&&(f[0]=f[0].concat(u[0]),f[1]=u[1])}f[1].length<l[1].length&&(l=f);if(l[1].length===0)break}if(l[0].length===0)return l;if(i){try{a=i.call(this,l[1])}catch(b){throw new e.Exception(l[1])}l[1]=a[1]}return l}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var r=e.call(this,n);return[t,r[1]]}},process:function(e,t){return function(n){var r=e.call(this,n);return[t.call(this,r[0]),r[1]]}},min:function(t,n){return function(r){var i=n.call(this,r);if(i[0].length<t)throw new e.Exception(r);return i}}},n=function(e){return function(){var t=null,n=[];arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]);if(!t)return e.apply(null,arguments);for(var r=0,i=t.shift();r<i.length;r++)return t.unshift(i[r]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/);for(var s=0;s<i.length;s++)t[i[s]]=n(t[i[s]]);var o=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},u="each any all".split(/\s/);for(var a=0;a<u.length;a++)t[u[a]]=o(t[u[a]])}(),function(){var e=Date,t=e.prototype,n=e.CultureInfo,r=function(e){var t=[];for(var n=0;n<e.length;n++)e[n]instanceof Array?t=t.concat(r(e[n])):e[n]&&t.push(e[n]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=e.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var t=Number(e);this.year=e.length>2?t:t+(t+2e3<n.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);var r=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=r.getDate()),this.year||(this.year=r.getFullYear()),!this.month&&this.month!==0&&(this.month=r.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var i=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?i.set({timezone:this.timezone}):this.timezoneOffset&&i.set({timezoneOffset:this.timezoneOffset}),i},finish:function(t){t=t instanceof Array?r(t):[t];if(t.length===0)return null;for(var n=0;n<t.length;n++)typeof t[n]=="function"&&t[n].call(this);var i=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(i=new Date);var s=!!(this.days&&this.days!==null||this.orient||this.operator),o,u,a;a=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&i.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,s=!0);if(!s&&this.weekday&&!this.day&&!this.days){var f=Date[this.weekday]();this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear()}s&&this.weekday&&this.unit!="month"&&(this.unit="day",o=e.getDayNumberFromName(this.weekday)-i.getDay(),u=7,this.days=o?(o+a*u)%u:a*u),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(i.set({day:this.value*1}),s||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,s=!0),s&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",o=this.month-i.getMonth(),u=12,this.months=o?(o+a*u)%u:a*u,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*a;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*a;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var f=Date[this.weekday]();this.day=f.getDate(),f.getMonth()!==i.getMonth()&&(this.month=f.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(s&&this.timezone&&this.day&&this.days&&(this.day=this.days),s?i.add(this):i.set(this))}};var i=e.Parsing.Operators,s=e.Grammar,o=e.Translator,u;s.datePartDelimiter=i.rtoken(/^([\s\-\.\,\/\x27]+)/),s.timePartDelimiter=i.stoken(":"),s.whiteSpace=i.rtoken(/^\s*/),s.generalDelimiter=i.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};s.ctoken=function(e){var t=a[e];if(!t){var r=n.regexPatterns,s=e.split(/\s+/),o=[];for(var u=0;u<s.length;u++)o.push(i.replace(i.rtoken(r[s[u]]),s[u]));t=a[e]=i.any.apply(null,o)}return t},s.ctoken2=function(e){return i.rtoken(n.regexPatterns[e])},s.h=i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour)),s.hh=i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2])/),o.hour)),s.H=i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour)),s.HH=i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour)),s.m=i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/),o.minute)),s.mm=i.cache(i.process(i.rtoken(/^[0-5][0-9]/),o.minute)),s.s=i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/),o.second)),s.ss=i.cache(i.process(i.rtoken(/^[0-5][0-9]/),o.second)),s.hms=i.cache(i.sequence([s.H,s.m,s.s],s.timePartDelimiter)),s.t=i.cache(i.process(s.ctoken2("shortMeridian"),o.meridian)),s.tt=i.cache(i.process(s.ctoken2("longMeridian"),o.meridian)),s.z=i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),s.zz=i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),s.zzz=i.cache(i.process(s.ctoken2("timezone"),o.timezone)),s.timeSuffix=i.each(i.ignore(s.whiteSpace),i.set([s.tt,s.zzz])),s.time=i.each(i.optional(i.ignore(i.stoken("T"))),s.hms,s.timeSuffix),s.d=i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1]|\d)/),i.optional(s.ctoken2("ordinalSuffix"))),o.day)),s.dd=i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1])/),i.optional(s.ctoken2("ordinalSuffix"))),o.day)),s.ddd=s.dddd=i.cache(i.process(s.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),s.M=i.cache(i.process(i.rtoken(/^(1[0-2]|0\d|\d)/),o.month)),s.MM=i.cache(i.process(i.rtoken(/^(1[0-2]|0\d)/),o.month)),s.MMM=s.MMMM=i.cache(i.process(s.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month)),s.y=i.cache(i.process(i.rtoken(/^(\d\d?)/),o.year)),s.yy=i.cache(i.process(i.rtoken(/^(\d\d)/),o.year)),s.yyy=i.cache(i.process(i.rtoken(/^(\d\d?\d?\d?)/),o.year)),s.yyyy=i.cache(i.process(i.rtoken(/^(\d\d\d\d)/),o.year)),u=function(){return i.each(i.any.apply(null,arguments),i.not(s.ctoken2("timeContext")))},s.day=u(s.d,s.dd),s.month=u(s.M,s.MMM),s.year=u(s.yyyy,s.yy),s.orientation=i.process(s.ctoken("past future"),function(e){return function(){this.orient=e}}),s.operator=i.process(s.ctoken("add subtract"),function(e){return function(){this.operator=e}}),s.rday=i.process(s.ctoken("yesterday tomorrow today now"),o.rday),s.unit=i.process(s.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),s.value=i.process(i.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),s.expression=i.set([s.rday,s.operator,s.value,s.unit,s.orientation,s.ddd,s.MMM]),u=function(){return i.set(arguments,s.datePartDelimiter)},s.mdy=u(s.ddd,s.month,s.day,s.year),s.ymd=u(s.ddd,s.year,s.month,s.day),s.dmy=u(s.ddd,s.day,s.month,s.year),s.date=function(e){return(s[n.dateElementOrder]||s.mdy).call(this,e)},s.format=i.process(i.many(i.any(i.process(i.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(s[t])return s[t];throw e.Parsing.Exception(t)}),i.process(i.rtoken(/^[^dMyhHmstz]+/),function(e){return i.ignore(i.stoken(e))}))),function(e){return i.process(i.each.apply(null,e),o.finishExact)});var f={},l=function(e){return f[e]=f[e]||s.format(e)[0]};s.formats=function(e){if(e instanceof Array){var t=[];for(var n=0;n<e.length;n++)t.push(l(e[n]));return i.any.apply(null,t)}return l(e)},s._formats=s.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),s._start=i.process(i.set([s.date,s.time,s.expression],s.generalDelimiter,s.whiteSpace),o.finish),s.start=function(e){try{var t=s._formats.call({},e);if(t[1].length===0)return t}catch(n){}return s._start.call({},e)},e._parse=e.parse,e.parse=function(t){var n=null;if(!t)return null;if(t instanceof Date)return t;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(r){return null}return n[1].length===0?n[0]:null},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(r){return null}return t[1].length===0?t[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}(),define("date",function(){});var docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,i,s){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var o="";if(n)switch(n.constructor){case Number:o=n===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+o+(i?"; domain="+i:"")+(r?"; path="+r:"")+(s?"; secure":""),!0},removeItem:function(e,t,n){return!e||!this.hasItem(e)?!1:(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}};define("cookies",function(){}),function(e){define("bootstrap",["jquery"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText||r.data("resetText",r[i]()),r[i](s[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,s)),"toggle"==n?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}if(i.hasClass("active"))return this.sliding=!1;var l=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(f.$indicators.children()[f.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*r.css("transition-duration").slice(0,-1))):(r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),o="string"==typeof n?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),"number"==typeof n?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,r=e(this),i=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),r.data()),o=r.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=r.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&s.toggle&&"show"==n&&(n=!n),i||r.data("bs.collapse",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":r.data(),f=r.attr("data-parent"),l=f&&e(f);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+f+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(u)})}(jQuery),+function(e){function t(t){e(r).remove(),e(i).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var r=".dropdown-backdrop",i="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",u),i.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),r.click();var u=" li:not(.divider):visible a",f=s.find("[role=menu]"+u+", [role=listbox]"+u);if(f.length){var l=f.index(f.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<f.length-1&&l++,~l||(l=0),f.eq(l).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,s.prototype.toggle).on("keydown.bs.dropdown.data-api",i+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);s||i.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());n.is("a")&&t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(i);o&&(i=i.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),f=r[0].offsetWidth,l=r[0].offsetHeight;if(o){var c=this.$element.parent(),h=i,p=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:c.outerWidth(),v="body"==this.options.container?window.innerHeight:c.outerHeight(),m="body"==this.options.container?0:c.offset().left;i="bottom"==i&&u.top+u.height+l-p>v?"top":"top"==i&&u.top-p-l<0?"bottom":"right"==i&&u.right+f>d?"left":"left"==i&&u.left-f<m?"right":i,r.removeClass(h).addClass(i)}var g=this.getCalculatedOffset(i,u,f,l);this.applyPlacement(g,i),this.hoverState=null;var y=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,y).emulateTransitionEnd(150):y()}},t.prototype.applyPlacement=function(t,n){var r,i=this.tip(),s=i[0].offsetWidth,o=i[0].offsetHeight,u=parseInt(i.css("margin-top"),10),f=parseInt(i.css("margin-left"),10);isNaN(u)&&(u=0),isNaN(f)&&(f=0),t.top=t.top+u,t.left=t.left+f,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==n&&c!=o&&(r=!0,t.top=t.top+o-c),/bottom|top/.test(n)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(h-s+l,l,"left")}else this.replaceArrow(c-o,c,"top");r&&i.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.tooltip",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.popover",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,r=n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(t>=r)return o!=(e=s.last()[0])&&this.activate(e);if(o&&t<=i[0])return o!=(e=s[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},t.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"top"==this.affixed&&(i.top+=r),"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof u&&(u=s.bottom(this.$element));var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=n-u?"bottom":null!=o&&o>=r?"top":!1;if(this.affixed!==f){this.unpin&&this.$element.css("top","");var l="affix"+(f?"-"+f:""),c=e.Event(l+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=f,this.unpin="bottom"==f?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==f&&this.$element.offset({top:n-u-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery)}.apply(e,arguments)})}(this),function(e,t){function A(e){return i===""?e:(e=e.charAt(0).toUpperCase()+e.substr(1),i+e)}var n=Math,r=t.createElement("div").style,i=function(){var e="t,webkitT,MozT,msT,OT".split(","),t,n=0,i=e.length;for(;n<i;n++){t=e[n]+"ransform";if(t in r)return e[n].substr(0,e[n].length-1)}return!1}(),s=i?"-"+i.toLowerCase()+"-":"",o=A("transform"),u=A("transitionProperty"),a=A("transitionDuration"),f=A("transformOrigin"),l=A("transitionTimingFunction"),c=A("transitionDelay"),h=/android/gi.test(navigator.appVersion),p=/iphone|ipad/gi.test(navigator.appVersion),d=/hp-tablet/gi.test(navigator.appVersion),v=A("perspective")in r,m="ontouchstart"in e&&!d,g=i!==!1,y=A("transition")in r,b="onorientationchange"in e?"orientationchange":"resize",w=m?"touchstart":"mousedown",E=m?"touchmove":"mousemove",S=m?"touchend":"mouseup",x=m?"touchcancel":"mouseup",T=function(){if(i===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return e[i]}(),N=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),C=function(){return e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}(),k=v?" translateZ(0)":"",L=function(n,r){var i=this,c;i.wrapper=typeof n=="object"?n:t.getElementById(n),i.wrapper.style.overflow="hidden",i.scroller=i.wrapper.children[0],i.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:h,hideScrollbar:p,fadeScrollbar:p&&v,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in r)i.options[c]=r[c];i.x=i.options.x,i.y=i.options.y,i.options.useTransform=g&&i.options.useTransform,i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar,i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar,i.options.zoom=i.options.useTransform&&i.options.zoom,i.options.useTransition=y&&i.options.useTransition,i.options.zoom&&h&&(k=""),i.scroller.style[u]=i.options.useTransform?s+"transform":"top left",i.scroller.style[a]="0",i.scroller.style[f]="0 0",i.options.useTransition&&(i.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),i.options.useTransform?i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px)"+k:i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px",i.options.useTransition&&(i.options.fixedScrollbar=!0),i.refresh(),i._bind(b,e),i._bind(w),m||i.options.wheelAction!="none"&&(i._bind("DOMMouseScroll"),i._bind("mousewheel")),i.options.checkDOMChanges&&(i.checkDOMTime=setInterval(function(){i._checkDOMChanges()},500))};L.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case w:if(!m&&e.button!==0)return;t._start(e);break;case E:t._move(e);break;case S:case x:t._end(e);break;case b:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(e);break;case T:t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(e){var r=this,i;if(!r[e+"Scrollbar"]){r[e+"ScrollbarWrapper"]&&(g&&(r[e+"ScrollbarIndicator"].style[o]=""),r[e+"ScrollbarWrapper"].parentNode.removeChild(r[e+"ScrollbarWrapper"]),r[e+"ScrollbarWrapper"]=null,r[e+"ScrollbarIndicator"]=null);return}r[e+"ScrollbarWrapper"]||(i=t.createElement("div"),r.options.scrollbarClass?i.className=r.options.scrollbarClass+e.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+(e=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(i),r[e+"ScrollbarWrapper"]=i,i=t.createElement("div"),r.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+(e=="h"?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+k,r.options.useTransition&&(i.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[e+"ScrollbarWrapper"].appendChild(i),r[e+"ScrollbarIndicator"]=i),e=="h"?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=n.max(n.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=n.max(n.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),r._scrollbarPos(e,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},h?200:0)},_pos:function(e,t){if(this.zoomed)return;e=this.hScroll?e:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[o]="translate("+e+"px,"+t+"px) scale("+this.scale+")"+k:(e=n.round(e),t=n.round(t),this.scroller.style.left=e+"px",this.scroller.style.top=t+"px"),this.x=e,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(e,t){var r=this,i=e=="h"?r.x:r.y,s;if(!r[e+"Scrollbar"])return;i=r[e+"ScrollbarProp"]*i,i<0?(r.options.fixedScrollbar||(s=r[e+"ScrollbarIndicatorSize"]+n.round(i*3),s<8&&(s=8),r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px"),i=0):i>r[e+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?i=r[e+"ScrollbarMaxScroll"]:(s=r[e+"ScrollbarIndicatorSize"]-n.round((i-r[e+"ScrollbarMaxScroll"])*3),s<8&&(s=8),r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px",i=r[e+"ScrollbarMaxScroll"]+(r[e+"ScrollbarIndicatorSize"]-s))),r[e+"ScrollbarWrapper"].style[c]="0",r[e+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1",r[e+"ScrollbarIndicator"].style[o]="translate("+(e=="h"?i+"px,0)":"0,"+i+"px)")+k},_start:function(t){var r=this,i=m?t.touches[0]:t,s,u,a,f,l;if(!r.enabled)return;r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t),(r.options.useTransition||r.options.zoom)&&r._transitionTime(0),r.moved=!1,r.animating=!1,r.zoomed=!1,r.distX=0,r.distY=0,r.absDistX=0,r.absDistY=0,r.dirX=0,r.dirY=0,r.options.zoom&&m&&t.touches.length>1&&(f=n.abs(t.touches[0].pageX-t.touches[1].pageX),l=n.abs(t.touches[0].pageY-t.touches[1].pageY),r.touchesDistStart=n.sqrt(f*f+l*l),r.originX=n.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x,r.originY=n.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y,r.options.onZoomStart&&r.options.onZoomStart.call(r,t));if(r.options.momentum){r.options.useTransform?(s=getComputedStyle(r.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(","),u=+(s[12]||s[4]),a=+(s[13]||s[5])):(u=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,""),a=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,""));if(u!=r.x||a!=r.y)r.options.useTransition?r._unbind(T):C(r.aniTime),r.steps=[],r._pos(u,a),r.options.onScrollEnd&&r.options.onScrollEnd.call(r)}r.absStartX=r.x,r.absStartY=r.y,r.startX=r.x,r.startY=r.y,r.pointX=i.pageX,r.pointY=i.pageY,r.startTime=t.timeStamp||Date.now(),r.options.onScrollStart&&r.options.onScrollStart.call(r,t),r._bind(E,e),r._bind(S,e),r._bind(x,e)},_move:function(e){var t=this,r=m?e.touches[0]:e,i=r.pageX-t.pointX,s=r.pageY-t.pointY,u=t.x+i,a=t.y+s,f,l,c,h=e.timeStamp||Date.now();t.options.onBeforeScrollMove&&t.options.onBeforeScrollMove.call(t,e);if(t.options.zoom&&m&&e.touches.length>1){f=n.abs(e.touches[0].pageX-e.touches[1].pageX),l=n.abs(e.touches[0].pageY-e.touches[1].pageY),t.touchesDist=n.sqrt(f*f+l*l),t.zoomed=!0,c=1/t.touchesDistStart*t.touchesDist*this.scale,c<t.options.zoomMin?c=.5*t.options.zoomMin*Math.pow(2,c/t.options.zoomMin):c>t.options.zoomMax&&(c=2*t.options.zoomMax*Math.pow(.5,t.options.zoomMax/c)),t.lastScale=c/this.scale,u=this.originX-this.originX*t.lastScale+this.x,a=this.originY-this.originY*t.lastScale+this.y,this.scroller.style[o]="translate("+u+"px,"+a+"px) scale("+c+")"+k,t.options.onZoom&&t.options.onZoom.call(t,e);return}t.pointX=r.pageX,t.pointY=r.pageY;if(u>0||u<t.maxScrollX)u=t.options.bounce?t.x+i/2:u>=0||t.maxScrollX>=0?0:t.maxScrollX;if(a>t.minScrollY||a<t.maxScrollY)a=t.options.bounce?t.y+s/2:a>=t.minScrollY||t.maxScrollY>=0?t.minScrollY:t.maxScrollY;t.distX+=i,t.distY+=s,t.absDistX=n.abs(t.distX),t.absDistY=n.abs(t.distY);if(t.absDistX<6&&t.absDistY<6)return;t.options.lockDirection&&(t.absDistX>t.absDistY+5?(a=t.y,s=0):t.absDistY>t.absDistX+5&&(u=t.x,i=0)),t.moved=!0,t._pos(u,a),t.dirX=i>0?-1:i<0?1:0,t.dirY=s>0?-1:s<0?1:0,h-t.startTime>300&&(t.startTime=h,t.startX=t.x,t.startY=t.y),t.options.onScrollMove&&t.options.onScrollMove.call(t,e)},_end:function(r){if(m&&r.touches.length!==0)return;var i=this,s=m?r.changedTouches[0]:r,u,f,l={dist:0,time:0},c={dist:0,time:0},h=(r.timeStamp||Date.now())-i.startTime,p=i.x,d=i.y,v,g,y,b,w;i._unbind(E,e),i._unbind(S,e),i._unbind(x,e),i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){w=i.scale*i.lastScale,w=Math.max(i.options.zoomMin,w),w=Math.min(i.options.zoomMax,w),i.lastScale=w/i.scale,i.scale=w,i.x=i.originX-i.originX*i.lastScale+i.x,i.y=i.originY-i.originY*i.lastScale+i.y,i.scroller.style[a]="200ms",i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+i.scale+")"+k,i.zoomed=!1,i.refresh(),i.options.onZoomEnd&&i.options.onZoomEnd.call(i,r);return}if(!i.moved){m&&(i.doubleTapTimer&&i.options.zoom?(clearTimeout(i.doubleTapTimer),i.doubleTapTimer=null,i.options.onZoomStart&&i.options.onZoomStart.call(i,r),i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1),i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)):this.options.handleClick&&(i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null,u=s.target;while(u.nodeType!=1)u=u.parentNode;u.tagName!="SELECT"&&u.tagName!="INPUT"&&u.tagName!="TEXTAREA"&&(f=t.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null),f._fake=!0,u.dispatchEvent(f))},i.options.zoom?250:0))),i._resetPos(400),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(h<300&&i.options.momentum){l=p?i._momentum(p-i.startX,h,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):l,c=d?i._momentum(d-i.startY,h,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):c,p=i.x+l.dist,d=i.y+c.dist;if(i.x>0&&p>0||i.x<i.maxScrollX&&p<i.maxScrollX)l={dist:0,time:0};if(i.y>i.minScrollY&&d>i.minScrollY||i.y<i.maxScrollY&&d<i.maxScrollY)c={dist:0,time:0}}if(l.dist||c.dist){y=n.max(n.max(l.time,c.time),10),i.options.snap&&(v=p-i.absStartX,g=d-i.absStartY,n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(b=i._snap(p,d),p=b.x,d=b.y,y=n.max(b.time,y))),i.scrollTo(n.round(p),n.round(d),y),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(i.options.snap){v=p-i.absStartX,g=d-i.absStartY,n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(b=i._snap(i.x,i.y),(b.x!=i.x||b.y!=i.y)&&i.scrollTo(b.x,b.y,b.time)),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}i._resetPos(200),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&r==t.y){t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&(i=="webkit"&&(t.hScrollbarWrapper.style[c]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&(i=="webkit"&&(t.vScrollbarWrapper.style[c]="300ms"),t.vScrollbarWrapper.style.opacity="0");return}t.scrollTo(n,r,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e)n=e.wheelDeltaX/12,r=e.wheelDeltaY/12;else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=-e.detail*3}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0)),o<t.options.zoomMin&&(o=t.options.zoomMin),o>t.options.zoomMax&&(o=t.options.zoomMax),o!=t.scale&&(!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e),t.wheelZoomCount++,t.zoom(e.pageX,e.pageY,o,400),setTimeout(function(){t.wheelZoomCount--,!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400));return}i=t.x+n,s=t.y+r,i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX),s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY),t.maxScrollY<0&&t.scrollTo(i,s,0)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind(T),t._startAni()},_startAni:function(){var e=this,t=e.x,r=e.y,i=Date.now(),s,o,u;if(e.animating)return;if(!e.steps.length){e._resetPos(400);return}s=e.steps.shift(),s.x==t&&s.y==r&&(s.time=0),e.animating=!0,e.moved=!0;if(e.options.useTransition){e._transitionTime(s.time),e._pos(s.x,s.y),e.animating=!1,s.time?e._bind(T):e._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){e._pos(s.x,s.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),e._startAni();return}a=(a-i)/s.time-1,o=n.sqrt(1-a*a),f=(s.x-t)*o+t,l=(s.y-r)*o+r,e._pos(f,l),e.animating&&(e.aniTime=N(u))},u()},_transitionTime:function(e){e+="ms",this.scroller.style[a]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[a]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[a]=e)},_momentum:function(e,t,r,i,s){var o=6e-4,u=n.abs(e)/t,a=u*u/(2*o),f=0,l=0;return e>0&&a>r?(l=s/(6/(a/u*o)),r+=l,u=u*r/a,a=r):e<0&&a>i&&(l=s/(6/(a/u*o)),i+=l,u=u*i/a,a=i),a*=e<0?-1:1,f=u/o,{dist:a,time:n.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,n*=this.scale),{left:t,top:n}},_snap:function(e,t){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;for(i=0,s=r.pagesX.length;i<s;i++)if(e>=r.pagesX[i]){o=i;break}o==r.currPageX&&o>0&&r.dirX<0&&o--,e=r.pagesX[o],a=n.abs(e-r.pagesX[r.currPageX]),a=a?n.abs(r.x-e)/a*500:0,r.currPageX=o,o=r.pagesY.length-1;for(i=0;i<o;i++)if(t>=r.pagesY[i]){o=i;break}return o==r.currPageY&&o>0&&r.dirY<0&&o--,t=r.pagesY[o],f=n.abs(t-r.pagesY[r.currPageY]),f=f?n.abs(r.y-t)/f*500:0,r.currPageY=o,u=n.round(n.max(a,f))||200,{x:e,y:t,time:u}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var t=this;t.scroller.style[o]="",t.hScrollbar=!1,t.vScrollbar=!1,t._scrollbar("h"),t._scrollbar("v"),t._unbind(b,e),t._unbind(w),t._unbind(E,e),t._unbind(S,e),t._unbind(x,e),t.options.hasTouch||(t._unbind("DOMMouseScroll"),t._unbind("mousewheel")),t.options.useTransition&&t._unbind(T),t.options.checkDOMChanges&&clearInterval(t.checkDOMTime),t.options.onDestroy&&t.options.onDestroy.call(t)},refresh:function(){var e=this,t,r,i,s,o=0,u=0;e.scale<e.options.zoomMin&&(e.scale=e.options.zoomMin),e.wrapperW=e.wrapper.clientWidth||1,e.wrapperH=e.wrapper.clientHeight||1,e.minScrollY=-e.options.topOffset||0,e.scrollerW=n.round(e.scroller.offsetWidth*e.scale),e.scrollerH=n.round((e.scroller.offsetHeight+e.minScrollY)*e.scale),e.maxScrollX=e.wrapperW-e.scrollerW,e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY,e.dirX=0,e.dirY=0,e.options.onRefresh&&e.options.onRefresh.call(e),e.hScroll=e.options.hScroll&&e.maxScrollX<0,e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH),e.hScrollbar=e.hScroll&&e.options.hScrollbar,e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH,t=e._offset(e.wrapper),e.wrapperOffsetLeft=-t.left,e.wrapperOffsetTop=-t.top;if(typeof e.options.snap=="string"){e.pagesX=[],e.pagesY=[],s=e.scroller.querySelectorAll(e.options.snap);for(r=0,i=s.length;r<i;r++)o=e._offset(s[r]),o.left+=e.wrapperOffsetLeft,o.top+=e.wrapperOffsetTop,e.pagesX[r]=o.left<e.maxScrollX?e.maxScrollX:o.left*e.scale,e.pagesY[r]=o.top<e.maxScrollY?e.maxScrollY:o.top*e.scale}else if(e.options.snap){e.pagesX=[];while(o>=e.maxScrollX)e.pagesX[u]=o,o-=e.wrapperW,u++;e.maxScrollX%e.wrapperW&&(e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1]),o=0,u=0,e.pagesY=[];while(o>=e.maxScrollY)e.pagesY[u]=o,o-=e.wrapperH,u++;e.maxScrollY%e.wrapperH&&(e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1])}e._scrollbar("h"),e._scrollbar("v"),e.zoomed||(e.scroller.style[a]="0",e._resetPos(400))},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop(),s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++)s[o].relative&&(s[o].x=i.x-s[o].x,s[o].y=i.y-s[o].y),i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0});i._startAni()},scrollToElement:function(e,t){var r=this,i;e=e.nodeType?e:r.scroller.querySelector(e);if(!e)return;i=r._offset(e),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top,t=t===undefined?n.max(n.abs(i.left)*2,n.abs(i.top)*2):t,r.scrollTo(i.left,i.top,t)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n,r.options.onScrollStart&&r.options.onScrollStart.call(r),r.options.snap?(e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e,t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t,e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e,t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t,r.currPageX=e,r.currPageY=t,i=r.pagesX[e],s=r.pagesY[t]):(i=-r.wrapperW*e,s=-r.wrapperH*t,i<r.maxScrollX&&(i=r.maxScrollX),s<r.maxScrollY&&(s=r.maxScrollY)),r.scrollTo(i,s,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(E,e),this._unbind(S,e),this._unbind(x,e)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(T):C(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,t,n,r){var i=this,s=n/i.scale;if(!i.options.useTransform)return;i.zoomed=!0,r=r===undefined?200:r,e=e-i.wrapperOffsetLeft-i.x,t=t-i.wrapperOffsetTop-i.y,i.x=e-e*s+i.x,i.y=t-t*s+i.y,i.scale=n,i.refresh(),i.x=i.x>0?0:i.x<i.maxScrollX?i.maxScrollX:i.x,i.y=i.y>i.minScrollY?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y,i.scroller.style[a]=r+"ms",i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+n+")"+k,i.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},r=null,typeof exports!="undefined"?exports.iScroll=L:e.iScroll=L}(window,document),define("iscroll",function(){}),function(e){define("mobiscroll",["jquery"],function(){return function(){(function(e){function t(e){for(var t in e)if(void 0!==u[e[t]])return!0;return!1}function n(e,t){var n=e.originalEvent,r=e.changedTouches;return r||n&&n.changedTouches?n?n.changedTouches[0]["page"+t]:r[0]["page"+t]:e["page"+t]}function r(t,n,r){var o=t;return"object"==typeof n?t.each(function(){this.id||(this.id="mobiscroll"+ ++i),s[this.id]&&s[this.id].destroy(),new e.mobiscroll.classes[n.component||"Scroller"](this,n)}):("string"==typeof n&&t.each(function(){var e;if((e=s[this.id])&&e[n])if(e=e[n].apply(this,Array.prototype.slice.call(r,1)),void 0!==e)return o=e,!1}),o)}var i=+(new Date),s={},o=e.extend,u=document.createElement("modernizr").style,a=t(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),f=function(){var e=["Webkit","Moz","O","ms"],n;for(n in e)if(t([e[n]+"Transform"]))return"-"+e[n].toLowerCase()+"-";return""}(),l=f.replace(/^\-/,"").replace(/\-$/,"").replace("moz","Moz");e.fn.mobiscroll=function(t){return o(this,e.mobiscroll.components),r(this,t,arguments)},e.mobiscroll=e.mobiscroll||{util:{prefix:f,jsPrefix:l,has3d:a,getCoord:n},presets:{},themes:{},i18n:{},instances:s,classes:{},components:{},presetShort:function(e,t){this.components[e]=function(n){return r(this,o(n,{component:t,preset:e}),arguments)}}},e.scroller=e.scroller||e.mobiscroll,e.fn.scroller=e.fn.scroller||e.fn.mobiscroll})(jQuery),function(e){function t(e){if("touchstart"===e.type)o=!0;else if(o)return o=!1;return!0}function n(){s=!0,setTimeout(function(){s=!1},300)}function r(t){var n={values:[],keys:[]};return e.each(t,function(e,t){n.keys.push(e),n.values.push(t)}),n}e.mobiscroll.classes.Scroller=function(o,f){function E(e,t,n){e.stopPropagation(),e.preventDefault();if(!ut&&!S(t)&&!t.hasClass("dwa")){ut=!0;var r=t.find(".dw-ul");N(r),clearInterval(wt),wt=setInterval(function(){n(r)},Dt.delay),n(r)}}function S(t){return e.isArray(Dt.readonly)?(t=e(".dwwl",G).index(t),Dt.readonly[t]):Dt.readonly}function T(t){var n='<div class="dw-bf">',t=Ft[t],t=t.values?t:r(t),i=1,s=t.labels||[],o=t.values,u=t.keys||o;return e.each(o,function(e,t){0==i%20&&(n+='</div><div class="dw-bf">'),n+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+u[e]+'"'+(s[e]?' aria-label="'+s[e]+'"':"")+' style="height:'+K+"px;line-height:"+K+'px;"><div class="dw-i">'+t+"</div></div>",i++}),n+="</div>"}function N(t){vt=e(".dw-li",t).index(e(".dw-v",t).eq(0)),mt=e(".dw-li",t).index(e(".dw-v",t).eq(-1)),bt=e(".dw-ul",G).index(t)}function L(e){var t=Dt.headerText;return t?"function"==typeof t?t.call(Mt,e):t.replace(/\{value\}/i,e):""}function O(){Ot.temp=Ot.values?Ot.values.slice(0):Dt.parseValue(_t.val()||"",Ot),V()}function M(t){var n=window.getComputedStyle?getComputedStyle(t[0]):t[0].style,r;return h?(e.each(["t","webkitT","MozT","OT","msT"],function(e,t){if(void 0!==n[t+"ransform"])return r=n[t+"ransform"],!1}),r=r.split(")")[0].split(", "),t=r[13]||r[5]):t=n.top.replace("px",""),Math.round(J-t/K)}function _(e,t){clearTimeout(Ht[t]),delete Ht[t],e.closest(".dwwl").removeClass("dwa")}function P(e,t,n,r,i){var s=(J-n)*K,o=e[0].style;s==jt[t]&&Ht[t]||(r&&s!=jt[t]&&U("onAnimStart",[G,t,r]),jt[t]=s,o[c+"Transition"]="all "+(r?r.toFixed(3):0)+"s ease-out",h?o[c+"Transform"]="translate3d(0,"+s+"px,0)":o.top=s+"px",Ht[t]&&_(e,t),r&&i&&(e.closest(".dwwl").addClass("dwa"),Ht[t]=setTimeout(function(){_(e,t)},1e3*r)),Bt[t]=n)}function j(t,n,r){var t=e('.dw-li[data-val="'+t+'"]',n),n=e(".dw-li",n),i=n.index(t),s=n.length;if(!t.hasClass("dw-v")){for(var o=t,u=0,a=0;0<=i-u&&!o.hasClass("dw-v");)u++,o=n.eq(i-u);for(;i+a<s&&!t.hasClass("dw-v");)a++,t=n.eq(i+a);(a<u&&a&&2!==r||!u||0>i-u||1==r)&&t.hasClass("dw-v")?i+=a:(t=o,i-=u)}return{cell:t,v:i,val:t.attr("data-val")}}function q(t,n,r,i,s){!1!==U("validate",[G,n,t,i])&&(e(".dw-ul",G).each(function(r){var o=e(this),u=r==n||void 0===n,a=j(Ot.temp[r],o,i),f=a.cell;if(!f.hasClass("dw-sel")||u)Ot.temp[r]=a.val,e(".dw-sel",o).removeClass("dw-sel"),Dt.multiple||(e(".dw-sel",o).removeAttr("aria-selected"),f.attr("aria-selected","true")),f.addClass("dw-sel"),P(o,r,a.v,u?t:.1,u?s:!1)}),Q=Dt.formatResult(Ot.temp),Ot.live&&V(r,0,!0),e(".dwv",G).html(L(Q)),r&&U("onChange",[Q]))}function U(t,n){var r;return n.push(Ot),e.each([st,Pt,f],function(e,i){i&&i[t]&&(r=i[t].apply(Mt,n))}),r}function z(t,n,r,i,s){var n=Math.max(vt,Math.min(n,mt)),o=e(".dw-li",t).eq(n),u=void 0===s?n:s,a=void 0!==s,f=bt,l=i?n==u?.1:Math.abs((n-u)*Dt.timeUnit):0;Ot.temp[f]=o.attr("data-val"),P(t,f,n,l,a),setTimeout(function(){q(l,f,!0,r,a)},10)}function W(e){var t=Bt[bt]+1;z(e,t>mt?vt:t,1,!0)}function X(e){var t=Bt[bt]-1;z(e,t<vt?mt:t,2,!0)}function V(e,t,n,r,i){Rt&&!n&&q(t,void 0,i),Q=Dt.formatResult(Ot.temp),r||(Ot.values=Ot.temp.slice(0),Ot.val=Q),e&&qt&&(St=!0,_t.val(Q).change())}function $(e,t){var n;Ct.on(e,function(){clearTimeout(n),n=setTimeout(function(){(rt&&t||!t)&&Ot.position(!t)},200)})}var J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot=this,Mt=o,_t=e(Mt),Dt=v({},b),Pt={},Ht={},Bt={},jt={},Ft=[],It=[],qt=_t.is("input"),Rt=!1,Ut=function(n){t(n)&&!i&&!ut&&!At&&!S(this)&&(n.preventDefault(),i=!0,ft="clickpick"!=Dt.mode,yt=e(".dw-ul",this),N(yt),dt=(lt=void 0!==Ht[bt])?M(yt):Bt[bt],ct=p(n,"Y"),ht=new Date,pt=ct,P(yt,bt,dt,.001),ft&&yt.closest(".dwwl").addClass("dwa"),e(document).on(g,zt).on(y,Wt))},zt=function(e){ft&&(e.preventDefault(),e.stopPropagation(),pt=p(e,"Y"),P(yt,bt,Math.max(vt-1,Math.min(dt+(ct-pt)/K,mt+1)))),ct!==pt&&(lt=!0)},Wt=function(){var t=new Date-ht,n=Math.max(vt-1,Math.min(dt+(ct-pt)/K,mt+1)),r,s=yt.offset().top;300>t?(t=(pt-ct)/t,r=t*t/Dt.speedUnit,0>pt-ct&&(r=-r)):r=pt-ct,t=Math.round(dt-r/K);if(!r&&!lt){var s=Math.floor((pt-s)/K),o=e(e(".dw-li",yt)[s]);r=ft,!1!==U("onValueTap",[o])?t=s:r=!0,r&&(o.addClass("dw-hl"),setTimeout(function(){o.removeClass("dw-hl")},200))}ft&&z(yt,t,0,!0,Math.round(n)),i=!1,yt=null,e(document).off(g,zt).off(y,Wt)},Xt=function(n){At&&At.removeClass("dwb-a"),At=e(this),e(document).on(y,Vt),!At.hasClass("dwb-d")&&!At.hasClass("dwb-nhl")&&At.addClass("dwb-a"),At.hasClass("dwwb")&&t(n)&&E(n,At.closest(".dwwl"),At.hasClass("dwwbp")?W:X)},Vt=function(){ut&&(clearInterval(wt),ut=!1),At&&(At.removeClass("dwb-a"),At=null),e(document).off(y,Vt)},$t=function(t){38==t.keyCode?E(t,e(this),X):40==t.keyCode&&E(t,e(this),W)},Jt=function(){ut&&(clearInterval(wt),ut=!1)},Kt=function(t){if(!S(this)){t.preventDefault();var t=t.originalEvent||t,t=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,n=e(".dw-ul",this);N(n),z(n,Math.round(Bt[bt]-t),0>t?1:2)}};Ot.position=function(t){if(gt&&!Tt&&!(Z===Y.width()&&et===(Ct[0].innerHeight||Ct.innerHeight())&&t||!1===U("onPosition",[G]))){var n,r,i,s,o,u,a,f,l,c=0,h=0,t=Ct.scrollTop();s=e(".dwwr",G);var p=e(".dw",G),d={};o=void 0===Dt.anchor?_t:Dt.anchor,Z=Y.width(),et=Ct[0].innerHeight||Ct.innerHeight(),/modal|bubble/.test(Dt.display)&&(e(".dwc",G).each(function(){n=e(this).outerWidth(!0),c+=n,h=n>h?n:h}),n=c>Z?h:c,s.width(n).css("white-space",c>Z?"":"nowrap")),tt=p.outerWidth(),nt=p.outerHeight(!0),rt=nt<=et&&tt<=Z,Ot.scrollLock=rt,"modal"==Dt.display?(r=(Z-tt)/2,i=t+(et-nt)/2):"bubble"==Dt.display?(l=!0,f=e(".dw-arrw-i",G),i=o.offset(),u=Math.abs(e(Dt.context).offset().top-i.top),a=Math.abs(e(Dt.context).offset().left-i.left),s=o.outerWidth(),o=o.outerHeight(),r=a-(p.outerWidth(!0)-s)/2,r=r>Z-tt?Z-(tt+20):r,r=0>r?0:r,i=u-nt,i<t||u>t+et?(p.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),i=u+o):p.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),f=f.outerWidth(),s=a+s/2-(r+(tt-f)/2),e(".dw-arr",G).css({left:Math.max(0,Math.min(s,f))})):(d.width="100%","top"==Dt.display?i=t:"bottom"==Dt.display&&(i=t+et-nt)),d.top=0>i?0:i,d.left=r,p.css(d),Y.height(0),r=Math.max(i+nt,"body"==Dt.context?e(document).height():kt.scrollHeight),Y.height(r),l&&(i+nt>t+et||u>t+et)&&(Tt=!0,setTimeout(function(){Tt=!1},300),Ct.scrollTop(Math.min(i+nt-et,r-et)))}},Ot.enable=function(){Dt.disabled=!1,qt&&_t.prop("disabled",!1)},Ot.disable=function(){Dt.disabled=!0,qt&&_t.prop("disabled",!0)},Ot.setValue=function(t,n,r,i){Ot.temp=e.isArray(t)?t.slice(0):Dt.parseValue.call(Mt,t+"",Ot),V(n,r,!1,i,n)},Ot.getValue=function(){return Ot.values},Ot.getValues=function(){var e=[],t;for(t in Ot._selectedValues)e.push(Ot._selectedValues[t]);return e},Ot.changeWheel=function(t,n,r){if(G){var i=0,s=t.length;e.each(Dt.wheels,function(o,u){e.each(u,function(o,u){if(-1<e.inArray(i,t)&&(Ft[i]=u,e(".dw-ul",G).eq(i).html(T(i)),s--,!s))return Ot.position(),q(n,void 0,r),!1;i++});if(!s)return!1})}},Ot.isVisible=function(){return Rt},Ot.tap=function(e,t){var r,i;Dt.tap&&e.on("touchstart.dw mousedown.dw",function(e){e.preventDefault(),r=p(e,"X"),i=p(e,"Y")}).on("touchend.dw",function(e){20>Math.abs(p(e,"X")-r)&&20>Math.abs(p(e,"Y")-i)&&t.call(this,e),n()}),e.on("click.dw",function(e){s||t.call(this,e),e.preventDefault()})},Ot.show=function(t){if(!Dt.disabled&&!Rt){"top"==Dt.display&&(it="slidedown"),"bottom"==Dt.display&&(it="slideup"),O(),U("onBeforeShow",[]);var r,i=0,s="";it&&!t&&(s="dw-"+it+" dw-in");var o='<div role="dialog" class="'+Dt.theme+" dw-"+Dt.display+(l?" dw"+l.replace(/\-$/,""):"")+(at?"":" dw-nobtn")+'">'+(gt?'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+s+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':'<div class="dw dwbg dwi">')+'<div class="dwwr"><div aria-live="assertive" class="dwv'+(Dt.headerText?"":" dw-hidden")+'"></div><div class="dwcc">',u=e.isArray(Dt.minWidth),a=e.isArray(Dt.maxWidth),f=e.isArray(Dt.fixedWidth);e.each(Dt.wheels,function(t,n){o+='<div class="dwc'+("scroller"!=Dt.mode?" dwpm":" dwsc")+(Dt.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>',e.each(n,function(e,t){Ft[i]=t,r=void 0!==t.label?t.label:e,o+='<td><div class="dwwl dwrc dwwl'+i+'">'+("scroller"!=Dt.mode?'<a href="#" tabindex="-1" class="dwb-e dwwb dwwbp" style="height:'+K+"px;line-height:"+K+'px;"><span>+</span></a><a href="#" tabindex="-1" class="dwb-e dwwb dwwbm" style="height:'+K+"px;line-height:"+K+'px;"><span>&ndash;</span></a>':"")+'<div class="dwl">'+r+'</div><div tabindex="0" aria-live="off" aria-label="'+r+'" role="listbox" class="dwww"><div class="dww" style="height:'+Dt.rows*K+"px;"+(Dt.fixedWidth?"width:"+(f?Dt.fixedWidth[i]:Dt.fixedWidth)+"px;":(Dt.minWidth?"min-width:"+(u?Dt.minWidth[i]:Dt.minWidth)+"px;":"min-width:"+Dt.width+"px;")+(Dt.maxWidth?"max-width:"+(a?Dt.maxWidth[i]:Dt.maxWidth)+"px;":""))+'"><div class="dw-ul">',o+=T(i),o+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',i++}),o+="</tr></table></div></div>"}),o+="</div>",gt&&at&&(o+='<div class="dwbc">',e.each(Lt,function(e,t){t="string"==typeof t?Ot.buttons[t]:t,o+="<span"+(Dt.btnWidth?' style="width:'+100/Lt.length+'%"':"")+' class="dwbw '+t.css+'"><a href="#" class="dwb dwb'+e+' dwb-e" role="button">'+t.text+"</a></span>"}),o+="</div>"),o+=(gt?"</div>":"")+"</div></div></div>",G=e(o),Y=e(".dw-persp",G),q(),U("onMarkupReady",[G]),gt?(G.appendTo(Dt.context),it&&!t&&(G.addClass("dw-trans"),setTimeout(function(){G.removeClass("dw-trans").find(".dw").removeClass(s)},350))):_t.is("div")?_t.html(G):G.insertAfter(_t),U("onMarkupInserted",[G]),Rt=!0,gt&&(e(window).on("keydown.dw",function(e){e.keyCode==13?Ot.select():e.keyCode==27&&Ot.cancel()}),Dt.scrollLock&&G.on("touchmove",function(e){rt&&e.preventDefault()}),e("input,select,button",kt).each(function(){this.disabled||(e(this).attr("autocomplete")&&e(this).data("autocomplete",e(this).attr("autocomplete")),e(this).addClass("dwtd").prop("disabled",!0).attr("autocomplete","off"))}),Ot.position(),$("orientationchange.dw resize.dw",!1),$("scroll.dw",!0)),G.on("DOMMouseScroll mousewheel",".dwwl",Kt).on("keydown",".dwwl",$t).on("keyup",".dwwl",Jt).on("selectstart mousedown",d).on("click",".dwb-e",d).on("touchend",function(){Dt.tap&&n()}).on("keydown",".dwb-e",function(t){t.keyCode==32&&(t.preventDefault(),t.stopPropagation(),e(this).click())}),setTimeout(function(){e.each(Lt,function(t,n){Ot.tap(e(".dwb"+t,G),function(e){n=typeof n=="string"?Ot.buttons[n]:n,n.handler.call(this,e,Ot)})}),Dt.closeOnOverlay&&Ot.tap(e(".dwo",G),function(){Ot.cancel()}),G.on(m,".dwwl",Ut).on(m,".dwb-e",Xt)},300),U("onShow",[G,Q])}},Ot.hide=function(t,n,r){Rt&&(r||!1!==U("onClose",[Q,n]))&&(e(".dwtd",kt).each(function(){e(this).prop("disabled",!1).removeClass("dwtd"),e(this).data("autocomplete")?e(this).attr("autocomplete",e(this).data("autocomplete")):e(this).removeAttr("autocomplete")}),G&&((n=gt&&it&&!t)&&G.addClass("dw-trans").find(".dw").addClass("dw-"+it+" dw-out"),t?G.remove():setTimeout(function(){G.remove()},n?350:1),Ct.off(".dw")),jt={},Rt=!1,Nt)&&(xt=!0,Nt.focus())},Ot.select=function(){!1!==Ot.hide(!1,"set")&&(V(!0,0,!0),U("onSelect",[Ot.val]))},Ot.attachShow=function(e,t){It.push(e),"inline"!==Dt.display&&e.on((Dt.showOnFocus?"focus.dw":"")+(Dt.showOnTap?" click.dw":""),function(){!xt&&!s&&(t&&t(),Nt=e,Ot.show()),setTimeout(function(){xt=!1},300)})},Ot.cancel=function(){!1!==Ot.hide(!1,"cancel")&&U("onCancel",[Ot.val])},Ot.init=function(t){st=u.themes[t.theme||Dt.theme],ot=u.i18n[t.lang||Dt.lang],v(f,t),U("onThemeLoad",[ot,f]),v(Dt,st,ot,f),Dt.buttons=Dt.buttons||["set","cancel"],Dt.headerText=void 0===Dt.headerText?"inline"!==Dt.display?"{value}":!1:Dt.headerText,Ot.settings=Dt,_t.off(".dw");if(t=u.presets[Dt.preset])Pt=t.call(Mt,Ot),v(Dt,Pt,f);J=Math.floor(Dt.rows/2),K=Dt.height,it=Dt.animate,gt="inline"!==Dt.display,Lt=Dt.buttons,Ct=e("body"==Dt.context?window:Dt.context),kt=e(Dt.context)[0],Dt.setText||Lt.splice(e.inArray("set",Lt),1),Dt.cancelText||Lt.splice(e.inArray("cancel",Lt),1),Dt.button3&&Lt.splice(e.inArray("set",Lt)+1,0,{text:Dt.button3Text,handler:Dt.button3}),Ot.context=Ct,Ot.live=!gt||-1==e.inArray("set",Lt),Ot.buttons.set={text:Dt.setText,css:"dwb-s",handler:Ot.select},Ot.buttons.cancel={text:Ot.live?Dt.closeText:Dt.cancelText,css:"dwb-c",handler:Ot.cancel},Ot.buttons.clear={text:Dt.clearText,css:"dwb-cl",handler:function(){Ot.trigger("onClear",[G]),_t.val(""),Ot.live||Ot.hide()}},at=0<Lt.length,Rt&&Ot.hide(!0,!1,!0),gt?(O(),qt&&(void 0===Et&&(Et=Mt.readOnly),Mt.readOnly=!0),Ot.attachShow(_t),e(window).off(".dwa").on("focus.dwa",function(){Nt&&document.activeElement==Nt[0]&&(xt=!0)})):Ot.show(),qt&&_t.on("change.dw",function(){St||Ot.setValue(_t.val(),!1,.2),St=!1})},Ot.option=function(e,t){var n={};"object"==typeof e?n=e:n[e]=t,Ot.init(n)},Ot.destroy=function(){Ot.hide(!0,!1,!0),e.each(It,function(e,t){t.off(".dw")}),e(window).off(".dwa"),qt&&(Mt.readOnly=Et),delete a[Mt.id],U("onDestroy",[])},Ot.getInst=function(){return Ot},Ot.getValidCell=j,Ot.trigger=U,a[Mt.id]=Ot,Ot.values=null,Ot.val=null,Ot.temp=null,Ot.buttons={},Ot._selectedValues={},Ot.init(f)};var i,s,o,u=e.mobiscroll,a=u.instances,f=u.util,l=f.prefix,c=f.jsPrefix,h=f.has3d,p=f.getCoord,d=function(e){e.preventDefault()},v=e.extend,m="touchstart mousedown",g="touchmove mousemove",y="touchend mouseup",b={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,closeOnOverlay:!0,showOnFocus:!0,showOnTap:!0,showLabel:!0,wheels:[],theme:"",selectedText:" Selected",closeText:"Close",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",clearText:"Clear",context:"body",scrollLock:!0,tap:!0,btnWidth:!0,speedUnit:.0012,timeUnit:.1,formatResult:function(e){return e.join(" ")},parseValue:function(t,n){var i=t.split(" "),s=[],o=0,u;return e.each(n.settings.wheels,function(t,n){e.each(n,function(t,n){n=n.values?n:r(n),u=n.keys||n.values,-1!==e.inArray(i[o],u)?s.push(i[o]):s.push(u[0]),o++})}),s}};e(document).on("mouseover mouseup mousedown click",function(e){if(s)return e.stopPropagation(),e.preventDefault(),!1})}(jQuery),function(e){e.mobiscroll.themes.ios={dateOrder:"MMdyy",rows:5,height:30,minWidth:55,headerText:!1,showLabel:!1,btnWidth:!1,useShortLabels:!0}}(jQuery),function(e){var t={dateOrder:"Mddyy",mode:"mixed",rows:5,minWidth:70,height:36,showLabel:!1,useShortLabels:!0};e.mobiscroll.themes["android-ics"]=t,e.mobiscroll.themes["android-ics light"]=t}(jQuery),function(e){e.mobiscroll.themes.android={dateOrder:"Mddyy",mode:"clickpick",height:50,showLabel:!1}}(jQuery),function(e){var t;e.mobiscroll.themes.wp={minWidth:70,height:76,accent:"none",dateOrder:"mmMMddDDyy",headerText:!1,showLabel:!1,btnWidth:!1,onAnimStart:function(n,r,i){e(".dwwl"+r,n).addClass("wpam"),clearTimeout(t[r]),t[r]=setTimeout(function(){e(".dwwl"+r,n).removeClass("wpam")},1e3*i+100)},onMarkupInserted:function(n,r){var i,s;t={},e(".dw",n).addClass("wp-"+r.settings.accent),e(".dwwl",n).on("touchstart mousedown DOMMouseScroll mousewheel",".dw-sel",function(){i=!0,s=e(this).closest(".dwwl").hasClass("wpa"),e(".dwwl",n).removeClass("wpa"),e(this).closest(".dwwl").addClass("wpa")}).on("touchmove mousemove",function(){i=!1}).on("touchend mouseup",function(){i&&s&&e(this).closest(".dwwl").removeClass("wpa")})},onThemeLoad:function(e,t){if(e&&e.dateOrder&&!t.dateOrder){var n=e.dateOrder,n=n.match(/mm/i)?n.replace(/mmMM|mm|MM/,"mmMM"):n.replace(/mM|m|M/,"mM"),n=n.match(/dd/i)?n.replace(/ddDD|dd|DD/,"ddDD"):n.replace(/dD|d|D/,"dD");t.dateOrder=n}}},e.mobiscroll.themes["wp light"]=e.mobiscroll.themes.wp}(jQuery),function(e){e.mobiscroll.themes.ios7={dateOrder:"MMdyy",rows:5,height:34,minWidth:55,headerText:!1,showLabel:!1,btnWidth:!1,useShortLabels:!0}}(jQuery),function(e){e.mobiscroll.themes.bootstrap={disabledClass:"disabled",activeClass:"btn-primary",activeTabClass:"active",onMarkupInserted:function(t){e(".dw",t).removeClass("dwbg").addClass("popover"),e(".dwwr",t).addClass("popover-content"),e(".dwv",t).addClass("popover-title"),e(".dw-arr",t).addClass("arrow"),e(".dwb, .dwwb",t).addClass("btn btn-default"),e(".dwb-s .dwb",t).removeClass("btn-default").addClass("btn btn-primary"),e(".dw-cal-next .dw-cal-btn-txt",t).prepend('<i class="icon icon-chevron-right glyphicon glyphicon-chevron-right"></i>'),e(".dw-cal-prev .dw-cal-btn-txt",t).prepend('<i class="icon icon-chevron-left glyphicon glyphicon-chevron-left"></i>'),e(".dw-cal-tabs ul",t).addClass("nav nav-tabs"),e(".dw-week-nrs-c",t).addClass("popover"),e(".dw-cal-events",t).addClass("popover"),e(".dw-cal-events-arr",t).addClass("arrow"),e(".dw-dr",t).addClass("btn btn-sm btn-small btn-default")},onPosition:function(t){setTimeout(function(){e(".dw-bubble-top",t).removeClass("bottom").addClass("top"),e(".dw-bubble-bottom",t).removeClass("top").addClass("bottom")},10)},onEventBubbleShow:function(t,n){e(".dw-cal-event-list",n).addClass("list-group"),e(".dw-cal-event",n).addClass("list-group-item"),setTimeout(function(){n.hasClass("dw-cal-events-b")?n.removeClass("top").addClass("bottom"):n.removeClass("bottom").addClass("top")},10)}}}(jQuery),function(e){var t=e.mobiscroll,n=t.util,r=n.has3d,i=n.jsPrefix,s=n.getCoord,o={controls:["calendar"],firstDay:0,maxMonthWidth:170,highlight:!0,swipe:!0,liveSwipe:!0,showDivergentDays:!0,divergentDayChange:!0,navigation:"yearMonth",dateText:"Date",timeText:"Time",calendarText:"Calendar",prevMonthText:"Previous Month",nextMonthText:"Next Month",prevYearText:"Previous Year",nextYearText:"Next Year"};t.presets.calbase=function(t){function n(n,r,i){var s,o,u,f,l={};return n&&(n=t.convert(n),e.each(n,function(e,t){s=t.d||t.start||t,o=s+"";if(t.start&&t.end)for(f=new Date(t.start);f<=t.end;)u=(new Date(f.getFullYear(),f.getMonth(),f.getDate())).getTime(),l[u]=l[u]||[],l[u].push(t),f.setDate(f.getDate()+1);else if(s.getTime)u=(new Date(s.getFullYear(),s.getMonth(),s.getDate())).getTime(),l[u]=l[u]||[],l[u].push(t);else if(o.match(/w/i)){var n=pt.firstDay,a=+o.replace("w",""),c=0,h=(new Date(r,i-1,1)).getDay();1<n-h+1&&(c=7);for(j=0;18>j;j++)u=(new Date(r,i-1,7*j+n-c-h+1+a)).getTime(),l[u]=l[u]||[],l[u].push(t)}else o=o.split("/"),o[1]?u=(new Date(r,o[0]-1,o[1])).getTime():(u=(new Date(r,i-1,o[0])).getTime(),l[u]=l[u]||[],l[u].push(t),u=(new Date(r,i,o[0])).getTime(),l[u]=l[u]||[],l[u].push(t),u=(new Date(r,i+1,o[0])).getTime()),l[u]=l[u]||[],l[u].push(t)})),l}function u(e,r){rt=n(pt.invalid,e,r),t.onGenMonth(e,r)}function f(n,r){var i,s,o,u,f,l,c,h,p,d,v,m=1,g=0;f=new Date(n,r,1);var y=f.getFullYear(),b=f.getMonth(),w=t.getDate(!0),E=(new Date(y,b+1,0)).getDate(),S=(new Date(y,b,1)).getDay(),x=(new Date(y,b,0)).getDate()-S+1,T='<div class="dw-cal-table">',N='<div class="dw-week-nr-c">';1<pt.firstDay-S+1&&(g=7);for(v=0;42>v;v++)d=v+pt.firstDay-g,i=new Date(y,b,d-S+1),s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),f=s+"-"+o+"-"+u,l=e.extend({valid:i<new Date(z.getFullYear(),z.getMonth(),z.getDate())||i>W?!1:void 0===rt[i.getTime()],selected:w.getFullYear()===s&&w.getMonth()===o&&w.getDate()===u},t.getDayProps(i,w)),c=l.valid,h=l.selected,s=l.cssClass,p=d<S||d>=E+S,ct[f]=l,0==v%7&&(T+=(v?"</div>":"")+'<div class="dw-cal-row'+(pt.highlight&&0<=w-i&&6048e5>w-i?" dw-cal-week-hl":"")+'">',vt&&("month"==vt&&o!==b&&v?m=1==u?1:2:"year"==vt&&(m=i,m=new Date(m),m.setHours(0,0,0),m.setDate(m.getDate()+4-(m.getDay()||7)),i=new Date(m.getFullYear(),0,1),m=Math.ceil(((m-i)/864e5+1)/7)),N+='<div class="dw-week-nr"><div class="dw-week-nr-i">'+m+"</div></div>",m++)),T+='<div role="button" tabindex="-1" class="dw-cal-day '+(pt.dayClass||"")+(h?" dw-sel":"")+(s?" "+s:"")+(p?" dw-cal-day-diff":"")+(c?" dw-cal-day-v dwb-e dwb-nhl":" dw-cal-day-inv")+'" data-date="'+(d-S+1)+'" data-full="'+f+'"'+(h?' aria-selected="true"':"")+(c?"":' aria-disabled="true"')+'><div class="dw-i '+(h?wt:"")+" "+(c?pt.validDayClass||"":"")+'"><div class="dw-cal-day-fg">'+(d<S?x+d:d>=E+S?d-E-S+1:d-S+1)+"</div>"+(l.markup||"")+'<div class="dw-cal-day-frame"></div></div></div>';return T+("</div>"+N+"</div></div>")}function l(t,n){F.text(B[n]),I.text(t),new Date(t,n-1,1)<q?e(".dw-cal-prev-m",x).addClass(xt).attr("aria-disabled","true"):e(".dw-cal-prev-m",x).removeClass(xt).removeAttr("aria-disabled"),new Date(t,n+1,1)>U?e(".dw-cal-next-m",x).addClass(xt).attr("aria-disabled","true"):e(".dw-cal-next-m",x).removeClass(xt).removeAttr("aria-disabled"),new Date(t-1,n,1)<q?e(".dw-cal-prev-y",x).addClass(xt).attr("aria-disabled","true"):e(".dw-cal-prev-y",x).removeClass(xt).removeAttr("aria-disabled"),new Date(t+1,n,1)>U?e(".dw-cal-next-y",x).addClass(xt).attr("aria-disabled","true"):e(".dw-cal-next-y",x).removeClass(xt).removeAttr("aria-disabled")}function c(){if(lt.calendar&&V&&"calendar"===it){var n=t.getDate(!0),r;n.getFullYear()===$&&n.getMonth()===J?V=n:n>V&&ot?(r=1!==n.getMonth()-J,$=n.getFullYear(),J=n.getMonth(),d.call(this,$,J,"next",r)):n<V&&ot&&(r=-1!==n.getMonth()-J,$=n.getFullYear(),J=n.getMonth(),d.call(this,$,J,"prev",r)),t.trigger("onDayHighlight",[n]),pt.highlight&&(e(".dw-cal .dw-sel .dw-i",x).removeClass(wt),e(".dw-cal .dw-sel",x).removeClass("dw-sel").removeAttr("aria-selected"),e(".dw-cal-week-hl",x).removeClass("dw-cal-week-hl"),e('.dw-cal .dw-cal-day[data-full="'+$+"-"+J+"-"+n.getDate()+'"]',x).addClass("dw-sel").attr("aria-selected","true").parent().addClass("dw-cal-week-hl"),e(".dw-cal .dw-sel .dw-i",x).addClass(wt)),ot=!0}}function h(e){e.length&&(e[0].style.display="run-in",setTimeout(function(){e[0].style.display=""},0))}function p(e,n,r,i){i||u(e,n),M.html(f(e,n-1)),_.html(r||f(e,n)).find(".dw-cal-day").attr("tabindex",0),P.html(f(e,n+1)),t.needRefresh=!1}function d(n,i,s,o){n&&ft.push({y:n,m:i,dir:s,load:o});if(!at){var c=ft.shift(),h,n=c.y,i=c.m,s=c.dir,o=c.load,c=new Date(n,i,1),n=c.getFullYear(),i=c.getMonth();at=!0,t.changing=!0,t.trigger("onMonthChange",[n,i]),u(n,i),o&&("next"==s?P.html(f(n,i)):M.html(f(n,i))),l(n,i),setTimeout(function(){y("next"==s?A-k:A+k,200),setTimeout(function(){_.removeClass("dw-cal-slide-a"),"next"==s?(b(M,+M.data("curr")+300),M.html(f(n,i+1)),o&&_.html(f(n,i-1)),h=M,M=_,_=P,P=h):(b(P,+P.data("curr")-300),P.html(f(n,i-1)),o&&_.html(f(n,i+1)),h=M,M=P,P=_,_=h),_.addClass("dw-cal-slide-a"),at=!1,ft.length?setTimeout(function(){d()},10):($=n,J=i,V=new Date(n,i,1),t.changing=!1,t.month=_,vt&&H.html(e(".dw-week-nr-c",_).html()),e(".dw-cal-day",x).attr("tabindex",-1),e(".dw-cal-day",_).attr("tabindex",0),t.needRefresh&&t.refresh(),t.trigger("onMonthLoaded",[n,i]))},r?200:0)},10)}}function v(){var n=e(this),r=n.attr("data-date"),i=n.attr("data-full"),s=new Date($,J,r),o=n.hasClass("dw-sel"),u=t.live,f=t.getDate(!0);(dt||!n.hasClass("dw-cal-day-diff"))&&!1!==t.trigger("onDayChange",[e.extend(ct[i],{date:s,cell:this,selected:o})])&&(pt.divergentDayChange||(ot=!1),t.setDate(new Date($,J,r,f.getHours(),f.getMinutes(),f.getSeconds()),u,.2,!u,!0))}function m(){var t,n=0,r=0;if(yt||bt)e(".dwc",x).removeClass("dwc-h"),e.each(lt,function(e,i){t=i.outerWidth(!0),n=Math.max(n,t),r+=t}),yt||r>x.parent().width()?(it=e(".dw-cal-tabs .dw-sel",x).attr("data-control"),e(".dw",x).addClass("dw-cal-tabbed"),e(".dwc",x).addClass("dwc-h"),lt[it].removeClass("dwc-h"),mt||e(".dwcc",x).width(n)):(it="calendar",e(".dwcc",x).width("auto"),e(".dw",x).removeClass("dw-cal-tabbed"))}function g(){gt&&(B=pt.maxMonthWidth>e(".dw-cal-btnw",x).width()?pt.monthNamesShort:pt.monthNames,F.text(B[J]))}function y(e,t){L=Math.max(A-k,Math.min(e,A+k)),N[0].style[i+"Transition"]="all "+(t||0)+"ms",r?N[0].style[i+"Transform"]="translate3d("+L+"px,0,0)":N[0].style.left=L+"%",t&&(A=L)}function b(e,t){e.data("curr",t),r?e[0].style[i+"Transform"]="translate3d("+t+"%,0,0)":e[0].style.left=t+"%"}var w,E,S,x,T,N,k,L,A,O,M,_,P,H,B,F,I,q,U,z,W,X,V,$,J,K,Q,Y,Z,et,tt,nt,rt,it="calendar",st=this,ot=!0,ut=!1,at=!1,ft=[],lt={},ct={},ht=function(){};S=e.extend({},t.settings);var pt=e.extend(t.settings,o,S),dt=pt.showDivergentDays,vt=pt.weekCounter,mt="liquid"==(pt.layout||(/top|bottom/.test(pt.display)?"liquid":"")),gt="yearMonth"==pt.navigation;S=pt.controls.join(",");var yt=(!0===pt.tabs||!1!==pt.tabs&&mt)&&1<pt.controls.length,bt=!yt&&void 0===pt.tabs&&!mt&&1<pt.controls.length,wt=pt.activeClass||"",Et="dw-sel "+(pt.activeTabClass||""),St=pt.activeTabInnerClass||"",xt="dwb-d "+(pt.disabledClass||"");return S.match(/calendar/)&&(lt.calendar=1),S.match(/date/)&&(lt.date=1),S.match(/time/)&&(lt.time=1),lt.calendar&&lt.date&&(yt=!0,bt=!1),pt.preset=(lt.date||lt.calendar?"date":"")+(lt.time?"time":""),t.changing=!1,t.needRefresh=!1,t.getDayProps=ht,t.onGenMonth=ht,t.prepareObj=n,t.refresh=function(){t.isVisible()&&lt.calendar&&p($,J)},S=e.mobiscroll.presets.datetime.call(this,t),tt=S.validate,e.extend(S,{onMarkupReady:function(n){x=n;var i,o,u="",f=pt.dateOrder.search(/m/i),l=pt.dateOrder.search(/y/i);V=t.getDate(!0),$=V.getFullYear(),J=V.getMonth(),X=V,B=pt.monthNames,pt.minDate?(q=new Date(pt.minDate.getFullYear(),pt.minDate.getMonth(),1),z=pt.minDate):z=q=new Date(pt.startYear,0,1),pt.maxDate?(U=new Date(pt.maxDate.getFullYear(),pt.maxDate.getMonth(),1),W=pt.maxDate):W=U=new Date(pt.endYear,11,31,23,59,59),n.addClass("dw-calendar"),r||n.addClass("dw-cal-no3d"),lt.date?lt.date=e(".dwc",x).eq(0):lt.calendar&&e(".dwc",x).eq(0).addClass("dwc-hh").hide(),lt.time&&(lt.time=e(".dwc",x).eq(1));if(lt.calendar){o='<div class="dw-cal-btnw"><div class="dw-cal-prev dw-cal-prev-m dw-cal-btn dwb dwb-e"><a href="#" role="button" class="dw-cal-btn-txt">'+pt.prevMonthText+"</a></div>"+(!gt&&l<f?'<span aria-live="assertive" class="dw-cal-year"></span>&nbsp;':"")+'<span aria-live="assertive" class="dw-cal-month"></span>'+(!gt&&l>f?'&nbsp;<span aria-live="assertive" class="dw-cal-year"></span>':"")+'<div class="dw-cal-next dw-cal-next-m dw-cal-btn dwb dwb-e"><a href="#" role="button" class="dw-cal-btn-txt">'+pt.nextMonthText+"</a></div></div>",gt&&(u='<div class="dw-cal-btnw"><div class="dw-cal-prev dw-cal-prev-y dw-cal-btn dwb dwb-e"><a href="#" role="button" class="dw-cal-btn-txt">'+pt.prevYearText+'</a></div><span aria-live="assertive" class="dw-cal-year"></span><div class="dw-cal-next dw-cal-next-y dw-cal-btn dwb dwb-e"><a href="#" role="button" class="dw-cal-btn-txt">'+pt.nextYearText+"</a></div></div>"),O='<div class="dwc dw-cal-c"><div class="dw-cal '+(vt?" dw-weeks ":"")+(dt?"":" dw-hide-diff ")+(pt.calendarClass||"")+'"><div class="dw-cal-header"><div class="dw-cal-btnc '+(gt?"dw-cal-btnc-ym":"dw-cal-btnc-m")+'">'+(l<f?u+o:o+u)+'</div><div class="dw-cal-days"><table cellpadding="0" cellspacing="0"><tr>';for(E=0;E<7;E++)O+="<th>"+pt.dayNamesShort[(E+pt.firstDay)%7]+"</th>";O+='</tr></table></div></div><div class="dw-cal-anim-c '+(pt.calendarClass||"")+'"><div class="dw-week-nrs-c '+(pt.weekNrClass||"")+'"><div class="dw-week-nrs"></div></div><div class="dw-cal-anim"><div class="dw-cal-slide dw-cal-slide1"></div><div class="dw-cal-slide dw-cal-slide-a dw-cal-slide2"></div><div class="dw-cal-slide dw-cal-slide3"></div></div></div><div class="dw-cal-f"></div></div></div>',lt.calendar=e(O)}e.each(pt.controls,function(t,n){e(".dwcc",x).append(lt[n].attr("id",st.id+"_dw_pnl_"+t))}),i='<div class="dw-cal-tabs"><ul role="tablist">',e.each(pt.controls,function(e,t){lt[t]&&(i+='<li role="tab" aria-controls="'+(st.id+"_dw_pnl_"+e)+'" class="dw-cal-tab '+(e?"":Et)+'" data-control="'+t+'"><a href="#" class="dwb-e dwb-nhl dw-i '+(e?"":St)+'">'+pt[t+"Text"]+"</a></li>")}),i+="</ul></div>",e(".dwcc",n).before(i),T=e(".dw-cal-anim-c",x),N=e(".dw-cal-anim",x),M=e(".dw-cal-slide1",x),_=e(".dw-cal-slide2",x).data("curr",0),P=e(".dw-cal-slide3",x),H=e(".dw-week-nrs",x),t.month=_,lt.calendar&&(b(M,-100),b(P,100)),F=e(".dw-cal-month",x),I=e(".dw-cal-year",x),p($,J),H.html(e(".dw-week-nr-c",_).html()),setTimeout(function(){T.on("touchstart mousedown",".dw-cal-day-v",function(e){if(e.type==="touchstart")ut=!0;else if(ut)return!1;nt=!1,K=s(e,"X"),Q=s(e,"Y")}).on("touchend",".dw-cal-day-v",function(e){!at&&!nt&&Math.abs(s(e,"X")-K)<20&&Math.abs(s(e,"Y")-Q)<20&&v.call(this)}).on("click",".dw-cal-day-v",function(){!at&&!nt&&!ut&&v.call(this),ut=!1}),t.tap(e(".dw-cal-prev-m",x),function(){new Date($,J-1,1)>=q&&ft.length<5&&d($,--J,"prev")}),t.tap(e(".dw-cal-next-m",x),function(){new Date($,J+1,1)<=U&&ft.length<5&&d($,++J,"next")}),t.tap(e(".dw-cal-prev-y",x),function(){new Date($-1,J,1)>=q&&ft.length<5&&($--,d($,J,"prev",!0))}),t.tap(e(".dw-cal-next-y",x),function(){new Date($+1,J,1)<=U&&ft.length<5&&($++,d($,J,"next",!0))}),e(".dw-cal-tab",x).on("touchstart click",function(n){var r=e(this);if(n.type=="touchstart")r.data("click",!0);else if(r.data("click")){r.data("click",null);return}r.hasClass("dw-sel")||(it=r.attr("data-control"),e(".dwc",x).addClass("dwc-h"),e(".dw-cal-tab",x).removeClass(Et).removeAttr("aria-selected").find(".dw-i").removeClass(St),r.addClass(Et).attr("aria-selected","true").find(".dw-i").addClass(St),it==="calendar"?(w=t.getDate(!0),(w.getFullYear()!==X.getFullYear()||w.getMonth()!==X.getMonth()||w.getDate()!==X.getDate())&&c()):X=t.getDate(!0),lt[it].removeClass("dwc-h"),h(e(".dwwc",lt[it])))})},300),mt&&pt.display!=="bubble"?n.addClass("dw-cal-liq"):pt.calendarWidth&&e(".dw-cal",x).width(pt.calendarWidth),pt.calendarHeight&&e(".dw-cal-anim-c",x).height(pt.calendarHeight),t.context.on("orientationchange.dw-cal resize.dw-cal",function(){clearTimeout(et),et=setTimeout(function(){bt&&m();if(mt){var e=A/k;k=N.width(),A=e*k,y(A,0)}g(),t.trigger("onCalResize",[])},100)}),L=A=0;if(pt.swipe){var S,D,j,G,tt,rt,ot,ct,yt,wt=pt.liveSwipe,xt=window.requestAnimationFrame||function(e){e()},Tt=window.cancelAnimationFrame||ht,Nt=function(e){!yt&&!at&&(yt=!0,j=new Date,A=L,K=s(e,"X"),Q=s(e,"Y"))},Ct=function(){tt=yt=!1,rt&&(rt=!1,Tt(S),D=!1,G=new Date-j,ot=G<300?Y-K<-50:wt&&L-A<-k*.4,(ct=G<300?Y-K>50:wt&&L-A>k*.4)&&new Date($,J-1,1)>=q?d($,--J,"prev"):ot&&new Date($,J+1,1)<=U?d($,++J,"next"):wt&&y(A,200))},kt=function(e){at&&e.preventDefault(),yt&&(Y=s(e,"X"),Z=s(e,"Y"),!rt&&!tt&&(Math.abs(Y-K)>10?nt=rt=!0:!t.scrollLock&&Math.abs(Z-Q)>10&&(nt=tt=!0)),rt&&e.preventDefault(),rt&&wt&&!D&&(D=!0,S=xt(Lt)))},Lt=function(){y(A+Y-K),D=!1};T.on("touchstart",Nt).on("touchmove",kt).on("touchend touchcancel",Ct).on("mousedown",function(t){ut||(Nt(t),e(document).on("mousemove.dwsw",kt).on("mouseup.dwsw",function(){Ct(),e(document).off("dwsw")}))})}},onMarkupInserted:function(){m()},onShow:function(){g(),l($,J),k=N.width()},onPosition:function(){if(mt&&pt.display=="modal"){T.height("auto");var n=t.context[0].innerHeight||t.context.innerHeight(),r=e(".dw",x).outerHeight(),i=r-T.height();n>r&&T.height(n-i)}},onClose:function(){t.context.off(".dw-cal"),V=null},validate:function(e,n){tt.call(this,e,n),t.trigger("onSetDate",[]),c()}}),S}}(jQuery),function(e){var t=e.mobiscroll,n=t.util,r=n.getCoord,s=n.has3d,o=n.jsPrefix,u={firstSelectDay:0,eventText:"event",eventsText:"events"};t.presetShort("calendar"),t.presets.calendar=function(t){function n(t){if(t){if(M[t])return M[t];var n=e('<div style="background-color:'+t+';"></div>').appendTo("body"),r=(window.getComputedStyle?getComputedStyle(n[0]):n[0].style).backgroundColor.replace(/rgb|rgba|\(|\)|\s/g,"").split(","),r=130<.299*r[0]+.587*r[1]+.114*r[2]?"#000":"#fff";return n.remove(),M[t]=r}}function f(r,i){var s=y[r.getTime()];if(s){var o,u;u=e(".dw-cal-c",v).height();var f=i.height(),l=i.width(),c=i.offset().top-e(".dw-cal-c",v).offset().top,p=2>i.closest(".dw-cal-row").index(),d='<ul class="dw-cal-event-list">';T=0,k=!1,g=i,i.addClass(P).find(".dw-i").addClass(H),e.each(s,function(e,t){o=t.color,n(o),d+='<li class="dw-cal-event"><div class="dw-cal-event-color" style="'+(o?"background:"+o+";":"")+'"></div>'+t.text+"</li>"}),d+="</ul>",w.html(d),t.trigger("onEventBubbleShow",[g,m]),u=m.addClass("dw-cal-events-t").css({top:p?c+f:"0",bottom:p?"0":u-c}).addClass("dw-cal-events-v").height(),x=u-w.height(),m.css(p?"bottom":"top","auto").removeClass("dw-cal-events-t"),b.css("max-height",u),h(0),p?m.addClass("dw-cal-events-b"):m.removeClass("dw-cal-events-b"),e(".dw-cal-events-arr",m).css("left",i.offset().left-m.offset().left+l/2),t.tap(e(".dw-cal-event",w),function(n){k||t.trigger("onEventSelect",[n,s[e(this).index()],r])}),E=!0}}function l(){m&&m.removeClass("dw-cal-events-v"),g&&g.removeClass(P).find(".dw-i").removeClass(H),E=!1}function c(){U&&l(),t.changing?t.needRefresh=!0:t.refresh()}function h(e){s?w[0].style[o+"Transform"]="translateY("+e+"px)":w.css("top",e)}var p,v,m,g,y,b,w,E,S,x,T,N,k,L,A,O,M={};N=e.extend({},t.settings);var _=e.extend(t.settings,u,N),P="dw-sel dw-cal-day-ev",H=_.activeClass||"",B=_.multiSelect||"week"==_.selectType,j=_.markedDisplay,F=!0===_.events||!0===_.markedText,I=0,q=[],U=e.isArray(_.events),z=U?e.extend(!0,[],_.events):[];N=e.mobiscroll.presets.calbase.call(this,t),p=e.extend({},N);if(_.selectedValues)for(i=0;i<_.selectedValues.length;i++)d=_.selectedValues[i],t._selectedValues[d]=d;return U&&e.each(z,function(e,t){t._id=I++}),t.onGenMonth=function(e,n){y=t.prepareObj(z,e,n),S=t.prepareObj(_.marked,e,n)},t.getDayProps=function(e){var r=new Date,i=e.getTime(),e=B?void 0!==t._selectedValues[e]:U?i===r.setHours(0,0,0,0):void 0,s=S[i]?S[i][0]:!1,o=y[i]?y[i][0]:!1,r=s||o,i=s.text||(F&&o?y[i].length+" "+(1<y[i].length?_.eventsText:_.eventText):0),s=r.color,o=F&&i?n(s):"";return{marked:r,selected:e,cssClass:U&&e?"dw-cal-day-hl":"",markup:F&&i?'<div class="dw-cal-day-txt-c"><div class="dw-cal-day-txt '+(_.eventTextClass||"")+'" title="'+i+'"'+(s?' style="background:'+s+";color:"+o+';text-shadow:none;"':"")+">"+i+"</div></div>":r?'<div class="dw-cal-day-m"'+(s?' style="background-color:'+s+";border-color:"+s+" "+s+' transparent transparent"':"")+"></div>":""}},t.addValue=function(e){t._selectedValues[e]=e,c()},t.removeValue=function(e){delete t._selectedValues[e],c()},t.setValues=function(e){var n=0;t._selectedValues={};for(n;n<e.length;n++)t._selectedValues[e[n]]=e[n];c()},U&&(t.addEvent=function(t){var n=[],t=e.extend(!0,[],e.isArray(t)?t:[t]);return e.each(t,function(e,t){t._id=I++,z.push(t),n.push(t._id)}),c(),n},t.removeEvent=function(t){t=e.isArray(t)?t:[t],e.each(t,function(t,n){e.each(z,function(e,t){if(t._id===n)return z.splice(e,1),!1})}),c()},t.getEvents=function(){return z},t.setEvents=function(t){var n=[];return z=e.extend(!0,[],t),e.each(z,function(e,t){t._id=I++,n.push(t._id)}),c(),n}),e.extend(N,{highlight:!B&&!U,divergentDayChange:!B&&!U,buttons:U?["cancel"]:_.buttons,onClear:function(){B&&(t._selectedValues={},t.refresh())},onBeforeShow:function(){U&&(t.getDate(!0),_.headerText=!1),_.counter&&B&&(_.headerText=function(){var n=0,r=_.selectType=="week"?7:1;return e.each(t._selectedValues,function(){n++}),n/r+" "+_.selectedText})},onMarkupReady:function(n){p.onMarkupReady.call(this,n),v=n,B&&(e(".dwv",n).attr("aria-live","off"),q=e.extend({},t._selectedValues)),F&&e(".dw-cal",n).addClass("dw-cal-ev"),j&&e(".dw-cal",n).addClass("dw-cal-m-"+j),U&&(n.addClass("dw-cal-em"),m=e('<div class="dw-cal-events '+(_.eventBubbleClass||"")+'"><div class="dw-cal-events-arr"></div><div class="dw-cal-events-i"><div class="dw-cal-events-sc"></div></div></div>').appendTo(e(".dw-cal-c",n)),b=e(".dw-cal-events-i",m),w=e(".dw-cal-events-sc",m),m.on("touchstart mousedown",function(t){x<0&&(A=t.type==="touchstart",k=!1,L=T,startY=r(t,"Y"),endY=r(t,"Y"),e(document).on(A?"touchmove.dwsc":"mousemove.dwsc",function(e){e.preventDefault(),endY=r(e,"Y"),T=Math.min(0,Math.max(L+endY-startY,x)),h(T),Math.abs(endY-startY)>5&&(k=!0)}).on(A?"touchend.dwsc":"mouseup.dwsc",function(){e(document).off(".dwsc")}))}),t.tap(m,function(){k||l()}))},onMonthChange:function(){U&&l()},onMonthLoaded:function(){O&&(f(O.d,e('.dw-cal-day-v[data-full="'+O.full+'"]',t.month)),O=!1)},onDayChange:function(n){var r=n.date,i=e(n.cell),n=n.selected;if(U)l(),i.hasClass("dw-cal-day-ev")||(_.divergentDayChange&&i.hasClass("dw-cal-day-diff")?O={d:r,full:i.attr("data-full")}:f(r,i));else if(B)if(_.selectType=="week"){var s,o=r.getDay()-_.firstSelectDay,o=o<0?7+o:o;_.multiSelect||(t._selectedValues={});for(i=0;i<7;i++)s=new Date(r.getFullYear(),r.getMonth(),r.getDate()-o+i),n?delete t._selectedValues[s]:t._selectedValues[s]=s;c()}else i=e('.dw-cal .dw-cal-day[data-full="'+i.attr("data-full")+'"]',v),n?(i.removeClass("dw-sel").removeAttr("aria-selected").find(".dw-i").removeClass(H),delete t._selectedValues[r]):(i.addClass("dw-sel").attr("aria-selected","true").find(".dw-i").addClass(H),t._selectedValues[r]=r);if(!U&&!_.multiSelect&&_.closeOnSelect&&_.display!=="inline")return t.setDate(r),t.select(),!1},onCalResize:function(){E&&e(".dw-cal-events-arr",m).css("left",g.offset().left-m.offset().left+g.width()/2)},onCancel:function(){!t.live&&B&&(t._selectedValues=e.extend({},q))}}),N}}(jQuery),function(e){var t=e.mobiscroll,n=new Date,r={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:n.getFullYear()-100,endYear:n.getFullYear()+1,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",nowText:"Now",showNow:!1,stepHour:1,stepMinute:1,stepSecond:1,separator:" "},i=function(n){function i(e,t,n){return void 0!==N[t]?+e[N[t]]:void 0!==n?n:H[k[t]]?H[k[t]]():k[t](H)}function s(e,t,n,r){e.push({values:n,keys:t,label:r})}function o(e,t){return Math.floor(e/t)*t}function u(e){var t=i(e,"h",0);return new Date(i(e,"y"),i(e,"m"),i(e,"d",1),i(e,"a")?t+12:t,i(e,"i",0),i(e,"s",0))}function f(t,n){return e(".dw-li",t).index(e('.dw-li[data-val="'+n+'"]',t))}var l=e(this),c={},h;if(l.is("input")){switch(l.attr("type")){case"date":h="yy-mm-dd";break;case"datetime":h="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":h="yy-mm-ddTHH:ii:ss";break;case"month":h="yy-mm",c.dateOrder="mmyy";break;case"time":h="HH:ii:ss"}var p=l.attr("min"),l=l.attr("max");p&&(c.minDate=t.parseDate(h,p)),l&&(c.maxDate=t.parseDate(h,l))}var d,v,g,y,b,w,E,p=e.extend({},n.settings),S=e.extend(n.settings,r,c,p),x=0,l=[],T=[],N={},k={y:"getFullYear",m:"getMonth",d:"getDate",h:function(e){return e=e.getHours(),e=D&&12<=e?e-12:e,o(e,B)},i:function(e){return o(e.getMinutes(),j)},s:function(e){return o(e.getSeconds(),F)},a:function(e){return _&&11<e.getHours()?1:0}},L=S.preset,A=S.dateOrder,O=S.timeWheels,M=A.match(/D/),_=O.match(/a/i),D=O.match(/h/),P="datetime"==L?S.dateFormat+S.separator+S.timeFormat:"time"==L?S.timeFormat:S.dateFormat,H=new Date,B=S.stepHour,j=S.stepMinute,F=S.stepSecond,I=S.minDate||new Date(S.startYear,0,1),q=S.maxDate||new Date(S.endYear,11,31,23,59,59);h=h||P;if(L.match(/date/i)){e.each(["y","m","d"],function(e,t){d=A.search(RegExp(t,"i")),-1<d&&T.push({o:d,v:t})}),T.sort(function(e,t){return e.o>t.o?1:-1}),e.each(T,function(e,t){N[t.v]=e}),p=[];for(c=0;3>c;c++)if(c==N.y){x++,g=[],v=[],y=I.getFullYear(),b=q.getFullYear();for(d=y;d<=b;d++)v.push(d),g.push(A.match(/yy/i)?d:(d+"").substr(2,2));s(p,v,g,S.yearText)}else if(c==N.m){x++,g=[],v=[];for(d=0;12>d;d++)y=A.replace(/[dy]/gi,"").replace(/mm/,9>d?"0"+(d+1):d+1).replace(/m/,d+1),v.push(d),g.push(y.match(/MM/)?y.replace(/MM/,'<span class="dw-mon">'+S.monthNames[d]+"</span>"):y.replace(/M/,'<span class="dw-mon">'+S.monthNamesShort[d]+"</span>"));s(p,v,g,S.monthText)}else if(c==N.d){x++,g=[],v=[];for(d=1;32>d;d++)v.push(d),g.push(A.match(/dd/i)&&10>d?"0"+d:d);s(p,v,g,S.dayText)}l.push(p)}if(L.match(/time/i)){E=!0,T=[],e.each(["h","i","s","a"],function(e,t){e=O.search(RegExp(t,"i")),-1<e&&T.push({o:e,v:t})}),T.sort(function(e,t){return e.o>t.o?1:-1}),e.each(T,function(e,t){N[t.v]=x+e}),p=[];for(c=x;c<x+4;c++)if(c==N.h){x++,g=[],v=[];for(d=0;d<(D?12:24);d+=B)v.push(d),g.push(D&&0==d?12:O.match(/hh/i)&&10>d?"0"+d:d);s(p,v,g,S.hourText)}else if(c==N.i){x++,g=[],v=[];for(d=0;60>d;d+=j)v.push(d),g.push(O.match(/ii/)&&10>d?"0"+d:d);s(p,v,g,S.minuteText)}else if(c==N.s){x++,g=[],v=[];for(d=0;60>d;d+=F)v.push(d),g.push(O.match(/ss/)&&10>d?"0"+d:d);s(p,v,g,S.secText)}else c==N.a&&(x++,v=O.match(/A/),s(p,[0,1],v?["AM","PM"]:["am","pm"],S.ampmText));l.push(p)}return n.setDate=function(e,t,r,i){for(var s in N)n.temp[N[s]]=e[k[s]]?e[k[s]]():k[s](e);n.setValue(n.temp,t,r,i)},n.getDate=function(e){return u(e?n.temp:n.values)},n.convert=function(t){var n=t;return e.isArray(t)||(n=[],e.each(t,function(t,r){e.each(r,function(e,r){"daysOfWeek"===t&&(r.d?r.d="w"+r.d:r="w"+r),n.push(r)})})),n},n.format=P,n.buttons.now={text:S.nowText,css:"dwb-n",handler:function(){n.setDate(new Date,!1,.3,!0,!0)}},S.showNow&&S.buttons.splice(e.inArray("set",S.buttons)+1,0,"now"),w=S.invalid?n.convert(S.invalid):!1,{wheels:l,headerText:S.headerText?function(){return t.formatDate(P,u(n.temp),S)}:!1,formatResult:function(e){return t.formatDate(h,u(e),S)},parseValue:function(e){var e=t.parseDate(h,e,S),n,r=[];for(n in N)r[N[n]]=e[k[n]]?e[k[n]]():k[n](e);return r},validate:function(t,r,s,u){var l=n.temp,c={y:I.getFullYear(),m:0,d:1,h:0,i:0,s:0,a:0},h={y:q.getFullYear(),m:11,d:31,h:o(D?11:23,B),i:o(59,j),s:o(59,F),a:1},p={h:B,i:j,s:F,a:1},d=i(l,"y"),v=i(l,"m"),m=!0,g=!0;e.each("y,m,d,a,h,i,s".split(","),function(r,s){if(N[s]!==void 0){var o=c[s],p=h[s],y=31,b=i(l,s),E=e(".dw-ul",t).eq(N[s]);s=="d"&&(p=y=32-(new Date(d,v,32)).getDate(),M&&e(".dw-li",E).each(function(){var t=e(this),n=t.data("val"),r=(new Date(d,v,n)).getDay(),n=A.replace(/[my]/gi,"").replace(/dd/,n<10?"0"+n:n).replace(/d/,n);e(".dw-i",t).html(n.match(/DD/)?n.replace(/DD/,'<span class="dw-day">'+S.dayNames[r]+"</span>"):n.replace(/D/,'<span class="dw-day">'+S.dayNamesShort[r]+"</span>"))})),m&&I&&(o=I[k[s]]?I[k[s]]():k[s](I)),g&&q&&(p=q[k[s]]?q[k[s]]():k[s](q));if(s!="y"){var x=f(E,o),T=f(E,p);e(".dw-li",E).removeClass("dw-v").slice(x,T+1).addClass("dw-v"),s=="d"&&e(".dw-li",E).removeClass("dw-h").slice(y).addClass("dw-h")}b<o&&(b=o),b>p&&(b=p),m&&(m=b==o),g&&(g=b==p);if(w&&s=="d"){for(var C,p=(new Date(d,v,1)).getDay(),x=[],o=0;o<w.length;o++){T=w[o],C=T+"";if(!T.start)if(T.getTime)T.getFullYear()==d&&T.getMonth()==v&&x.push(T.getDate()-1);else if(C.match(/w/i)){C=+C.replace("w","");for(T=C-p;T<y;T+=7)T>=0&&x.push(T)}else C=C.split("/"),C[1]?C[0]-1==v&&x.push(C[1]-1):x.push(C[0]-1)}e.each(x,function(t,n){e(".dw-li",E).eq(n).removeClass("dw-v")}),b=n.getValidCell(b,E,u).val}l[N[s]]=b}});if(E&&w){var y,b,x,T,C,L,O,_,P,H,R,U,X,V,$,J,K={},Q=i(l,"d"),Y=new Date(d,v,Q),Z=["a","h","i","s"];e.each(w,function(e,t){t.start&&(t.apply=!1,y=t.d,b=y+"",T=b.split("/"),y&&(y.getTime&&d==y.getFullYear()&&v==y.getMonth()&&Q==y.getDate()||!b.match(/w/i)&&(T[1]&&Q==T[1]&&v==T[0]-1||!T[1]&&Q==T[0])||b.match(/w/i)&&Y.getDay()==+b.replace("w","")))&&(t.apply=!0,K[Y]=!0)}),e.each(w,function(r,s){if(s.start&&(s.apply||!s.d&&!K[Y])){C=s.start.split(":"),L=s.end.split(":");for(O=0;3>O;O++)void 0===C[O]&&(C[O]=0),void 0===L[O]&&(L[O]=59),C[O]=+C[O],L[O]=+L[O];C.unshift(11<C[0]?1:0),L.unshift(11<L[0]?1:0),D&&(12<=C[1]&&(C[1]-=12),12<=L[1]&&(L[1]-=12)),X=U=!0,e.each(Z,function(r,s){if(N[s]!==void 0){x=i(l,s),H=J=$=0,R=void 0,V=e(".dw-ul",t).eq(N[s]);for(O=r+1;O<4;O++)C[O]>0&&($=p[s]),L[O]<h[Z[O]]&&(J=p[s]);_=o(C[r]+$,p[s]),P=o(L[r]-J,p[s]),U&&(H=_<0?0:_>h[s]?e(".dw-li",V).length:f(V,_)+0),X&&(R=P<0?0:P>h[s]?e(".dw-li",V).length:f(V,P)+1),(U||X)&&e(".dw-li",V).slice(H,R).removeClass("dw-v"),x=n.getValidCell(x,V,u).val,U=U&&x==o(C[r],p[s]),X=X&&x==o(L[r],p[s]),l[N[s]]=x}})}})}}}};e.each(["date","time","datetime"],function(e,n){t.presets[n]=i,t.presetShort(n)}),t.formatDate=function(t,n,i){if(!n)return null;var i=e.extend({},r,i),s=function(e){for(var n=0;f+1<t.length&&t.charAt(f+1)==e;)n++,f++;return n},o=function(e,t,n){t=""+t;if(s(e))for(;t.length<n;)t="0"+t;return t},u=function(e,t,n,r){return s(e)?r[t]:n[t]},f,l="",c=!1;for(f=0;f<t.length;f++)if(c)"'"==t.charAt(f)&&!s("'")?c=!1:l+=t.charAt(f);else switch(t.charAt(f)){case"d":l+=o("d",n.getDate(),2);break;case"D":l+=u("D",n.getDay(),i.dayNamesShort,i.dayNames);break;case"o":l+=o("o",(n.getTime()-(new Date(n.getFullYear(),0,0)).getTime())/864e5,3);break;case"m":l+=o("m",n.getMonth()+1,2);break;case"M":l+=u("M",n.getMonth(),i.monthNamesShort,i.monthNames);break;case"y":l+=s("y")?n.getFullYear():(10>n.getYear()%100?"0":"")+n.getYear()%100;break;case"h":var h=n.getHours(),l=l+o("h",12<h?h-12:0==h?12:h,2);break;case"H":l+=o("H",n.getHours(),2);break;case"i":l+=o("i",n.getMinutes(),2);break;case"s":l+=o("s",n.getSeconds(),2);break;case"a":l+=11<n.getHours()?"pm":"am";break;case"A":l+=11<n.getHours()?"PM":"AM";break;case"'":s("'")?l+="'":c=!0;break;default:l+=t.charAt(f)}return l},t.parseDate=function(t,n,i){var s=e.extend({},r,i),i=s.defaultValue||new Date;if(!t||!n)return i;var n="object"==typeof n?n.toString():n+"",o=s.shortYearCutoff,u=i.getFullYear(),f=i.getMonth()+1,l=i.getDate(),c=-1,h=i.getHours(),p=i.getMinutes(),d=0,v=-1,m=!1,g=function(e){return(e=E+1<t.length&&t.charAt(E+1)==e)&&E++,e},y=function(e){return g(e),e=n.substr(w).match(RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2)+"}")),e?(w+=e[0].length,parseInt(e[0],10)):0},b=function(e,t,r){e=g(e)?r:t;for(t=0;t<e.length;t++)if(n.substr(w,e[t].length).toLowerCase()==e[t].toLowerCase())return w+=e[t].length,t+1;return 0},w=0,E;for(E=0;E<t.length;E++)if(m)"'"==t.charAt(E)&&!g("'")?m=!1:w++;else switch(t.charAt(E)){case"d":l=y("d");break;case"D":b("D",s.dayNamesShort,s.dayNames);break;case"o":c=y("o");break;case"m":f=y("m");break;case"M":f=b("M",s.monthNamesShort,s.monthNames);break;case"y":u=y("y");break;case"H":h=y("H");break;case"h":h=y("h");break;case"i":p=y("i");break;case"s":d=y("s");break;case"a":v=b("a",["am","pm"],["am","pm"])-1;break;case"A":v=b("A",["am","pm"],["am","pm"])-1;break;case"'":g("'")?w++:m=!0;break;default:w++}100>u&&(u+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u<=("string"!=typeof o?o:(new Date).getFullYear()%100+parseInt(o,10))?0:-100));if(-1<c){f=1,l=c;do{s=32-(new Date(u,f-1,32)).getDate();if(l<=s)break;f++,l-=s}while(1)}return h=new Date(u,f-1,l,-1==v?h:v&&12>h?h+12:!v&&12==h?0:h,p,d),h.getFullYear()!=u||h.getMonth()+1!=f||h.getDate()!=l?i:h}}(jQuery),function(e){var t=e.mobiscroll,n={invalid:[],showInput:!0,inputClass:""},r=function(t){function r(t,n,r,s){for(var o=0;o<n;){var u=e(".dwwl"+o,t),f=i(s,o,r);e.each(f,function(t,n){e('.dw-li[data-val="'+n+'"]',u).removeClass("dw-v")}),o++}}function i(e,t,n){for(var r=0,i,s=[];r<t;){var o=e[r];for(i in n)if(n[i].key==o){n=n[i].children;break}r++}for(r=0;r<n.length;)n[r].invalid&&s.push(n[r].key),r++;return s}function s(e,t){for(var n=[];e;)n[--e]=!0;return n[t]=!1,n}function o(e,t,n){var r=0,i,s,o=[],a=w;if(t)for(i=0;i<t;i++)o[i]=[{}];for(;r<e.length;){i=o;for(var t=r,f=a,l={keys:[],values:[],label:E[r]},c=0;c<f.length;)l.values.push(f[c].value),l.keys.push(f[c].key),c++;i[t]=[l],i=0;for(t=void 0;i<a.length&&void 0===t;)a[i].key==e[r]&&(void 0!==n&&r<=n||void 0===n)&&(t=i),i++;if(void 0!==t&&a[t].children)r++,a=a[t].children;else{if(!(s=u(a))||!s.children)break;r++,a=s.children}}return o}function u(e,t){if(!e)return!1;for(var n=0,r;n<e.length;)if(!(r=e[n++]).invalid)return t?n-1:r;return!1}function f(t,n){e(".dwc",t).css("display","").slice(n).hide()}function l(e,t){var n=[],r=w,i=0,s=!1,o,a;if(void 0!==e[i]&&i<=t){s=0,o=e[i];for(a=void 0;s<r.length&&void 0===a;)r[s].key==e[i]&&!r[s].invalid&&(a=s),s++}else a=u(r,!0),o=r[a].key;s=void 0!==a?r[a].children:!1;for(n[i]=o;s;){r=r[a].children,i++;if(void 0!==e[i]&&i<=t){s=0,o=e[i];for(a=void 0;s<r.length&&void 0===a;)r[s].key==e[i]&&!r[s].invalid&&(a=s),s++}else a=u(r,!0),a=!1===a?void 0:a,o=r[a].key;s=void 0!==a&&u(r[a].children)?r[a].children:!1,n[i]=o}return{lvl:i+1,nVector:n}}function c(t){var n=[];return g=g>y++?g:y,t.children("li").each(function(t){var r=e(this),i=r.clone();i.children("ul,ol").remove();var i=i.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),s=r.data("invalid")?!0:!1,t={key:r.data("val")||t,value:i,invalid:s,children:null},r=r.children("ul,ol");r.length&&(t.children=c(r)),n.push(t)}),y--,n}var h=e.extend({},t.settings),p=e.extend(t.settings,n,h),d=e(this),v,m,h=this.id+"_dummy",g=0,y=0,b={},w=p.wheelArray||c(d),E=function(e){var t=[],n;for(n=0;n<e;n++)t[n]=p.labels&&p.labels[n]?p.labels[n]:n;return t}(g),S=[],x=function(e){var t=[],n;n=!0;for(var r=0;n;)n=u(e),t[r++]=n.key,(n=n.children)&&(e=n);return t}(w),T=o(x,g);return e("#"+h).remove(),p.showInput&&(v=e('<input type="text" id="'+h+'" value="" class="'+p.inputClass+'" readonly />').insertBefore(d),p.anchor=v,t.attachShow(v)),p.wheelArray||d.hide().closest(".ui-field-contain").trigger("create"),{width:50,wheels:T,headerText:!1,parseValue:function(){return p.defaultValue||x},onBeforeShow:function(){var e=t.temp;S=e.slice(0),p.wheels=o(e,g,g),m=!0},onSelect:function(e){v&&v.val(e),d.change()},onChange:function(e,t){t.live&&(v&&v.val(e),d.change())},onShow:function(t){e(".dwwl",t).on("mousedown touchstart",function(){clearTimeout(b[e(".dwwl",t).index(this)])})},onDestroy:function(){v&&v.remove(),d.show()},validate:function(e,n,i,u){var a=[],c=t.temp,h=(n||0)+1,d;if(n!==void 0&&S[n]!=c[n]||n===void 0&&!m){p.wheels=o(c,null,n),d=l(c,n),n!==void 0&&(t.temp=d.nVector.slice(0));for(;h<d.lvl;)a.push(h++);if(a.length)return p.readonly=s(g,n),clearTimeout(b[n]),b[n]=setTimeout(function(){m=!0,f(e,d.lvl),S=t.temp.slice(0),t.changeWheel(a,n===void 0?i:0,u),p.readonly=!1},n===void 0?0:i*1e3),!1;r(e,d.lvl,w,t.temp)}else d=l(c,c.length),r(e,d.lvl,w,c),f(e,d.lvl);m=!1}}};e.each(["list","image","treelist"],function(e,n){t.presets[n]=r,t.presetShort(n)})}(jQuery),function(e){var t=e.mobiscroll,n={fromText:"Start",toText:"End"};t.presetShort("rangepicker"),t.presets.rangepicker=function(r){function i(e,t){e.setFullYear(t.getFullYear()),e.setMonth(t.getMonth()),e.setDate(t.getDate())}function s(){p=y,d=b,v=w,g=E,L.startInput&&e(L.startInput).val(d).change(),L.endInput&&e(L.endInput).val(g).change()}var o,u,f,l,c,h,p,d,v,g,y,b,w,E,S,x,T,N=0;c=new Date;var C=e.extend({},r.settings),L=e.extend(r.settings,n,C),A=L.activeClass||"",O=L.defaultValue||[new Date(c.setHours(0,0,0,0)),new Date(c.setHours(23,59,59,999))];return c=e.mobiscroll.presets.calbase.call(this,r),u=e.extend({},c),l=r.format,S="time"===L.controls.join(""),L.startInput&&(x=e(L.startInput).prop("readonly"),r.attachShow(e(L.startInput).prop("readonly",!0),function(){N=0})),L.endInput&&(T=e(L.endInput).prop("readonly"),r.attachShow(e(L.endInput).prop("readonly",!0),function(){N=1})),r._setValue||(r._setValue=r.setValue),r.setValue=function(e,n,i,s){var o=e;e[0]&&e[0].getTime&&(y=e[0],b=t.formatDate(l,y,L),N||(o=u.parseValue(b))),e[1]&&e[1].getTime&&(w=e[1],E=t.formatDate(l,w,L),N&&(o=u.parseValue(E))),s||(p=y,d=b,v=w,g=E),r._setValue.call(this,o,n,i,s)},r.getValue=function(){return[p,v]},r.getDayProps=function(e){var t=new Date(y.getFullYear(),y.getMonth(),y.getDate()),n=new Date(w.getFullYear(),w.getMonth(),w.getDate());return{selected:e>=t&&e<=w,cssClass:!N&&t.getTime()===e.getTime()||N&&n.getTime()===e.getTime()?"dw-cal-day-hl":""}},e.extend(c,{highlight:!1,divergentDayChange:!1,formatResult:function(){return b+(L.endInput?"":" - "+E)},parseValue:function(n){return n=n.split(" - "),L.defaultValue=O[1],v=L.endInput?t.parseDate(l,e(L.endInput).val(),L):t.parseDate(l,n[1],L),L.defaultValue=O[0],p=L.startInput?t.parseDate(l,e(L.startInput).val(),L):t.parseDate(l,n[0],L),L.defaultValue=O[N],d=t.formatDate(l,p,L),g=t.formatDate(l,v,L),u.parseValue(N?g:d,r)},onChange:function(){r.live&&s()},onClose:function(e,t){u.onClose.call(this,e,t),t==="set"&&s(),N=0},onClear:function(){L.startInput&&e(L.startInput).val(""),L.endInput&&e(L.endInput).val("")},onBeforeShow:function(){L.headerText=!1,L.counter&&(L.headerText=function(){return Math.round(((new Date(E)).getTime()-(new Date(b)).getTime())/864e5)+1+" "+L.selectedText}),y=p,b=d,w=v,E=g,h=!0,r.setDate(N?v:p)},onMarkupReady:function(t){var n;f=t,u.onMarkupReady.call(this,t),t.addClass("dw-rangepicker"),n='<div class="dw-dr-t" role="radiogroup"><div class="dw-dr-c dw-dr0"><a href="#" role="radio" class="dwb-e dwb-nhl dw-i dw-dr">'+L.fromText+'<div class="dw-drv dw-drv0">'+d+'</div></a></div><div class="dw-dr-c dw-dr1"><a href="#" role="radio" class="dwb-e dwb-nhl dw-i dw-dr">'+L.toText+'<div class="dw-drv dw-drv1">'+g+"</div></a></div></div>",e(".dw-cal-tabs",t).before(n),o=e(".dw-dr"+N,t).addClass("dw-sel").attr("aria-checked","true"),o.find(".dw-dr").addClass(A),setTimeout(function(){e(".dw-dr-c",t).on("touchstart click",function(t){var n=e(this);if(t.type=="touchstart")n.data("click",!0);else if(n.data("click")){n.data("click",null);return}n.hasClass("dw-sel")||(N=n.index(),o.removeClass("dw-sel").removeAttr("aria-checked").find(".dw-dr",f).removeClass(A),o=n.addClass("dw-sel").attr("aria-checked","true"),o.find(".dw-dr").addClass(A),t=N?w:y,e(".dw-cal-table .dw-sel",f).removeClass("dw-cal-day-hl"),e('.dw-cal-day[data-full="'+t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+'"]',f).addClass("dw-cal-day-hl"),h=!0,r.setDate(t,!1,.2,!0))})},300)},onSetDate:function(){if(!h){var n,s,o,c=0;n=u.formatResult.call(this,r.temp),s=r.getDate(!0),e(".dw-drv"+N,f).text(n),N?(w=s,E=n):(y=s,b=n),S&&(i(y,s),i(w,s)),y>w&&(N?(y=new Date(w.getTime()),y.setHours(0,0,0,0),b=t.formatDate(l,y,L),e(".dw-drv0",f).text(b)):(w=new Date(y.getTime()),w.setHours(23,59,59,999),E=t.formatDate(l,w,L),e(".dw-drv1",f).text(E))),n=new Date(y),s=new Date(w),o=N?s:n,e(".dw-cal-table .dw-sel .dw-i",f).removeClass(A),e(".dw-cal-table .dw-sel",f).removeClass("dw-sel dw-cal-day-hl").removeAttr("aria-selected");for(e('.dw-cal-day[data-full="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]',f).addClass("dw-cal-day-hl");s>=n&&c<84;)e('.dw-cal-day[data-full="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]',f).addClass("dw-sel").attr("aria-selected","true").find(".dw-i ").addClass(A),o.setDate(o.getDate()+(N?-1:1)),c++}h=!1},onDestroy:function(){e(L.startInput).prop("readonly",x),e(L.endInput).prop("readonly",T)}}),c}}(jQuery),function(e){var t={inputClass:"",invalid:[],rtl:!1,group:!1,groupLabel:"Groups"};e.mobiscroll.presetShort("select"),e.mobiscroll.presets.select=function(n){function r(){var t,n=0,r=[],i=[],s=[[]];return u.group?(u.rtl&&(n=1),e("optgroup",f).each(function(t){r.push(e(this).attr("label")),i.push(t)}),s[n]=[{values:r,keys:i,label:u.groupLabel}],t=h,n+=u.rtl?-1:1):t=f,r=[],i=[],e("option",t).each(function(){var t=e(this).attr("value");r.push(e(this).text()),i.push(t),e(this).prop("disabled")&&b.push(t)}),s[n]=[{values:r,keys:i,label:y}],s}function i(e,t){var r=[];if(l){var i=[],s=0;for(s in n._selectedValues)i.push(E[s]),r.push(s);N.val(i.join(", "))}else N.val(e),r=t?n.values[x]:null;t&&(v=!0,f.val(r).change())}function s(e){if(l&&e.hasClass("dw-v")&&e.closest(".dw").find(".dw-ul").index(e.closest(".dw-ul"))==x){var t=e.attr("data-val");return e.hasClass("dw-msel")?(e.removeClass("dw-msel").removeAttr("aria-selected"),delete n._selectedValues[t]):(e.addClass("dw-msel").attr("aria-selected","true"),n._selectedValues[t]=t),n.live&&i(t,!0),!1}}var o=e.extend({},n.settings),u=e.extend(n.settings,t,o),f=e(this),l=f.prop("multiple"),o=this.id+"_dummy",c=l?f.val()?f.val()[0]:e("option",f).attr("value"):f.val(),h=f.find('option[value="'+c+'"]').parent(),p=h.index()+"",d=p,v;e('label[for="'+this.id+'"]').attr("for",o);var g=e('label[for="'+o+'"]'),y=void 0!==u.label?u.label:g.length?g.text():f.attr("name"),b=[],w=[],E={},S,x,T,N,C=u.readonly;u.group&&!e("optgroup",f).length&&(u.group=!1),u.invalid.length||(u.invalid=b),u.group?u.rtl?(S=1,x=0):(S=0,x=1):(S=-1,x=0),e("#"+o).remove(),N=e('<input type="text" id="'+o+'" class="'+u.inputClass+'" readonly />').insertBefore(f),e("option",f).each(function(){E[e(this).attr("value")]=e(this).text()}),n.attachShow(N),o=f.val()||[],g=0;for(g;g<o.length;g++)n._selectedValues[o[g]]=o[g];return i(E[c]),f.off(".dwsel").on("change.dwsel",function(){v||n.setValue(l?f.val()||[]:[f.val()],!0),v=!1}).addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),n._setValue||(n._setValue=n.setValue),n.setValue=function(t,s,o,v,m){var g=e.isArray(t)?t[0]:t;c=g!==void 0?g:e("option",f).attr("value");if(l){n._selectedValues={},g=0;for(g;g<t.length;g++)n._selectedValues[t[g]]=t[g]}u.group?(h=f.find('option[value="'+c+'"]').parent(),d=h.index(),t=u.rtl?[c,h.index()]:[h.index(),c],d!==p&&(u.wheels=r(),n.changeWheel([x]),p=d+"")):t=[c],n._setValue(t,s,o,v,m),s&&(s=l?!0:c!==f.val(),i(E[c],s))},n.getValue=function(e){return(e?n.temp:n.values)[x]},{width:50,wheels:void 0,headerText:!1,multiple:l,anchor:N,formatResult:function(e){return E[e[x]]},parseValue:function(){var t=f.val()||[],r=0;if(l){n._selectedValues={};for(r;r<t.length;r++)n._selectedValues[t[r]]=t[r]}return c=l?f.val()?f.val()[0]:e("option",f).attr("value"):f.val(),h=f.find('option[value="'+c+'"]').parent(),d=h.index(),p=d+"",u.group&&u.rtl?[c,d]:u.group?[d,c]:[c]},validate:function(t,i,s){if(i===void 0&&l){var o=n._selectedValues,v=0;e(".dwwl"+x+" .dw-li",t).removeClass("dw-msel").removeAttr("aria-selected");for(v in o)e(".dwwl"+x+' .dw-li[data-val="'+o[v]+'"]',t).addClass("dw-msel").attr("aria-selected","true")}if(i===S){d=n.temp[S];if(d!==p){h=f.find("optgroup").eq(d),d=h.index(),c=(c=h.find("option").eq(0).val())||f.val(),u.wheels=r();if(u.group)return n.temp=u.rtl?[c,d]:[d,c],u.readonly=[u.rtl,!u.rtl],clearTimeout(T),T=setTimeout(function(){n.changeWheel([x],void 0,!0),u.readonly=C,p=d+""},s*1e3),!1}else u.readonly=C}else c=n.temp[x];var m=e(".dw-ul",t).eq(x);e.each(u.invalid,function(t,n){e('.dw-li[data-val="'+n+'"]',m).removeClass("dw-v")})},onBeforeShow:function(){l&&u.counter&&(u.headerText=function(){var t=0;return e.each(n._selectedValues,function(){t++}),t+" "+u.selectedText}),u.wheels=r(),u.group&&(n.temp=u.rtl?[c,h.index()]:[h.index(),c])},onClear:function(t){n._selectedValues={},N.val(""),e(".dwwl"+x+" .dw-li",t).removeClass("dw-msel").removeAttr("aria-selected")},onMarkupReady:function(t){t.addClass("dw-select"),e(".dwwl"+S,t).on("mousedown touchstart",function(){clearTimeout(T)}),l&&(t.addClass("dwms"),e(".dwwl",t).eq(x).addClass("dwwms").attr("aria-multiselectable","true"),e(".dwwl",t).on("keydown",function(t){t.keyCode==32&&(t.preventDefault(),t.stopPropagation(),s(e(".dw-sel",this)))}),w=e.extend({},n._selectedValues))},onValueTap:s,onSelect:function(e){i(e,!0),u.group&&(n.values=null)},onCancel:function(){u.group&&(n.values=null),!n.live&&l&&(n._selectedValues=e.extend({},w))},onChange:function(e){n.live&&!l&&(N.val(e),v=!0,f.val(n.temp[x]).change())},onDestroy:function(){N.remove(),f.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery)}.apply(e,arguments)})}(this),!function(e,t){if("object"==typeof exports){var n=require("jquery");module.exports=t(n)}else"function"==typeof define&&define.amd&&define("i18next",["jquery"],t)}(this,function(e){function t(e,t){if(!t||"function"==typeof t)return e;for(var n in t)e[n]=t[n];return e}function n(e,t){for(var r in t)r in e?n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,n){var r,i=0,s=e.length,o=void 0===s||"[object Array]"!==Object.prototype.toString.apply(e)||"function"==typeof e;if(n)if(o){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;s>i&&t.apply(e[i++],n)!==!1;);else if(o){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;s>i&&t.call(e[i],i,e[i++])!==!1;);return e}function i(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return q[e]}):e}function s(e){var t=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},n=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},r=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t},i=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=r(e);var n,i,s,o,u,a,f,l="",c=0;do n=e.charCodeAt(c++),i=e.charCodeAt(c++),s=e.charCodeAt(c++),o=n>>2,u=(3&n)<<4|i>>4,a=(15&i)<<2|s>>6,f=63&s,isNaN(i)?a=f=64:isNaN(s)&&(f=64),l+=t.charAt(o)+t.charAt(u)+t.charAt(a)+t.charAt(f),n=i=s="",o=u=a=f="";while(c<e.length);return l},s=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},o=function(e,r,i,u){"function"==typeof i&&(u=i,i={}),i.cache=i.cache||!1,i.data=i.data||{},i.headers=i.headers||{},i.jsonp=i.jsonp||!1,i.async=void 0===i.async?!0:i.async;var a,f=s({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},o.headers,i.headers);if(a="application/json"===f["content-type"]?JSON.stringify(i.data):n(i.data),"GET"===e){var l=[];if(a&&(l.push(a),a=null),i.cache||l.push("_="+(new Date).getTime()),i.jsonp&&(l.push("callback="+i.jsonp),l.push("jsonp="+i.jsonp)),l=l.join("&"),l.length>1&&(r+=r.indexOf("?")>-1?"&"+l:"?"+l),i.jsonp){var c=document.getElementsByTagName("head")[0],h=document.createElement("script");return h.type="text/javascript",h.src=r,c.appendChild(h),void 0}}t(function(t,n){if(t)return u(t);n.open(e,r,i.async);for(var s in f)f.hasOwnProperty(s)&&n.setRequestHeader(s,f[s]);n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText||"";if(!u)return;u(n.status,{text:function(){return e},json:function(){try{return JSON.parse(e)}catch(t){return z.error("Can not parse JSON. URL: "+r),{}}}})}},n.send(a)})},u={authBasic:function(e,t){o.headers.Authorization="Basic "+i(e+":"+t)},connect:function(e,t,n){return o("CONNECT",e,t,n)},del:function(e,t,n){return o("DELETE",e,t,n)},get:function(e,t,n){return o("GET",e,t,n)},head:function(e,t,n){return o("HEAD",e,t,n)},headers:function(e){o.headers=e||{}},isAllowed:function(e,t,n){this.options(e,function(e,r){n(-1!==r.text().indexOf(t))})},options:function(e,t,n){return o("OPTIONS",e,t,n)},patch:function(e,t,n){return o("PATCH",e,t,n)},post:function(e,t,n){return o("POST",e,t,n)},put:function(e,t,n){return o("PUT",e,t,n)},trace:function(e,t,n){return o("TRACE",e,t,n)}},a=e.type?e.type.toLowerCase():"get";u[a](e.url,e,function(t,n){200===t||0===t&&n.text()?e.success(n.json(),t,null):e.error(n.text(),t,null)})}function o(t,n){"function"==typeof t&&(n=t,t={}),t=t||{},z.extend(I,t),delete I.fixLng,I.functions&&(delete I.functions,z.extend(z,t.functions)),"string"==typeof I.ns&&(I.ns={namespaces:[I.ns],defaultNs:I.ns}),"string"==typeof I.fallbackNS&&(I.fallbackNS=[I.fallbackNS]),("string"==typeof I.fallbackLng||"boolean"==typeof I.fallbackLng)&&(I.fallbackLng=[I.fallbackLng]),I.interpolationPrefixEscaped=z.regexEscape(I.interpolationPrefix),I.interpolationSuffixEscaped=z.regexEscape(I.interpolationSuffix),I.lng||(I.lng=z.detectLanguage()),B=z.toLanguages(I.lng),_=B[0],z.log("currentLng set to: "+_),I.useCookie&&z.cookie.read(I.cookieName)!==_&&z.cookie.create(I.cookieName,_,I.cookieExpirationTime,I.cookieDomain),I.detectLngFromLocalStorage&&"undefined"!=typeof document&&window.localStorage&&z.localStorage.setItem("i18next_lng",_);var r=C;t.fixLng&&(r=function(e,t){return t=t||{},t.lng=t.lng||r.lng,C(e,t)},r.lng=_),V.setCurrentLng(_),e&&I.setJqueryExt&&b();var i;if(e&&e.Deferred&&(i=e.Deferred()),!I.resStore){var s=z.toLanguages(I.lng);"string"==typeof I.preload&&(I.preload=[I.preload]);for(var o=0,u=I.preload.length;u>o;o++)for(var a=z.toLanguages(I.preload[o]),f=0,l=a.length;l>f;f++)s.indexOf(a[f])<0&&s.push(a[f]);return D.sync.load(s,I,function(e,t){P=t,j=!0,n&&n(r),i&&i.resolve(r)}),i?i.promise():void 0}return P=I.resStore,j=!0,n&&n(r),i&&i.resolve(r),i?i.promise():void 0}function u(e,t){"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;r>n;n++)I.preload.indexOf(e[n])<0&&I.preload.push(e[n]);return o(t)}function a(e,t,n,r){"string"!=typeof t?(n=t,t=I.ns.defaultNs):I.ns.namespaces.indexOf(t)<0&&I.ns.namespaces.push(t),P[e]=P[e]||{},P[e][t]=P[e][t]||{},r?z.deepExtend(P[e][t],n):z.extend(P[e][t],n)}function f(e,t){"string"!=typeof t&&(t=I.ns.defaultNs),P[e]=P[e]||{};var n=P[e][t]||{},r=!1;for(var i in n)n.hasOwnProperty(i)&&(r=!0);return r}function l(e,t){"string"!=typeof t&&(t=I.ns.defaultNs),P[e]=P[e]||{},P[e][t]={}}function c(e,t,n,r){"string"!=typeof t?(resource=t,t=I.ns.defaultNs):I.ns.namespaces.indexOf(t)<0&&I.ns.namespaces.push(t),P[e]=P[e]||{},P[e][t]=P[e][t]||{};for(var i=n.split(I.keyseparator),s=0,o=P[e][t];i[s];)s==i.length-1?o[i[s]]=r:(null==o[i[s]]&&(o[i[s]]={}),o=o[i[s]]),s++}function h(e,t,n){"string"!=typeof t?(resource=t,t=I.ns.defaultNs):I.ns.namespaces.indexOf(t)<0&&I.ns.namespaces.push(t);for(var r in n)"string"==typeof n[r]&&c(e,t,r,n[r])}function p(e){I.ns.defaultNs=e}function d(e,t){v([e],t)}function v(e,t){var n={dynamicLoad:I.dynamicLoad,resGetPath:I.resGetPath,getAsync:I.getAsync,customLoad:I.customLoad,ns:{namespaces:e,defaultNs:""}},r=z.toLanguages(I.lng);"string"==typeof I.preload&&(I.preload=[I.preload]);for(var i=0,s=I.preload.length;s>i;i++)for(var o=z.toLanguages(I.preload[i]),u=0,a=o.length;a>u;u++)r.indexOf(o[u])<0&&r.push(o[u]);for(var f=[],l=0,c=r.length;c>l;l++){var h=!1,p=P[r[l]];if(p)for(var d=0,v=e.length;v>d;d++)p[e[d]]||(h=!0);else h=!0;h&&f.push(r[l])}f.length?D.sync._fetch(f,n,function(n,r){var i=e.length*f.length;z.each(e,function(e,n){I.ns.namespaces.indexOf(n)<0&&I.ns.namespaces.push(n),z.each(f,function(e,s){P[s]=P[s]||{},P[s][n]=r[s][n],i--,0===i&&t&&(I.useLocalStorage&&D.sync._storeLocal(P),t())})})}):t&&t()}function m(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),t.lng=e,o(t,n)}function g(){return _}function y(e){P={},m(_,e)}function b(){function t(t,n,r){if(0!==n.length){var i="text";if(0===n.indexOf("[")){var s=n.split("]");n=s[1],i=s[0].substr(1,s[0].length-1)}n.indexOf(";")===n.length-1&&(n=n.substr(0,n.length-2));var o;if("html"===i)o=I.defaultValueFromContent?e.extend({defaultValue:t.html()},r):r,t.html(e.t(n,o));else if("text"===i)o=I.defaultValueFromContent?e.extend({defaultValue:t.text()},r):r,t.text(e.t(n,o));else if("prepend"===i)o=I.defaultValueFromContent?e.extend({defaultValue:t.html()},r):r,t.prepend(e.t(n,o));else if("append"===i)o=I.defaultValueFromContent?e.extend({defaultValue:t.html()},r):r,t.append(e.t(n,o));else if(0===i.indexOf("data-")){var u=i.substr("data-".length);o=I.defaultValueFromContent?e.extend({defaultValue:t.data(u)},r):r;var a=e.t(n,o);t.data(u,a),t.attr(i,a)}else o=I.defaultValueFromContent?e.extend({defaultValue:t.attr(i)},r):r,t.attr(i,e.t(n,o))}}function n(n,r){var i=n.attr(I.selectorAttr);if(i||"undefined"==typeof i||i===!1||(i=n.text()||n.val()),i){var s=n,o=n.data("i18n-target");if(o&&(s=n.find(o)||n),r||I.useDataAttrOptions!==!0||(r=n.data("i18n-options")),r=r||{},i.indexOf(";")>=0){var u=i.split(";");e.each(u,function(e,n){""!==n&&t(s,n,r)})}else t(s,i,r);I.useDataAttrOptions===!0&&n.data("i18n-options",r)}}e.t=e.t||C,e.fn.i18n=function(t){return this.each(function(){n(e(this),t);var r=e(this).find("["+I.selectorAttr+"]");r.each(function(){n(e(this),t)})})}}function w(e,t,n,r){if(!e)return e;if(r=r||t,e.indexOf(r.interpolationPrefix||I.interpolationPrefix)<0)return e;var i=r.interpolationPrefix?z.regexEscape(r.interpolationPrefix):I.interpolationPrefixEscaped,s=r.interpolationSuffix?z.regexEscape(r.interpolationSuffix):I.interpolationSuffixEscaped,o="HTML"+s,u=t.replace&&"object"==typeof t.replace?t.replace:t;return z.each(u,function(t,u){var a=n?n+I.keyseparator+t:t;"object"==typeof u&&null!==u?e=w(e,u,a,r):r.escapeInterpolation||I.escapeInterpolation?(e=e.replace(new RegExp([i,a,o].join(""),"g"),z.regexReplacementEscape(u)),e=e.replace(new RegExp([i,a,s].join(""),"g"),z.regexReplacementEscape(z.escape(u)))):e=e.replace(new RegExp([i,a,s].join(""),"g"),z.regexReplacementEscape(u))}),e}function E(e,t){var n=",",r="{",i="}",s=z.extend({},t);for(delete s.postProcess;-1!=e.indexOf(I.reusePrefix)&&(H++,!(H>I.maxRecursion));){var o=e.lastIndexOf(I.reusePrefix),u=e.indexOf(I.reuseSuffix,o)+I.reuseSuffix.length,a=e.substring(o,u),f=a.replace(I.reusePrefix,"").replace(I.reuseSuffix,"");if(o>=u)return z.error("there is an missing closing in following translation value",e),"";if(-1!=f.indexOf(n)){var l=f.indexOf(n);if(-1!=f.indexOf(r,l)&&-1!=f.indexOf(i,l)){var c=f.indexOf(r,l),h=f.indexOf(i,c)+i.length;try{s=z.extend(s,JSON.parse(f.substring(c,h))),f=f.substring(0,l)}catch(p){}}}var d=A(f,s);e=e.replace(a,z.regexReplacementEscape(d))}return e}function S(e){return e.context&&("string"==typeof e.context||"number"==typeof e.context)}function x(e){return void 0!==e.count&&"string"!=typeof e.count}function T(e){return void 0!==e.indefinite_article&&"string"!=typeof e.indefinite_article&&e.indefinite_article}function N(e,t){t=t||{};var n=k(e,t),r=O(e,t);return void 0!==r||r===n}function C(e,t){return t=t||{},j?(H=0,A.apply(null,arguments)):(z.log("i18next not finished initialization. you might have called t function before loading resources finished."),t.defaultValue||"")}function k(e,t){return void 0!==t.defaultValue?t.defaultValue:e}function L(){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);return{postProcess:"sprintf",sprintf:e}}function A(e,t){if(t&&"object"!=typeof t?"sprintf"===I.shortcutFunction?t=L.apply(null,arguments):"defaultValue"===I.shortcutFunction&&(t={defaultValue:t}):t=t||{},"object"==typeof I.defaultVariables&&(t=z.extend({},I.defaultVariables,t)),void 0===e||null===e||""===e)return"";"string"==typeof e&&(e=[e]);var n=e[0];if(e.length>1)for(var r=0;r<e.length&&(n=e[r],!N(n,t));r++);var i,s=k(n,t),o=O(n,t),u=t.lng?z.toLanguages(t.lng,t.fallbackLng):B,a=t.ns||I.ns.defaultNs;n.indexOf(I.nsseparator)>-1&&(i=n.split(I.nsseparator),a=i[0],n=i[1]),void 0===o&&I.sendMissing&&"function"==typeof I.missingKeyHandler&&(t.lng?I.missingKeyHandler(u[0],a,n,s,u):I.missingKeyHandler(I.lng,a,n,s,u));var f=t.postProcess||I.postProcess;void 0!==o&&f&&$[f]&&(o=$[f](o,n,t));var l=s;if(s.indexOf(I.nsseparator)>-1&&(i=s.split(I.nsseparator),l=i[1]),l===n&&I.parseMissingKey&&(s=I.parseMissingKey(s)),void 0===o&&(s=w(s,t),s=E(s,t),f&&$[f])){var c=k(n,t);o=$[f](c,n,t)}return void 0!==o?o:s}function O(e,t){t=t||{};var n,r,i=k(e,t),s=B;if(!P)return i;if("cimode"===s[0].toLowerCase())return i;if(t.lngs&&(s=t.lngs),t.lng&&(s=z.toLanguages(t.lng,t.fallbackLng),!P[s[0]])){var o=I.getAsync;I.getAsync=!1,D.sync.load(s,I,function(e,t){z.extend(P,t),I.getAsync=o})}var u=t.ns||I.ns.defaultNs;if(e.indexOf(I.nsseparator)>-1){var a=e.split(I.nsseparator);u=a[0],e=a[1]}if(S(t)){n=z.extend({},t),delete n.context,n.defaultValue=I.contextNotFound;var f=u+I.nsseparator+e+"_"+t.context;if(r=C(f,n),r!=I.contextNotFound)return w(r,{context:t.context})}if(x(t,s[0])){n=z.extend({lngs:[s[0]]},t),delete n.count,delete n.lng,n.defaultValue=I.pluralNotFound;var l;if(V.needsPlural(s[0],t.count)){l=u+I.nsseparator+e+I.pluralSuffix;var c=V.get(s[0],t.count);c>=0?l=l+"_"+c:1===c&&(l=u+I.nsseparator+e)}else l=u+I.nsseparator+e;if(r=C(l,n),r!=I.pluralNotFound)return w(r,{count:t.count,interpolationPrefix:t.interpolationPrefix,interpolationSuffix:t.interpolationSuffix});if(!(s.length>1))return r;var h=s.slice();if(h.shift(),t=z.extend(t,{lngs:h}),delete t.lng,r=C(u+I.nsseparator+e,t),r!=I.pluralNotFound)return r}if(T(t)){var p=z.extend({},t);delete p.indefinite_article,p.defaultValue=I.indefiniteNotFound;var d=u+I.nsseparator+e+(t.count&&!x(t,s[0])||!t.count?I.indefiniteSuffix:"");if(r=C(d,p),r!=I.indefiniteNotFound)return r}for(var v,m=e.split(I.keyseparator),g=0,y=s.length;y>g&&void 0===v;g++){for(var b=s[g],N=0,L=P[b]&&P[b][u];m[N];)L=L&&L[m[N]],N++;if(void 0!==L){var M=Object.prototype.toString.apply(L);if("string"==typeof L)L=w(L,t),L=E(L,t);else if("[object Array]"!==M||I.returnObjectTrees||t.returnObjectTrees){if(null===L&&I.fallbackOnNull===!0)L=void 0;else if(null!==L)if(I.returnObjectTrees||t.returnObjectTrees){if("[object Number]"!==M&&"[object Function]"!==M&&"[object RegExp]"!==M){var _="[object Array]"===M?[]:{};z.each(L,function(n){_[n]=A(u+I.nsseparator+e+I.keyseparator+n,t)}),L=_}}else I.objectTreeKeyHandler&&"function"==typeof I.objectTreeKeyHandler?L=I.objectTreeKeyHandler(e,L,b,u,t):(L="key '"+u+":"+e+" ("+b+")' "+"returned an object instead of string.",z.log(L))}else L=L.join("\n"),L=w(L,t),L=E(L,t);"string"==typeof L&&""===L.trim()&&I.fallbackOnEmpty===!0&&(L=void 0),v=L}}if(void 0===v&&!t.isFallbackLookup&&(I.fallbackToDefaultNS===!0||I.fallbackNS&&I.fallbackNS.length>0)){if(t.isFallbackLookup=!0,I.fallbackNS.length){for(var H=0,j=I.fallbackNS.length;j>H;H++)if(v=O(I.fallbackNS[H]+I.nsseparator+e,t),v||""===v&&I.fallbackOnEmpty===!1){var F=v.indexOf(I.nsseparator)>-1?v.split(I.nsseparator)[1]:v,q=i.indexOf(I.nsseparator)>-1?i.split(I.nsseparator)[1]:i;if(F!==q)break}}else v=O(e,t);t.isFallbackLookup=!1}return v}function M(){var e,t=I.lngWhitelist||[],n=[];if("undefined"!=typeof window&&!function(){for(var e=window.location.search.substring(1),t=e.split("&"),r=0;r<t.length;r++){var i=t[r].indexOf("=");if(i>0){var s=t[r].substring(0,i);s==I.detectLngQS&&n.push(t[r].substring(i+1))}}}(),I.useCookie&&"undefined"!=typeof document){var r=z.cookie.read(I.cookieName);r&&n.push(r)}if(I.detectLngFromLocalStorage&&"undefined"!=typeof window&&window.localStorage&&n.push(window.localStorage.getItem("i18next_lng")),"undefined"!=typeof navigator){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return function(){for(var r=0;r<n.length;r++){var i=n[r];if(i.indexOf("-")>-1){var s=i.split("-");i=I.lowerCaseLng?s[0].toLowerCase()+"-"+s[1].toLowerCase():s[0].toLowerCase()+"-"+s[1].toUpperCase()}if(0===t.length||t.indexOf(i)>-1){e=i;break}}}(),e||(e=I.fallbackLng[0]),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var _,D={},P={},H=0,B=[],j=!1,F={};F={load:function(e,t,n){t.useLocalStorage?F._loadLocal(e,t,function(r,i){for(var s=[],o=0,u=e.length;u>o;o++)i[e[o]]||s.push(e[o]);s.length>0?F._fetch(s,t,function(e,t){z.extend(i,t),F._storeLocal(t),n(null,i)}):n(null,i)}):F._fetch(e,t,function(e,t){n(null,t)})},_loadLocal:function(e,t,n){var r={},i=(new Date).getTime();if(window.localStorage){var s=e.length;z.each(e,function(e,o){var u=window.localStorage.getItem("res_"+o);u&&(u=JSON.parse(u),u.i18nStamp&&u.i18nStamp+t.localStorageExpirationTime>i&&(r[o]=u)),s--,0===s&&n(null,r)})}},_storeLocal:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),z.localStorage.setItem("res_"+t,JSON.stringify(e[t]))},_fetch:function(e,t,n){var r=t.ns,i={};if(t.dynamicLoad){var s=function(e,t){n(null,t)};if("function"==typeof t.customLoad)t.customLoad(e,r.namespaces,t,s);else{var o=w(t.resGetPath,{lng:e.join("+"),ns:r.namespaces.join("+")});z.ajax({url:o,success:function(e){z.log("loaded: "+o),s(null,e)},error:function(e,t,n){z.log("failed loading: "+o),s("failed loading resource.json error: "+n)},dataType:"json",async:t.getAsync})}}else{var u,a=r.namespaces.length*e.length;z.each(r.namespaces,function(r,s){z.each(e,function(e,r){var o=function(e,t){e&&(u=u||[],u.push(e)),i[r]=i[r]||{},i[r][s]=t,a--,0===a&&n(u,i)};"function"==typeof t.customLoad?t.customLoad(r,s,t,o):F._fetchOne(r,s,t,o)})})}},_fetchOne:function(e,t,n,r){var i=w(n.resGetPath,{lng:e,ns:t});z.ajax({url:i,success:function(e){z.log("loaded: "+i),r(null,e)},error:function(e,t,n){if(t&&200==t||e&&e.status&&200==e.status)z.error("There is a typo in: "+i);else if(t&&404==t||e&&e.status&&404==e.status)z.log("Does not exist: "+i);else{var s=t?t:e&&e.status?e.status:null;z.log(s+" when loading "+i)}r(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(e,t,n,r,i){var s={};s[n]=r;var o=[];if("fallback"===I.sendMissingTo&&I.fallbackLng[0]!==!1)for(var u=0;u<I.fallbackLng.length;u++)o.push({lng:I.fallbackLng[u],url:w(I.resPostPath,{lng:I.fallbackLng[u],ns:t})});else if("current"===I.sendMissingTo||"fallback"===I.sendMissingTo&&I.fallbackLng[0]===!1)o.push({lng:e,url:w(I.resPostPath,{lng:e,ns:t})});else if("all"===I.sendMissingTo)for(var u=0,a=i.length;a>u;u++)o.push({lng:i[u],url:w(I.resPostPath,{lng:i[u],ns:t})});for(var f=0,l=o.length;l>f;f++){var c=o[f];z.ajax({url:c.url,type:I.sendType,data:s,success:function(){z.log("posted missing key '"+n+"' to: "+c.url);for(var e=n.split("."),i=0,s=P[c.lng][t];e[i];)s=s[e[i]]=i===e.length-1?r:s[e[i]]||{},i++},error:function(){z.log("failed posting missing key '"+n+"' to: "+c.url)},dataType:"json",async:I.postAsync})}},reload:y};var I={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",defaultVariables:!1,reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,missingKeyHandler:F.postMissing,shortcutFunction:"sprintf"},q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},R={create:function(e,t,n,r){var i;if(n){var s=new Date;s.setTime(s.getTime()+6e4*n),i="; expires="+s.toGMTString()}else i="";r=r?"domain="+r+";":"",document.cookie=e+"="+t+i+";"+r+"path=/"},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},U={create:function(){},read:function(){return null},remove:function(){}},z={extend:e?e.extend:t,deepExtend:n,each:e?e.each:r,ajax:e?e.ajax:"undefined"!=typeof document?s:function(){},cookie:"undefined"!=typeof document?R:U,detectLanguage:M,escape:i,log:function(e){I.debug&&"undefined"!=typeof console&&console.log(e)},error:function(e){"undefined"!=typeof console&&console.error(e)},getCountyIndexOfLng:function(e){var t=0;return("nb-NO"===e||"nn-NO"===e||"nb-no"===e||"nn-no"===e)&&(t=1),t},toLanguages:function(e){function t(e){var t=e;if("string"==typeof e&&e.indexOf("-")>-1){var n=e.split("-");t=I.lowerCaseLng?n[0].toLowerCase()+"-"+n[1].toLowerCase():n[0].toLowerCase()+"-"+n[1].toUpperCase()}else t=I.lowerCaseLng?e.toLowerCase():e;return t}var n=this.log,r=[],i=I.lngWhitelist||!1,s=function(e){!i||i.indexOf(e)>-1?r.push(e):n("rejecting non-whitelisted language: "+e)};if("string"==typeof e&&e.indexOf("-")>-1){var o=e.split("-");"unspecific"!==I.load&&s(t(e)),"current"!==I.load&&s(t(o[this.getCountyIndexOfLng(e)]))}else s(t(e));for(var u=0;u<I.fallbackLng.length;u++)-1===r.indexOf(I.fallbackLng[u])&&I.fallbackLng[u]&&r.push(t(I.fallbackLng[u]));return r},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(e){return"string"==typeof e?e.replace(/\$/g,"$$$$"):e},localStorage:{setItem:function(e,t){if(window.localStorage)try{window.localStorage.setItem(e,t)}catch(n){z.log('failed to set value for key "'+e+'" to localStorage.')}}}};z.applyReplacement=w;var W=[["ach","Acholi",[1,2],1],["af","Afrikaans",[1,2],2],["ak","Akan",[1,2],1],["am","Amharic",[1,2],1],["an","Aragonese",[1,2],2],["ar","Arabic",[0,1,2,3,11,100],5],["arn","Mapudungun",[1,2],1],["ast","Asturian",[1,2],2],["ay","Aymará",[1],3],["az","Azerbaijani",[1,2],2],["be","Belarusian",[1,2,5],4],["bg","Bulgarian",[1,2],2],["bn","Bengali",[1,2],2],["bo","Tibetan",[1],3],["br","Breton",[1,2],1],["bs","Bosnian",[1,2,5],4],["ca","Catalan",[1,2],2],["cgg","Chiga",[1],3],["cs","Czech",[1,2,5],6],["csb","Kashubian",[1,2,5],7],["cy","Welsh",[1,2,3,8],8],["da","Danish",[1,2],2],["de","German",[1,2],2],["dev","Development Fallback",[1,2],2],["dz","Dzongkha",[1],3],["el","Greek",[1,2],2],["en","English",[1,2],2],["eo","Esperanto",[1,2],2],["es","Spanish",[1,2],2],["es_ar","Argentinean Spanish",[1,2],2],["et","Estonian",[1,2],2],["eu","Basque",[1,2],2],["fa","Persian",[1],3],["fi","Finnish",[1,2],2],["fil","Filipino",[1,2],1],["fo","Faroese",[1,2],2],["fr","French",[1,2],9],["fur","Friulian",[1,2],2],["fy","Frisian",[1,2],2],["ga","Irish",[1,2,3,7,11],10],["gd","Scottish Gaelic",[1,2,3,20],11],["gl","Galician",[1,2],2],["gu","Gujarati",[1,2],2],["gun","Gun",[1,2],1],["ha","Hausa",[1,2],2],["he","Hebrew",[1,2],2],["hi","Hindi",[1,2],2],["hr","Croatian",[1,2,5],4],["hu","Hungarian",[1,2],2],["hy","Armenian",[1,2],2],["ia","Interlingua",[1,2],2],["id","Indonesian",[1],3],["is","Icelandic",[1,2],12],["it","Italian",[1,2],2],["ja","Japanese",[1],3],["jbo","Lojban",[1],3],["jv","Javanese",[0,1],13],["ka","Georgian",[1],3],["kk","Kazakh",[1],3],["km","Khmer",[1],3],["kn","Kannada",[1,2],2],["ko","Korean",[1],3],["ku","Kurdish",[1,2],2],["kw","Cornish",[1,2,3,4],14],["ky","Kyrgyz",[1],3],["lb","Letzeburgesch",[1,2],2],["ln","Lingala",[1,2],1],["lo","Lao",[1],3],["lt","Lithuanian",[1,2,10],15],["lv","Latvian",[1,2,0],16],["mai","Maithili",[1,2],2],["mfe","Mauritian Creole",[1,2],1],["mg","Malagasy",[1,2],1],["mi","Maori",[1,2],1],["mk","Macedonian",[1,2],17],["ml","Malayalam",[1,2],2],["mn","Mongolian",[1,2],2],["mnk","Mandinka",[0,1,2],18],["mr","Marathi",[1,2],2],["ms","Malay",[1],3],["mt","Maltese",[1,2,11,20],19],["nah","Nahuatl",[1,2],2],["nap","Neapolitan",[1,2],2],["nb","Norwegian Bokmal",[1,2],2],["ne","Nepali",[1,2],2],["nl","Dutch",[1,2],2],["nn","Norwegian Nynorsk",[1,2],2],["no","Norwegian",[1,2],2],["nso","Northern Sotho",[1,2],2],["oc","Occitan",[1,2],1],["or","Oriya",[2,1],2],["pa","Punjabi",[1,2],2],["pap","Papiamento",[1,2],2],["pl","Polish",[1,2,5],7],["pms","Piemontese",[1,2],2],["ps","Pashto",[1,2],2],["pt","Portuguese",[1,2],2],["pt_br","Brazilian Portuguese",[1,2],2],["rm","Romansh",[1,2],2],["ro","Romanian",[1,2,20],20],["ru","Russian",[1,2,5],4],["sah","Yakut",[1],3],["sco","Scots",[1,2],2],["se","Northern Sami",[1,2],2],["si","Sinhala",[1,2],2],["sk","Slovak",[1,2,5],6],["sl","Slovenian",[5,1,2,3],21],["so","Somali",[1,2],2],["son","Songhay",[1,2],2],["sq","Albanian",[1,2],2],["sr","Serbian",[1,2,5],4],["su","Sundanese",[1],3],["sv","Swedish",[1,2],2],["sw","Swahili",[1,2],2],["ta","Tamil",[1,2],2],["te","Telugu",[1,2],2],["tg","Tajik",[1,2],1],["th","Thai",[1],3],["ti","Tigrinya",[1,2],1],["tk","Turkmen",[1,2],2],["tr","Turkish",[1,2],1],["tt","Tatar",[1],3],["ug","Uyghur",[1],3],["uk","Ukrainian",[1,2,5],4],["ur","Urdu",[1,2],2],["uz","Uzbek",[1,2],1],["vi","Vietnamese",[1],3],["wa","Walloon",[1,2],1],["wo","Wolof",[1],3],["yo","Yoruba",[1,2],2],["zh","Chinese",[1],3]],X={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(){return 0},4:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)},12:function(e){return Number(1!=e%10||11==e%100)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)},16:function(e){return Number(1==e%10&&11!=e%100?0:0!==e?1:2)},17:function(e){return Number(1==e||1==e%10?0:1)},18:function(e){return Number(1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)},21:function(e){return Number(1==e%100?1:2==e%100?2:3==e%100||4==e%100?3:0)}},V={rules:function(){var e,t={};for(e=W.length;e--;)t[W[e][0]]={name:W[e][1],numbers:W[e][2],plurals:X[W[e][3]]};return t}(),addRule:function(e,t){V.rules[e]=t},setCurrentLng:function(e){if(!V.currentRule||V.currentRule.lng!==e){var t=e.split("-");V.currentRule={lng:e,rule:V.rules[t[0]]}}},needsPlural:function(e,t){var n,r=e.split("-");return n=V.currentRule&&V.currentRule.lng===e?V.currentRule.rule:V.rules[r[z.getCountyIndexOfLng(e)]],n&&n.numbers.length<=1?!1:1!==this.get(e,t)},get:function(e,t){function n(t,n){var r;if(r=V.currentRule&&V.currentRule.lng===e?V.currentRule.rule:V.rules[t]){var i;i=r.noAbs?r.plurals(n):r.plurals(Math.abs(n));var s=r.numbers[i];return 2===r.numbers.length&&1===r.numbers[0]&&(2===s?s=-1:1===s&&(s=1)),s}return 1===n?"1":"-1"}var r=e.split("-");return n(r[z.getCountyIndexOfLng(e)],t)}},$={},J=function(e,t){$[e]=t},K=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i,s,o,u,a,f,l,c=1,h=n.length,p="",d=[];for(s=0;h>s;s++)if(p=e(n[s]),"string"===p)d.push(n[s]);else if("array"===p){if(u=n[s],u[2])for(i=r[c],o=0;o<u[2].length;o++){if(!i.hasOwnProperty(u[2][o]))throw K('[sprintf] property "%s" does not exist',u[2][o]);i=i[u[2][o]]}else i=u[1]?r[u[1]]:r[c++];if(/[^s]/.test(u[8])&&"number"!=e(i))throw K("[sprintf] expecting number but found %s",e(i));switch(u[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=u[7]?i.toExponential(u[7]):i.toExponential();break;case"f":i=u[7]?parseFloat(i).toFixed(u[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&u[7]?i.substring(0,u[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(u[8])&&u[3]&&i>=0?"+"+i:i,f=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",l=u[6]-String(i).length,a=u[6]?t(f,l):"",d.push(u[5]?i+a:a+i)}return d.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],u=[];if(null===(u=/^([a-z_][a-z_\d]*)/i.exec(o)))throw"[sprintf] huh?";for(s.push(u[1]);""!==(o=o.substring(u[0].length));)if(null!==(u=/^\.([a-z_][a-z_\d]*)/i.exec(o)))s.push(u[1]);else{if(null===(u=/^\[(\d+)\]/.exec(o)))throw"[sprintf] huh?";s.push(u[1])}n[2]=s}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r},n}(),Q=function(e,t){return t.unshift(e),K.apply(null,t)};return J("sprintf",function(e,t,n){return n.sprintf?"[object Array]"===Object.prototype.toString.apply(n.sprintf)?Q(e,n.sprintf):"object"==typeof n.sprintf?K(e,n.sprintf):e:e}),D.init=o,D.setLng=m,D.preload=u,D.addResourceBundle=a,D.hasResourceBundle=f,D.addResource=c,D.addResources=h,D.removeResourceBundle=l,D.loadNamespace=d,D.loadNamespaces=v,D.setDefaultNamespace=p,D.t=C,D.translate=C,D.exists=N,D.detectLanguage=z.detectLanguage,D.pluralExtensions=V,D.sync=F,D.functions=z,D.lng=g,D.addPostProcessor=J,D.options=I,e.i18n=D,e.t=D.t,D}),function(e,t,n){typeof define=="function"&&define.amd?define("jquery-mobile",["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)}(this,document,function(e,t,n,r){(function(e,t,n,r){function i(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function s(t,n){var s=t.type,o,u,a,f,l,c,h,p,d;t=e.Event(t),t.type=n,o=t.originalEvent,u=e.event.props,s.search(/^(mouse|click)/)>-1&&(u=L);if(o)for(h=u.length,f;h;)f=u[--h],t[f]=o[f];s.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(s.search(/^touch/)!==-1){a=i(o),s=a.touches,l=a.changedTouches,c=s&&s.length?s[0]:l&&l.length?l[0]:r;if(c)for(p=0,d=C.length;p<d;p++)f=C[p],t[f]=c[f]}return t}function o(t){var n={},r,i;while(t){r=e.data(t,x);for(i in r)r[i]&&(n[i]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function u(t,n){var r;while(t){r=e.data(t,x);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function a(){B=!1}function f(){B=!0}function l(){q=0,P.length=0,H=!1,f()}function c(){a()}function h(){p(),O=setTimeout(function(){O=0,l()},e.vmouse.resetTimerDuration)}function p(){O&&(clearTimeout(O),O=0)}function d(t,n,r){var i;if(r&&r[t]||!r&&u(n.target,t))i=s(n,t),e(n.target).trigger(i);return i}function v(t){var n=e.data(t.target,T);if(!H&&(!q||q!==n)){var r=d("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function m(t){var n=i(t).touches,r,s;if(n&&n.length===1){r=t.target,s=o(r);if(s.hasVirtualBinding){q=I++,e.data(r,T,q),p(),c(),D=!1;var u=i(t).touches[0];M=u.pageX,_=u.pageY,d("vmouseover",t,s),d("vmousedown",t,s)}}}function g(e){if(B)return;D||d("vmousecancel",e,o(e.target)),D=!0,h()}function y(t){if(B)return;var n=i(t).touches[0],r=D,s=e.vmouse.moveDistanceThreshold,u=o(t.target);D=D||Math.abs(n.pageX-M)>s||Math.abs(n.pageY-_)>s,D&&!r&&d("vmousecancel",t,u),d("vmousemove",t,u),h()}function b(e){if(B)return;f();var t=o(e.target),n;d("vmouseup",e,t);if(!D){var r=d("vclick",e,t);r&&r.isDefaultPrevented()&&(n=i(e).changedTouches[0],P.push({touchID:q,x:n.clientX,y:n.clientY}),H=!0)}d("vmouseout",e,t),D=!1,h()}function w(t){var n=e.data(t,x),r;if(n)for(r in n)if(n[r])return!0;return!1}function E(){}function S(t){var n=t.substr(1);return{setup:function(r,i){w(this)||e.data(this,x,{});var s=e.data(this,x);s[t]=!0,A[t]=(A[t]||0)+1,A[t]===1&&F.bind(n,v),e(this).bind(n,E),j&&(A.touchstart=(A.touchstart||0)+1,A.touchstart===1&&F.bind("touchstart",m).bind("touchend",b).bind("touchmove",y).bind("scroll",g))},teardown:function(r,i){--A[t],A[t]||F.unbind(n,v),j&&(--A.touchstart,A.touchstart||F.unbind("touchstart",m).unbind("touchmove",y).unbind("touchend",b).unbind("scroll",g));var s=e(this),o=e.data(this,x);o&&(o[t]=!1),s.unbind(n,E),w(this)||s.removeData(x)}}}var x="virtualMouseBindings",T="virtualTouchID",N="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),C="clientX clientY pageX pageY screenX screenY".split(" "),k=e.event.mouseHooks?e.event.mouseHooks.props:[],L=e.event.props.concat(k),A={},O=0,M=0,_=0,D=!1,P=[],H=!1,B=!1,j="addEventListener"in n,F=e(n),I=1,q=0,R;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var U=0;U<N.length;U++)e.event.special[N[U]]=S(N[U]);j&&n.addEventListener("click",function(t){var n=P.length,r=t.target,i,s,o,u,a,f;if(n){i=t.clientX,s=t.clientY,R=e.vmouse.clickDistanceThreshold,o=r;while(o){for(u=0;u<n;u++){a=P[u],f=0;if(o===r&&Math.abs(a.x-i)<R&&Math.abs(a.y-s)<R||e.data(o,T)===a.touchID){t.preventDefault(),t.stopPropagation();return}}o=o.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function i(t,n,r){var i=r.type;r.type=n,e.event.dispatch.call(t,r),r.type=i}var s=e(n);e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});var o=e.mobile.support.touch,u="touchmove scroll",a=o?"touchstart":"mousedown",f=o?"touchend":"mouseup",l=o?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){s=t,i(n,s?"scrollstart":"scrollstop",e)}var n=this,r=e(n),s,o;r.bind(u,function(n){if(!e.event.special.scrollstart.enabled)return;s||t(n,!0),clearTimeout(o),o=setTimeout(function(){t(n,!1)},50)})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t);n.bind("vmousedown",function(r){function o(){clearTimeout(c)}function u(){o(),n.unbind("vclick",a).unbind("vmouseup",o),s.unbind("vmousecancel",u)}function a(e){u(),f===e.target&&i(t,"tap",e)}if(r.which&&r.which!==1)return!1;var f=r.target,l=r.originalEvent,c;n.bind("vmouseup",o).bind("vclick",a),s.bind("vmousecancel",u),c=setTimeout(function(){i(t,"taphold",e.Event("taphold",{target:f}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(t,n){n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&t.origin.trigger("swipe").trigger(t.coords[0]>n.coords[0]?"swipeleft":"swiperight")},setup:function(){var t=this,n=e(t);n.bind(a,function(t){function i(t){if(!s)return;o=e.event.special.swipe.stop(t),Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()}var s=e.event.special.swipe.start(t),o;n.bind(l,i).one(f,function(){n.unbind(l,i),s&&o&&e.event.special.swipe.handleSwipe(s,o),s=o=r})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})}(e,this)}),function(e){function r(e){if(e in t.style)return e;var n=["Moz","Webkit","O","ms"],r=e.charAt(0).toUpperCase()+e.substr(1);if(e in t.style)return e;for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style)return s}}function i(){return t.style[n.transform]="",t.style[n.transform]="rotateY(90deg)",t.style[n.transform]!==""}function f(e){return typeof e=="string"&&this.parse(e),this}function l(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function c(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=d(t),e.inArray(t,n)===-1&&n.push(t)}),n}function h(t,n,r,i){var s=c(t);e.cssEase[r]&&(r=e.cssEase[r]);var o=""+m(n)+" "+r;parseInt(i,10)>0&&(o+=" "+m(i));var u=[];return e.each(s,function(e,t){u.push(t+" "+o)}),u.join(", ")}function p(t,r){r||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=n.transform,e.cssHooks[t]={get:function(n){var r=e(n).css("transit:transform");return r.get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r),e(n).css({"transit:transform":i})}}}function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function v(e,t){return typeof e=="string"&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function m(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),v(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var t=document.createElement("div"),n={},s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition"),n.transitionDelay=r("transitionDelay"),n.transform=r("transform"),n.transformOrigin=r("transformOrigin"),n.transform3d=i();var o={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},u=n.transitionEnd=o[n.transition]||null;for(var a in n)n.hasOwnProperty(a)&&typeof e.support[a]=="undefined"&&(e.support[a]=n[a]);t=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new f},set:function(t,r){var i=r;i instanceof f||(i=new f(i)),n.transform==="WebkitTransform"&&!s?t.style[n.transform]=i.toString(!0):t.style[n.transform]=i.toString(),e(t).data("transform",i)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}),p("scale"),p("translate"),p("rotate"),p("rotateX"),p("rotateY"),p("rotate3d"),p("perspective"),p("skewX"),p("skewY"),p("x",!0),p("y",!0),f.prototype={setFromString:function(e,t){var n=typeof t=="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e),f.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=v(e,"deg")},rotateX:function(e){this.rotateX=v(e,"deg")},rotateY:function(e){this.rotateY=v(e,"deg")},scale:function(e,t){t===undefined&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=v(e,"deg")},skewY:function(e){this.skewY=v(e,"deg")},perspective:function(e){this.perspective=v(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){this._translateX===undefined&&(this._translateX=0),this._translateY===undefined&&(this._translateY=0),e!==null&&e!==undefined&&(this._translateX=v(e,"px")),t!==null&&t!==undefined&&(this._translateY=v(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=v(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this)if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="perspective"||r==="transformOrigin"))continue;r[0]!=="_"&&(e&&r==="scale"?t.push(r+"3d("+this[r]+",1)"):e&&r==="translate"?t.push(r+"3d("+this[r]+",0)"):t.push(r+"("+this[r]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this,a=0,f=!0;typeof r=="function"&&(s=r,r=undefined),typeof i=="function"&&(s=i,i=undefined),typeof t.easing!="undefined"&&(i=t.easing,delete t.easing),typeof t.duration!="undefined"&&(r=t.duration,delete t.duration),typeof t.complete!="undefined"&&(s=t.complete,delete t.complete),typeof t.queue!="undefined"&&(f=t.queue,delete t.queue),typeof t.delay!="undefined"&&(a=t.delay,delete t.delay),typeof r=="undefined"&&(r=e.fx.speeds._default),typeof i=="undefined"&&(i=e.cssEase._default),r=m(r);var c=h(t,r,i,a),p=e.transit.enabled&&n.transition,d=p?parseInt(r,10)+parseInt(a,10):0;if(d===0){var v=function(e){o.css(t),s&&s.apply(o),e&&e()};return l(o,f,v),o}var y={},b=function(r){var i=!1,a=function(){i&&o.unbind(u,a),d>0&&o.each(function(){this.style[n.transition]=y[this]||null}),typeof s=="function"&&s.apply(o),typeof r=="function"&&r()};d>0&&u&&e.transit.useTransitionEnd?(i=!0,o.bind(u,a)):window.setTimeout(a,d),o.each(function(){d>0&&(this.style[n.transition]=c),e(this).css(t)})},w=function(e){this.offsetWidth,b(e)};return l(o,f,w),this},e.transit.getTransitionValue=h}(jQuery),define("jquery-transit",function(){}),define("common",["jquery","underscore","backbone","domReady","handlebars","text","json2","date","cookies","bootstrap","iscroll","mobiscroll","i18next","jquery-mobile","jquery-transit"],function(e,t,n,r){return Handlebars.registerHelper("csrf_token",function(){return OnShift.CSRF_TOKEN()}),Handlebars.registerHelper("dateParse",function(e,t){return Date.parse(e).toString(t)}),Handlebars.registerHelper("formatDate",function(e,t){return e.toString(t)}),Handlebars.registerHelper("formatDateString",function(e){var t=e.split(" ")[0],n=e.split(" ")[1],r=n.split(":"),i=parseInt(r[0],10)>=12?"PM":"AM";return n=n.replace(r[0],r),n=(parseInt(r[0],10)+11)%12+1+":"+r[1],t+" "+n+i}),Handlebars.registerHelper("API_SERVER_URL",function(){return OnShift.API_SERVER_URL}),Handlebars.registerHelper("eq",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("or",function(e,t,n){return e||t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("select",function(t,n){var r=e("<select />").html(n.fn(this));return r.find("[value="+t+"]").attr({selected:"selected"}),r.html()}),Handlebars.registerHelper("call",function(e,t){var n=arguments;return JSON.stringify(n).indexOf("[")===-1&&(n=[n]),e[t].apply(e,n)}),Handlebars.registerHelper("t",function(t,n){var r=e.i18n.t(t,n.hash);return new Handlebars.SafeString(r)}),Handlebars.registerHelper("tr",function(t,n){var r=e.i18n.functions.extend(n.hash,t);n.fn&&(r.defaultValue=n.fn(t));var i=e.i18n.t(r.key,r);return new Handlebars.SafeString(i)}),Handlebars.registerHelper("truncate",function(e,t){var n=e;return n.length>t&&(n=n.slice(0,t)+".."),n}),Handlebars.registerHelper("stripWhiteSpace",function(e){var t=e.replace(/\s/g,"");return t}),{$:e,_:t,Backbone:n,domReady:r}}),define("collection",["backbone"],function(){function e(e,t){return t.split(e).pop()}var t=Backbone.Collection.extend({next:function(t){this.setParams(e(this.urlRoot,this.meta.next)),this.fetch(t)},prev:function(t){this.setParams(e(this.urlRoot,this.meta.prev)),this.fetch(t)},setParams:function(e){this.params=e},getParams:function(){return this.params},url:function(){return this.urlRoot+this.getParams()},initialize:function(e,t){t=t||{},Backbone.Collection.prototype.initialize.call(this,e,t),this.urlRoot=t.urlRoot||this.urlRoot||"",this.params=""},_getValues:function(e){var t=_.clone(e);return this.translate(t)},translate:function(e){var t=e;return _.keys(e).length==1&&(t=_.values(e),t=t.length?t[0]:{}),t},parse:function(e){var t=e.objs?e.objs:e,n=e.meta?e.meta:{};return this.meta=n,_.map(t,function(e,t,n){return this._getValues(e)},this)}});return t}),define("model",["backbone"],function(){var e=Backbone.Model.extend({initialize:function(e,t){t||(t={}),Backbone.Model.prototype.initialize.call(e,t),_.extend(this,_.pick(t,this.constructor.PICK_LIST))},translate:function(e){var t=_.clone(e),n=e instanceof Array?e[0]:e;return _.keys(t).length===1&&(n=_.values(t),n=n.length?n[0]:{}),n},parse:function(e){var t=e.objs||e.objects?e.objs||e.objects:e,n=e.meta?e.meta:{},r=this.translate(t);return this.meta=n,r}});return e.PICK_LIST=[],e}),define("lib/collections/generic",["collection","model"],function(e,t){var n=e.extend({initialize:function(t,n){n||(n={}),this.typeMap||(this.typeMap=n.typeMap),this.typeMap||(this.typeMap={}),e.prototype.initialize.call(this,t,n)},translate:function(e){var t=_.keys(e)[0],n=_.values(e)[0];return n.type=t,n}});return n}),define("lib/mixins/schedule_like",["backbone"],function(){var e={getStartDate:function(){return this.startDate?new Date(this.startDate):undefined},getStopDate:function(){return this.stopDate?new Date(this.stopDate):undefined},isLoaded:function(){return!1}};return e}),define("lib/mixins/requestable",["backbone"],function(){function e(e){return e||(e={}),_.defaults(e,{fillInEmpID:undefined,success:function(){},error:function(){}})}var t={_request:function(e){var t={do_request:!0};return e.fillInEmpID&&_.extend(t,{fill_in_emp_id:e.fillInEmpID}),{url:this.urlRoot+"/"+this.id,type:"POST",data:t,dataType:"json",success:e.success,error:e.error}},_withdraw:function(e){return{url:this.urlRoot+"/"+this.id+"?do_withdraw=true",type:"DELETE",dataType:"json",success:e.success,error:e.error}},request:function(t){Backbone.ajax(this._request(e(t)))},withdraw:function(t){Backbone.ajax(this._withdraw(e(t)))}};return t}),define("lib/models/shift",["model","lib/mixins/schedule_like","lib/mixins/requestable"],function(e,t,n){function r(e){var t=e.split(" ")[0],n=e.split(" ")[1].split("-")[0];return Date.parseExact(t+" "+n,"yyyy-MM-dd HH:mm:ss")}var i=e.extend({urlRoot:"/rest/shift",initialize:function(t,n){e.prototype.initialize.call(this,t,n),this.bind("sync",this.afterFetch),this.afterFetch()},afterFetch:function(){this.get("shift_time_period")&&(this.startDate=r(this.get("shift_time_period")[0]),this.stopDate=r(this.get("shift_time_period")[1]))},requestFillIn:function(e){this.save({request_fill_in:!0},e)}});return _.extend(i.prototype,t),_.extend(i.prototype,n),i}),define("lib/models/v2shift",["model","lib/mixins/schedule_like","lib/mixins/requestable"],function(e,t,n){function r(e){var t=e.split(" ")[0],n=e.split(" ")[1];return Date.parseExact(t+" "+n,"yyyy-MM-dd HH:mm:ss")}var i=e.extend({urlRoot:"/rest/v2shift",initialize:function(t,n){e.prototype.initialize.call(this,t,n),this.bind("sync",this.afterFetch),this.afterFetch()},afterFetch:function(){var e,t;this.get("_start_time_str")&&this.get("_stop_time_str")?(e=this.get("_start_time_str"),t=this.get("_stop_time_str"),this.startDate=r(e),this.stopDate=r(t)):(e=this.get("_start_time"),t=this.get("_stop_time"),this.startDate=e?new Date(e*1e3):undefined,this.stopDate=t?new Date(t*1e3):undefined)}});return _.extend(i.prototype,t),_.extend(i.prototype,n),i}),define("lib/collections/available_shifts",["lib/collections/generic","lib/models/shift","lib/models/v2shift"],function(e,t,n){var r=e.extend({url:"/rest/schedule?available_shifts=true",model:function(e,r){var i=null;switch(e.type){case"Shift":i=t;break;case"V2Shift":i=n;break;default:}return delete e.type,new i(e,r)}});return r}),define("lib/models/event",["model","lib/mixins/schedule_like"],function(e,t){function n(e){var t=new Date(e),n=t.getTimezoneOffset();return t.addMinutes(n)}var r=e.extend({defaults:{meta_key:"repeat_start_day"}}),i=e.extend({defaults:{meta_key:"repeat_interval"}}),s=e.extend({urlRoot:"/rest/event",defaults:function(){var e={name:"",event_typeID:1,start_time:"00:00:00",interval:1800,metas:[{}]};return e.metas[0].interval=_.clone({meta_value:86400}),e.metas[0].repeat_day=_.clone({meta_value:Date.today().setTimezone("GMT").getTime()/1e3}),e},initialize:function(t,n){e.prototype.initialize.call(this,t,n)},getStartTimeString:function(){var e=_.clone(this.get("start_time")),t=e.split(":"),n="";return n+=t.shift()+":"+t.shift(),n},getStartDay:function(){if(this.get("metas")[0].repeat_day.meta_value){var e=this.get("metas")[0],t=Number(e.repeat_day.meta_value)*1e3;return n(t)}return Date.today()},setStartDay:function(e){var t=e.clone();t.addMinutes(-1*t.getTimezoneOffset()),this.attributes.metas[0].repeat_day.meta_value=""+t.getTime()/1e3},getStartDate:function(){return this.getStartDay()},getStartDateTime:function(){var e=this.getStartDay(),t=this.getStartTimeString(),n=t.split(":");return e.addHours(Number(n[0])),e.addMinutes(Number(n[1])),e},setStartDateTime:function(e){var t=this.getStopDateTime(),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=e.toString("HH:mm:ss");this.setStartDay(n),this.set("start_time",r),this.setStopDateTime(t)},setStopDateTime:function(e){var t=e-this.getStartDateTime();return t<=0?!1:this.set("interval",t/1e3)},getStopDateTime:function(){var e=this.getStartDateTime();return e.addSeconds(this.get("interval"))},getStopDate:function(){return this.getStopDateTime()},getRepeatInterval:function(){if(this.get("metas")[0].interval.meta_value){var e=this.get("metas")[0];return Number(e.interval.meta_value)}return 0},addMeta:function(e,t){return t||(t={}),this.get("metas").length||this.get("metas").push(e),this},setRepeatInterval:function(e){var t=this.get("metas")[0];t.interval.meta_value=e}});return _.extend(s.prototype,t),s}),define("lib/collections/events",["collection","lib/models/event"],function(e,t){var n=e.extend({model:t,url:"/rest/event"});return n}),define("lib/models/location",["model"],function(e){var t=e.extend({urlRoot:"/rest/location"});return t}),define("lib/collections/locations",["collection","lib/models/location"],function(e,t){var n=e.extend({model:t,urlRoot:"/rest/location"});return n}),define("lib/models/send",["model"],function(e){var t=e.extend({urlRoot:"/rest/send"});return t}),define("lib/collections/sends",["collection","lib/models/send"],function(e,t){var n=e.extend({model:t,urlRoot:"/rest/send",update:function(e){var t={type:"PUT",url:this.urlRoot,data:{objects:JSON.stringify(this.models),filters:e.filters||[]},dataType:"json",success:function(e){}};Backbone.ajax(t)}});return n}),define("lib/models/message",["model"],function(e){var t=e.extend({urlRoot:"/rest/message",respond:function(e,t){t||(t={}),_.defaults(t,{success:function(){},error:function(){}});var n={url:"/rest/message/"+this.id,type:"POST",data:{model:JSON.stringify(e.toJSON())},dataType:"json",success:t.success,error:t.error};Backbone.ajax(n)}});return t}),define("lib/collections/messages",["collection","lib/models/message"],function(e,t){var n=e.extend({model:t,urlRoot:"/rest/message"});return n}),define("lib/models/shift_type",["model"],function(e){var t=e.extend({urlRoot:"/rest/shift_type"});return t}),define("lib/collections/shift_types",["collection","lib/models/shift_type"],function(e,t){var n=e.extend({model:t,urlRoot:"/rest/shift_type"});return n}),define("lib/collections/shifts",["collection","lib/models/shift"],function(e,t){var n=e.extend({model:t,urlRoot:"/rest/shift",next:function(){var e=parseInt(this.getParams().split(/[=&]/)[1],10),t=new Date(e),n=new Date(e);t.setDate(t.getDate()+28),n.setDate(n.getDate()+56),this.setParams("?start="+t.getTime()+"&stop="+n.getTime())},prev:function(){var e=parseInt(this.getParams().split(/[=&]/)[1],10),t=new Date(e),n=new Date(e);t.setDate(t.getDate()-28),this.setParams("?start="+t.getTime()+"&stop="+n.getTime())},initialize:function(t,n){this.options=n||{},e.prototype.initialize.call(this,t,n);var r=new Date,i=r.clone();while(i.getDay()!==0)i.add({days:-1});saturday=i.clone().add({days:27}),this.setParams("?start="+i.getTime()+"&stop="+saturday.getTime())},newStart:function(e){var t=e,n=(new Date(t)).addDays(27);this.setParams("?start="+t.getTime()+"&stop="+n.getTime())}});return n}),define("lib/collections/v2shifts",["collection","lib/models/v2shift"],function(e,t){var n=e.extend({url:"/rest/v2shift",model:t});return n}),define("lib/collections",["collection","lib/collections/available_shifts","lib/collections/events","lib/collections/generic","lib/collections/locations","lib/collections/sends","lib/collections/messages","lib/collections/shift_types","lib/collections/shifts","lib/collections/v2shifts"],function(e,t,n,r,i,s,o,u,a,f){return{Collection:e,AvailableShifts:t,Events:n,Generic:r,Locations:i,Sends:s,Messages:o,ShiftTypes:u,Shifts:a,V2Shifts:f}}),define("lib/models/organization",["model"],function(e){var t=e.extend({urlRoot:"/rest/organization"});return t.PICK_LIST=["locations","shiftTypes"],t}),define("lib/models/pto",["model","lib/mixins/schedule_like"],function(e,t){function n(e){var t=e.split(" ")[0],n=e.split(" ")[1];return Date.parseExact(t+" "+n,"yyyy-MM-dd HH:mm:ss")}var r=e.extend({urlRoot:"/rest/pto",initialize:function(t,n){e.prototype.initialize.call(this,t,n),this.bind("sync",this.afterFetch),this.afterFetch()},afterFetch:function(){this.get("start_time")&&this.get("stop_time")&&(this.startDate=n(this.get("start_time")),this.stopDate=n(this.get("stop_time")))}});return _.extend(r.prototype,t),r}),define("lib/models/push_notification_token",["model"],function(e){var t=e.extend({urlRoot:"/rest/push_notification_token"});return t}),define("lib/models/shift_time_template",["model"],function(e){var t=e.extend({urlRoot:"/rest/shift_time_template"});return t}),!function(e,t){"function"==typeof define&&define.amd?define("layout",["backbone"],t):e.BackboneLayout=e.Backbone.Layout=t()}(this,function(){var e=function(e,t){t||(t={}),this.id=_.uniqueId("managed_"),this.view=e,this.anchor=t.anchor,this.replace=t.replace},t=function(){var t=[];this.register=function(n,r){r||(r={}),this.listenTo(n,"all",function(){this.trigger.apply(this,arguments)},this);var i=new e(n,r);t.push(i)},this.each=function(e,t){_.each(this.getViews(),e,t)},this.getViews=function(){return t},_.bindAll(this,"register","each")};_.extend(t.prototype,Backbone.Events);var n=Backbone.View.extend({constructor:function(e){e||(e={}),this.viewManager=new t,this.defaults&&_.defaults(e,_.result(this,"defaults")),e.serialize&&(this.serialize=e.serialize),this.options=e,Backbone.View.prototype.constructor.call(this,e)},initialize:function(e){this.listenTo(this.viewManager,"all",function(){this.trigger.apply(this,arguments)},this),Backbone.View.prototype.initialize.call(this,e)},registerView:function(e,t){t||(t={}),this.viewManager.register(e,t)},render:function(){return this.beforeRender&&this.beforeRender(),this.template&&this.$el.empty().append(this.template(this.serialize())),this.viewManager.each(function(e){var t=e.view;if(t.render(),e.anchor){var n=$(e.anchor,this.el);e.replace?n.replaceWith(t.el):n.html(t.el)}},this),this.afterRender&&this.afterRender(),this},close:function(){return this.viewManager.each(function(e){view=e.view,view.close&&view.close()}),this.trigger("close",this),this.unbind(),this.stopListening(),this.remove(),this.onClose&&this.onClose(),this},serialize:function(){return this.model?this.model.toJSON():{}}});return n}),define("views/system_alert",["layout"],function(e){var t=e.extend({tagName:"button",className:"close",attributes:{"data-dismiss":"alert","aria-hidden":"true"},template:_.template("X"),render:function(){return this.$el.html(this.template()),this}}),n=e.extend({className:function(){return"alert alert-dismissable alert-"+this.options.type},render:function(){return this}}),r=e.extend({el:$("#systemAlert"),initialize:function(t){t||(t={}),t.type||(t.type="success"),t.timeout||(t.timeout=8e3),e.prototype.initialize.call(this,t)},render:function(){this.options.type||(this.options.type="success"),this.options.timeout||(this.options.timeout=8e3),this.$el.empty();var e=new n({type:this.options.type});return e.$el.empty(),e.$el.append((new t).render().el),e.$el.append(this.options.message),this.$el.append(e.el),$(".content-wrapper").animate({scrollTop:0}),_.delay(_.bind(function(){e.close()},this),this.options.timeout),this}});return r}),define("lib/models/user",["model","views/system_alert"],function(e,t){var n=e.extend({urlRoot:"/rest/user",displayName:function(){var e=this.get("first_name")||"",t=this.get("last_name")||"",n=e+" "+t;return n=n.trim(),n.length?n:this.get("user_name")},savePassword:function(e){e||(e={});var t={url:this.urlRoot+"/"+this.id+"?set_password=true"};_.extend(t,e),this.save(this.toJSON(),t)},isTerminated:function(){var e=Date.parse(this.get("termination_date"));return e&&e<=Date.now()},getSupportMessages:function(){return this.setupCrossDomainAjax(),$.ajax({type:"GET",url:OnShift.API_SERVER_URL+"/rest/message",data:{data:"support_messages"},dataType:"json"})},sync:function(e,t,n){return n.setPassword&&(n.url=t.url+"?set_password=true"),Backbone.sync(e,t,n)},setupCrossDomainAjax:function(){$.ajaxSetup({crossDomain:!0,headers:{"Access-Token":OnShift.osToken}})},getPhoneNumber:function(e){var t=this.get(e+"_number");return t&&t!=="+NoneNone"?t.slice(2).replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):""},isReady:function(){return!_.isEmpty(OnShift.osToken)}});return n.PICK_LIST=["organization","pushNotificationTokens"],n}),define("lib/models",["model","lib/models/event","lib/models/location","lib/models/send","lib/models/message","lib/models/organization","lib/models/pto","lib/models/push_notification_token","lib/models/shift","lib/models/shift_time_template","lib/models/shift_type","lib/models/user","lib/models/v2shift"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return{Model:e,Event:t,Location:n,Send:r,Message:i,Organization:s,PTO:o,PushNotificationToken:u,Shift:a,ShiftTimeTemplate:f,ShiftType:l,User:c,V2Shift:h}}),define("lib/views/collection",["layout"],function(e){var t=function(){var e=this,t=[];this.getViews=function(){return t},this.add=function(n){t.push(n),n.on("all",function(){e.trigger.apply(e,arguments)},this)},this.clear=function(){while(t.length){var n=t.pop();e.trigger("remove",n,e)}}};_.extend(t.prototype,Backbone.Events);var n=e.extend({className:"os-collection-view",initialize:function(n){e.prototype.initialize.call(this,n),this._subViews=new t,this.options.ElementView?this.ElementView=this.options.ElementView:this.options.ElementView=this.ElementView,this.listenTo(this.collection,"add",function(e,t,n){this.addOne(e)}),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this._subViews,"remove",function(e,t){e.close()},this),this.listenTo(this._subViews,"all",function(){this.trigger.apply(this,arguments)},this)},defaults:{collection:new Backbone.Collection},createView:function(e){return new this.options.ElementView(this.getViewArgs(e))},getViewArgs:function(e){return{model:e}},addOne:function(e){var t=this.createView(e);this.$el.append(t.render().el),this._subViews.add(t)},addAll:function(){this._subViews.clear(),_.each(this.getModels(),function(e){this.addOne(e)},this)},getModels:function(){return this.collection.models},getViews:function(){return _.map(this._subViews.getViews(),function(e){return e.$el},this)},fetch:function(e){this.collection.fetch(e)},render:function(){return this.beforeRender&&this.beforeRender(),this.addAll(),this.afterRender&&this.afterRender(),this}});return n}),define("lib/views",["layout","lib/views/collection"],function(e,t){return{Layout:e,Collection:t}}),define("lib/plugins/app_view",["underscore","jquery"],function(){var e=function(e,t,n){OnShift.TransitionEnabled===!0?($(t,n).show(),$(t,n).empty().append(e.el),$(t,n).transition({x:"0px"})):$(t,n).empty().append(e.el)},t=function(e,t,n){e&&(OnShift.TransitionEnabled===!0?($(t,n).hide(),$(t,n).transition({x:"400px"}),e&&e.close()):e&&e.close())},n={beforeRender:function(){},afterRender:function(){},beforeShow:function(){},afterShow:function(){},onNoShow:function(){},first:function(){},last:function(){},force:!1,doRender:!0},r=function(r,i){r=r||"#content",i=i||null,this.showView=function(s,o){o=o||{},o=_.defaults(o,n),o.first(),this.currentView!=s||o&&o.force?(t(this.currentView,r,i),this.currentView=s,o.beforeRender(),o.doRender&&this.currentView.render(),o.afterRender(),o.beforeShow(),e(this.currentView,r,i),o.afterShow()):o.onNoShow(),o.last()}};return r}),define("lib/plugins/lazyloader",["common"],function(){var e=function(e){this.type=e};return _.extend(e.prototype,{get:function(){var e=Array.prototype.slice.call(arguments),t=$.Deferred(),n=this.type+"/";return e=_.map(e,function(e){return n+e}),require(e,function(){t.resolve.apply(t,arguments)}),t.promise()}}),e}),function(e){define("lib/plugins/backbone.more",["backbone"],function(){return function(){(function(e,t,n){e.View.prototype.close=function(){return this.remove(),this.unbind(),this.stopListening(),this.onClose&&this.onClose(),this.trigger("close"),this},e.mergeMixin=function(e,t){n.defaults(e.prototype,t),n.defaults(e.prototype.events,t.events)}})(Backbone,$,_)}.apply(e,arguments)})}(this),define("lib/plugins",["lib/plugins/app_view","lib/plugins/lazyloader","lib/plugins/backbone.more"],function(e,t){return{AppView:e,LazyLoader:t}}),define("lib/mixins",["lib/mixins/requestable","lib/mixins/schedule_like"],function(e,t){return{Requestable:e,ScheduleLike:t}}),define("lib",["lib/collections","lib/models","lib/views","lib/plugins","lib/mixins"],function(e,t,n,r,i){return{Collections:e,Models:t,Views:n,Plugins:r,Mixins:i}}),define("views/header",["layout","common"],function(e){var t=e.extend({tagName:"button",attributes:{type:"button"},events:{click:"callback"},initialize:function(e){this.callback=e.callback,this.template=e.template}}),n=e.extend({}),r=e.extend({initialize:function(t){$("#menu").collapse({toggle:!1}),this.classNames=[],this.menuButton=null,this.actionButton=null,this.actionButton2=null,this.printButton=null,this.dropdown=null,this.toggler=new n({el:$(".navbar-toggle",this.el)}),e.prototype.initialize.call(this,t)},activate:function(e){var t="";e.indexOf("file:///")==-1?(t=$("li.link-"+e),t.addClass("active").siblings().removeClass("active"),this.toggle(!1)):(t=$("li.link-account"),t.addClass("active").siblings().removeClass("active"),this.toggle(!1))},toggle:function(e){$("#menu").collapse(e?"show":"hide")},setTitle:function(e,t){parseFloat(OnShift.DeviceVersion)<4?OnShift.ViewHeader==="Availability"?($("#sectionTitle").text("Availability"),OnShift.ViewHeader=""):OnShift.ViewHeader==="Do Not Disturb"?($("#sectionTitle").text("Do Not Disturb"),OnShift.ViewHeader=""):$("#sectionTitle").text(e):$("#sectionTitle").text(e),t&&t.classNames&&(this.classNames=this.classNames.concat(t.classNames.split(" ")),_.each(this.classNames,function(e){$("#sectionTitle").addClass(e)},this))},resetTitle:function(){_.each(this.classNames,function(e){$("#sectionTitle").removeClass(e)},this),this.classNames=[]},setMenuButton:function(e){this.menuButton&&this.menuButton.close(),this.menuButton=new t(_.defaults({className:"menu-button"},e)),this.toggler.$el.hide(),$(".navbar-header",this.el).prepend(this.menuButton.render().el)},resetMenuButton:function(){this.menuButton&&this.menuButton.close(),this.toggler.$el.show()},toggleNavigation:function(e){$(".navbar-nav .link").toggle(e)},addSupportMessages:function(e){$(".navbar").prepend(e.render().el)},removeSupportMessages:function(){$(".support-messages").remove(),$(".viewport").css("top","45px")},setActionButton:function(e){this.actionButton&&this.actionButton.close(),this.actionButton=e,$(".navbar-header",this.el).append(this.actionButton.render().el)},setActionButton2:function(e){this.actionButton2&&this.actionButton2.close(),this.actionButton2=e,$(".navbar-header",this.el).append(this.actionButton2.render().el)},setPrintButton:function(e){this.printButton&&this.printButton.close(),this.printButton=e,$(".navbar-header",this.el).append(this.printButton.render().el)},setDropdown:function(e){this.dropdown&&this.dropdown.close(),this.dropdown=e,$(".navbar-header",this.el).append(this.dropdown.render().el)},resetActionButton:function(){this.actionButton&&this.actionButton.close()},resetActionButton2:function(){this.actionButton2&&this.actionButton2.close()},resetPrintButton:function(){this.printButton&&this.printButton.close()},resetDropdown:function(){this.dropdown&&this.dropdown.close()},reset:function(){this.resetMenuButton(),this.resetActionButton(),this.resetActionButton2(),this.resetPrintButton(),this.resetDropdown(),this.resetTitle()},closeButtons:function(){try{this.actionButton.close(),this.actionButton2.close(),this.dropdown.close(),this.printButton.close()}catch(e){try{this.dropdown.close(),this.actionButton2.close(),this.printButton.close()}catch(t){console.log("error logging out")}}},closeTOButton:function(){this.actionButton.close()}});return r}),define("mixins/error_handler",[],function(){var e={_handleError:function(){require(["views/system_alert"],function(e){alert("An error has occurred while attempting to load this page.  Please go back and try again.  If the problem persists, please report it to your scheduler.")})}};return e}),define("mixins/notify_header",[],function(){var e={notifyMenuButton:function(e){e||(e={}),this.trigger("notify:header:menubutton",this,e)},notifyTitle:function(e,t){t||(t={}),e||(e=""),this.trigger("notify:header:title",this,e,t)},notifyActivate:function(e){if(!e)return;this.trigger("notify:header:activate",this,e)},notifyDropdown:function(e){if(!e)return;this.trigger("notify:header:dropdown",this,e)},notifyActionButton:function(e){if(!e)return;this.trigger("notify:header:action-button",this,e)},notifyActionButton2:function(e){if(!e)return;this.trigger("notify:header:action-button2",this,e)},notifyPrintButton:function(e){if(!e)return;this.trigger("notify:header:print-button",this,e)}};return e}),define("routes/router",["require","common"],function(e){var t=e("common"),n=Backbone.Router.extend({initialize:function(e){Backbone.Router.prototype.initialize.call(this,e),_.extend(this,_.omit(e,"bootstrapData"));var t=$("#djangoAlert");t.length&&_.delay(function(){t.remove()},3e3),this.header.toggleNavigation(!0)},listenToViewNavigate:function(e,t){t||(t={trigger:!0}),e.on("navigate",_.bind(function(e){this.navigate(e,t)},this))},bindView:function(e){e.on("notify:header:menubutton",function(e,t){t||(t={}),this.header.setMenuButton(t)},this),e.on("notify:header:title",function(e,t,n){n||(n={}),t=t||"",this.header.setTitle(t,n)},this),e.on("notify:header:activate",function(e,t){t||(t="calendar"),this.header.activate(t)},this),e.on("notify:header:action-button",function(e,t){this.header.setActionButton(t)},this),e.on("notify:header:action-button2",function(e,t){this.header.setActionButton2(t)},this),e.on("notify:header:print-button",function(e,t){this.header.setPrintButton(t)},this),e.on("notify:header:dropdown",function(e,t){this.header.setDropdown(t)},this)},createView:function(e,t){t=t||{},e.then(_.compose(_.partial(_.bind(function(e,t){e||(e={}),_.defaults(e,{showOpts:{}}),this.bindView(t),this.appView.showView(t,e.showOpts)},this),t),t.initialize))}});return n}),define("views/support_messages",["layout","lib/views/collection"],function(e,t){var n=e.extend({className:"support-message support-message-alert alert-error affix-top",template:Handlebars.compile('<button class="close"><img class="smsg-close"></img></button><span class="icon-danger"></span><a class="support-message-link" href="/messages">{{messageTitle}}</a>'),events:{"click .close":"handleClose"},handleClose:function(){this.model.set("expiration_date",Date.parse(new Date).toString("yyyy-MM-dd HH:mm:ss")),this.model.save(),this.close(),this.adjustViewOffset()},serialize:function(){return{messageTitle:this.model.get("message").title}},adjustViewOffset:function(){var e=$(".viewport").offset().top;$(".viewport").offset({top:e-65})}}),r=t.extend({className:"support-messages",ElementView:n,afterRender:function(){var e=$(".viewport").offset().top;$(".viewport").offset({top:e+parseInt(this.getModels().length,10)*65})}});return r}),define("config",[],function(){var e={},t=function(n,r){if(t.prototype.__singleton&&!r)return t.prototype.__singleton;t.prototype.__singleton=this,n||(n={}),e=n.settings||{},this.get=function(t){return e[t]},this.set=function(t,n){e[t]=n}};return t}),define("utils",["lib/models/push_notification_token"],function(e){var t={cordovaHelper:function(e,t,n){cordova.exec(function(e){},function(e){},e,t,[n])},showCordovaAlert:function(e,t){navigator.notification.alert(e,t,"OnShift Mobile","OK")},showCordovaConfirm:function(e,t,n,r,i){navigator.notification.confirm(e,t,n,r+", "+i)},alertDismissed:function(){$("#submit").css("background-color","#970504"),$("#registerpn").css("background-color","#970504"),t.cordovaHelper("WaitingDialog","hide","")},changeRoute:function(e){e!="btnLogout"?$("#"+e).click():t.logOutHandler()},openPrivacyPolicy:function(){window.open("http://staticdocs.onshift.com/Privacy%20Policy.htm","_blank","location=no")},openHelp:function(){window.open("http://staticdocs.onshift.com/Employee%20Mobile%20FAQ.htm","_blank","location=no")},setDateTime:function(e){$(OnShift.DatePicker).val(e),OnShift.DatePicker=""},logOutHandler:function(){$("#dvMainApp").hide(),window.localStorage.removeItem("OnShiftUSER"),window.localStorage.getItem("pushToken")!==null&&window.localStorage.getItem("pushToken")!=="dummy"&&t.deleteToken(),window.localStorage.removeItem("pushToken"),t.cordovaHelper("OSPlugin","goBackToLogin","nil")},printWeeklyReport:function(){cordova.exec(function(e){cordova.exec(function(e){},function(e){},"OSPlugin","printAction",[""])},function(e){console.log("Error: "+e)},"OSPlugin","download",[OnShift.USER.access_token,OnShift.API_SERVER_URL+"/printable/weekly"])},deleteToken:function(){var t=new e,n=window.localStorage.getItem("pushToken"),r=parseInt(OnShift.employee.id,10);t.fetch({data:{token_string:n}}).done(function(e){var n=JSON.parse(JSON.stringify(e));n.objs!==null&&t.destroy({success:function(e,t){console.log("model successfully deleted")},error:function(e,t){Raven.captureException("Version "+OnShift.AppVersion+": push token delete error - "+JSON.stringify(t)),console.log(t),console.log(t.responseText)}})})},queryPushNotificationDb:function(){window.localStorage.getItem("pushToken")===null&&t.showCordovaConfirm("OnShift would like to send you push notifications for your schedule and messages. Is this okay?",t.onPushConfirm,"OnShift Mobile","Yes","No")},registerOrUpdatePushCommPreference:function(){window.localStorage.getItem("pushToken")===null||window.localStorage.getItem("pushToken")==="dummy"?t.cordovaHelper("GCMPlugin","register",""):t.insertUpdatePushToken(window.localStorage.getItem("pushToken"))},onPushConfirm:function(e){e.toString()=="1"?($("#btnCalendar").click(),t.cordovaHelper("GCMPlugin","register","")):t.showCordovaAlert("To receive messages, you must select a communication preference",t.showPreferenceView)},showPreferenceView:function(){window.localStorage.setItem("pushToken","dummy");var e="/account/employee/"+OnShift.employee.id+"/communication";OnShift.RouterObj.navigate(e,{trigger:!0})},storeRegistrationId:function(e){window.localStorage.setItem("pushToken",e),t.insertUpdatePushToken(e)},insertUpdatePushToken:function(n){var r=new e,i=parseInt(OnShift.employee.id,10);r.fetch({data:{token_string:n}}).done(function(s){var o=JSON.parse(JSON.stringify(s));if(o.objs===null){var u=new e({user:i,token:n,device_type:device.platform+device.version,app_version:OnShift.AppVersion});u.save({},{error:function(e,t){console.log(t),Raven.captureException("Version "+OnShift.AppVersion+": push token save error - "+JSON.stringify(t))}}),t.updatePushCommPreference()}else{var a=o.objs.id;r.set({userID:i}),r.save({},{error:function(e,t){console.log(t),Raven.captureException("Version "+OnShift.AppVersion+": push token update error - "+JSON.stringify(t))}}),t.updatePushCommPreference()}})},updatePushCommPreference:function(){try{t.cordovaHelper("OSPlugin","saveuser",OnShift.employee.id),OnShift.employee.set("preferred_send_methodID",OnShift.sendMethods.where({name:"Push"})[0].id),OnShift.employee.save(null,{success:function(){console.log("communication preference is now set to push")},error:function(e,t){console.log(t),Raven.captureException("Version "+OnShift.AppVersion+": comm pref save error - "+JSON.stringify(t))}})}catch(e){console.log("error updating comm pref: "+e)}},getNotification:function(e){t.cordovaHelper("GCMPlugin","dismissNotification","");var n=JSON.parse(e);t.handleNotification(n)},getForegroundNotification:function(e){var n=JSON.parse(e);t.msgjsonobj=n,typeof t.msgjsonobj.message!="undefined"?t.showCordovaConfirm(t.msgjsonobj.message,t.notificationAlertDismissed,"OnShift Mobile","Dismiss","View"):t.showCordovaConfirm(t.msgjsonobj.msg,t.notificationAlertDismissed,"OnShift Mobile","Dismiss","View")},notificationAlertDismissed:function(e){t.cordovaHelper("GCMPlugin","dismissNotification",""),t.cordovaHelper("OSPlugin","updatePending",""),e.toString()=="2"&&t.handleNotification(t.msgjsonobj)},handleNotification:function(e){if(typeof e.msg_type!="undefined")if(e.msg_type!="2")OnShift.ClearMessageFilter=!0,OnShift.OnMessageView?parseFloat(OnShift.DeviceVersion)<4?Backbone.history.loadUrl(Backbone.history.fragment):(Backbone.history.stop(),typeof window.history.pushState=="undefined"?Backbone.history.start({pushState:!1}):Backbone.history.start({pushState:!0})):$("#btnMessages").click();else{OnShift.LoadSingleMessage=!0,OnShift.MessageId=e.id;var t={url:OnShift.API_SERVER_URL+"/rest/v2shift",type:"GET",data:{message_id:OnShift.MessageId,token:OnShift.osToken},dataType:"json",success:function(e){e.objs.id.length>1&&(OnShift.ShiftId=e.objs.id,$("#btnAvailableShifts").click())}};Backbone.ajax(t)}}};return t}),define("routes/employee",["require","common","routes/router","lib/plugins","lib/models","lib/collections","lib/collections/sends","views/support_messages","config","utils"],function(e){var t=e("common"),n=e("routes/router"),r=e("lib/plugins"),i=e("lib/models"),s=e("lib/collections"),o=e("lib/collections/sends"),u=e("views/support_messages"),a=e("config"),f=e("utils"),l=r.LazyLoader;Loaders={Account:new l("pages/account"),Messages:new l("pages/messages"),Shift:new l("pages/shift"),AvailableShifts:new l("pages/available_shifts"),Requests:new l("pages/requests"),Calendar:new l("pages/calendar")};var c=n.extend({initialize:function(e){n.prototype.initialize.call(this,e);var t=e.bootstrapData;OnShift.extendedOrgs=new Backbone.Collection,_.each(t.get("extended_organizations"),function(e){OnShift.extendedOrgs.add(new i.Organization(e,{locations:new s.Locations(t.get("extended_locations")[e.id]),shiftTypes:new s.ShiftTypes(t.get("extended_shift_types")[e.id])}))}),OnShift.employee=new i.User(t.get("user"),{organization:new i.Organization(t.get("organization"),{locations:new s.Locations(t.get("locations")),shiftTypes:new s.ShiftTypes(t.get("shiftTypes"))}),pushNotificationTokens:new s.Collection(t.get("pushNotificationTokens"))}),OnShift.messageTypes=new s.Collection(t.get("messageTypes")),OnShift.eventTypes=new s.Collection(t.get("eventTypes")),OnShift.ptoTypes=new s.Collection(t.get("ptoTypes")),OnShift.ptoStatus=new s.Collection(t.get("ptoStatus")),OnShift.sendMethods=new s.Collection(t.get("sendMethods")),OnShift.alertStates=new s.Collection(t.get("alertStates")),OnShift.supportMessages=new o(t.get("supportMessages"));var r=this.updateConfig(OnShift.employee),a=new u({collection:OnShift.supportMessages});this.header.addSupportMessages(a),this._setIntervalForBootstrapRefresh()},_setIntervalForBootstrapRefresh:function(){that=this,setInterval(function(){typeof OnShift.USER.access_token!="undefined"&&OnShift.USER.access_token.length>0&&(OnShift.employee.organization.fetch({reset:!0}),that._displaySupportMessages())},3e5)},_displaySupportMessages:function(){that=this,OnShift.user.getSupportMessages().done(function(e){OnShift.supportMessages=new o(e.objs),that.header.removeSupportMessages();var t=new u({collection:OnShift.supportMessages});that.header.addSupportMessages(t)}).fail(function(e){console.log("got error getting support messages: "+e)})},refreshBootstrapData:function(){that=this;var e=$.Deferred();return typeof OnShift.BootstrapData!="undefined"?OnShift.BootstrapData.fetch({data:{target:"employee"},reset:!0}).done(function(t){OnShift.employee=new i.User(t.objs.user,{organization:new i.Organization(t.objs.organization,{locations:new s.Locations(t.objs.locations),shiftTypes:new s.ShiftTypes(t.objs.shiftTypes)}),pushNotificationTokens:new s.Collection(t.objs.pushNotificationTokens)}),OnShift.messageTypes=new s.Collection(t.objs.messageTypes),OnShift.eventTypes=new s.Collection(t.objs.eventTypes),OnShift.ptoTypes=new s.Collection(t.objs.ptoTypes),OnShift.ptoStatus=new s.Collection(t.objs.ptoStatus),OnShift.sendMethods=new s.Collection(t.objs.sendMethods),OnShift.alertStates=new s.Collection(t.objs.alertStates),OnShift.supportMessages=new o(t.objs.supportMessages);if(typeof OnShift.header!="undefined"){OnShift.header.removeSupportMessages();var n=new u({collection:OnShift.supportMessages});OnShift.header.addSupportMessages(n)}that.updateConfig(OnShift.employee),e.resolve()}):e.resolve(),e},updateConfig:function(e){if(!e.organization)return new a;var t=_.pick(e.organization.toJSON(),"emp_can_request_time_off","default_location_on_emp_schedule","allow_employee_fill_in_requests","default_location_on_emp_open_shifts","emp_can_modify_notification_window","show_shift_notes_to_emps","show_emp_printable_schedule_link","emp_can_modify_home_number","emp_can_modify_mobile_number","emp_can_modify_email_address","emp_can_modify_phone_call_destination","emp_can_modify_preferred_communication_method","emp_can_pick_fillin_candidate","emp_can_configure_availability","emp_can_modify_username"),n=new a({settings:t},!0);return n},routes:{"account/profile":"profile","account/settings(/:section)":"settings","account/employee(/:empId)(/:section)":"employeeAccounts","account/employee/:empID/event_list/:type":"eventList","account/employee/:empId/event/:type/:eventId":"editEvent",account:"account","calendar(/:date)":"calendar",available_shifts:"availableShifts","available_shifts/:type/:id":"availableShiftDetail",requests:"requests","requests/new(/:date)":"newRequest","requests/:id":"viewRequest","shift/:id(/:section)":"shift",messages:"messages",logout:"logout","":"defaultRoute","*path":"defaultRoute"},calendar:function(e){$("body").unbind("touchmove"),OnShift.VerifyEmailSent==="true"&&OnShift.AppController.checkIfEmailConfirmed(!1),e=e&&new Date(Number(e))||Date.today();if(this.appView.currentView&&this.appView.currentView.className=="calendar-main")return this.appView.currentView.model.set("current",e),this.header.noReset=!0,!1;this.createView(Loaders.Calendar.get("views/main"),{initialize:_.bind(function(t){var n=new t({date:e});return n.on("navigate",function(e,t){t||(t=!0);if(typeof e=="string"){var n=e;this.navigate(n,{trigger:t})}e instanceof i.Shift&&e.isFillinShift?this.navigate("/available_shifts/fillin/"+e.id,{trigger:t}):e instanceof i.Shift?this.navigate("/shift/"+e.id,{trigger:t}):e instanceof i.PTO?this.navigate("/requests/"+e.id,{trigger:t}):e instanceof i.V2Shift&&this.navigate("/available_shifts/open/"+e.id,{trigger:t})},this),n},this),showOpts:{afterRender:_.bind(function(){this.header.resetMenuButton()},this)}})},availableShifts:function(e){var t=null;window.localStorage.getItem("available_shifts_filter")!==null?t=window.localStorage.getItem("available_shifts_filter"):t="All",OnShift.LoadSingleMessage?this.createView(Loaders.AvailableShifts.get("views/single_shift"),{initialize:_.bind(function(e){return new e})}):this.createView(Loaders.AvailableShifts.get("views/available_shifts"),{initialize:_.bind(function(e){return new e})})},availableShiftDetail:function(e,t){var n="";switch(e){case"fillin":n="fillin";break;case"open":n="open_shift";break;default:throw new Error("Invalid route!")}var r=null;if(this.appView.currentView){var i=this.appView.currentView.availableShifts;if(i&&i.collection){var s=Number(t);r=i.collection.findWhere({id:s?s:t})}}this.createView(Loaders.AvailableShifts.get("views/"+n),{initialize:_.bind(function(e){var n=new e({model:r,shiftID:t});return n.on("cancel",function(){window.history.back()},this),n},this),showOpts:{doRender:r}})},profile:function(){that=this,f.cordovaHelper("WaitingDialog","show",""),this.refreshBootstrapData().done(function(){that.createView(Loaders.Account.get("views/profile"),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return this.listenToViewNavigate(t),t},that)})})},settings:function(e){that=this,e||(e="settings"),e==="settings"?(f.cordovaHelper("WaitingDialog","show",""),this.refreshBootstrapData().done(function(){that.createView(Loaders.Account.get("views/"+e),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return t},that)})})):this.createView(Loaders.Account.get("views/"+e),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return t},this)})},account:function(e){e||(e="main"),this.createView(Loaders.Account.get("views/"+e),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return t},this)})},employeeAccounts:function(e,t){t==="communication"?(that=this,f.cordovaHelper("WaitingDialog","show",""),this.refreshBootstrapData().done(function(){e&&t||(t="linked_accounts"),that.createView(Loaders.Account.get("views/"+t),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return this.listenToViewNavigate(t),t},that)})})):(e&&t||(t="linked_accounts"),this.createView(Loaders.Account.get("views/"+t),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee,user:this.user});return this.listenToViewNavigate(t),t},this)}))},messages:function(){this.createView(Loaders.Messages.get("views/messages"),{initialize:_.bind(function(e){var t=new e;return t},this)})},requests:function(e){this.createView(Loaders.Requests.get("views/requests"),{initialize:_.bind(function(e){var t=new e;return t},this)})},newRequest:function(e){this.createView(Loaders.Requests.get("views/new_request"),{initialize:_.bind(function(t){var n=new t({model:OnShift.employee,date:e});return this.listenToViewNavigate(n),n},this)})},viewRequest:function(e){this.createView(Loaders.Requests.get("views/view_request"),{initialize:_.bind(function(t){var n=null,r=new t({model:OnShift.employee,request:n,requestID:e});return this.listenToViewNavigate(r),r},this),showOpts:{afterRender:_.bind(function(){$(".content-wrapper").animate({scrollTop:0})},this),doRender:!1}})},shift:function(e,t){t||(t="main"),t!="fillin"?$("body").bind("touchmove",function(e){e.preventDefault()}):$("body").unbind("touchmove"),this.createView(Loaders.Shift.get("views/"+t),{initialize:_.bind(function(t){var n=new i.Shift({id:e}),r=new t({model:n});return this.listenToViewNavigate(r),r},this),showOpts:{afterRender:_.bind(function(){this.header.setTitle("Scheduled Shift"),this.header.activate("calendar"),this.header.setMenuButton({callback:function(){t==="main"?$("#btnCalendar").click():window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},this),doRender:!1}})},communication:function(e){e||(e="communication"),this.createView(Loaders.Account.get("views/"+e),{initialize:_.bind(function(e){var t=new e({model:OnShift.employee});return t},this)})},eventList:function(e,t){this.createView(Loaders.Account.get("views/event_list"),{initialize:_.bind(function(e){var n={model:OnShift.employee,user:this.user};t==="availability"?_.extend(n,{eventTypeName:"available",eventType:"Availability",topMessage:"I'm available for work at these times",title:"Availability"}):t==="blockout"&&_.extend(n,{eventTypeName:"no-comm-range",eventType:"Blockout",topMessage:"Don't send me work messages during this time",title:"Do Not Disturb"});var r=new e(n);return this.listenToViewNavigate(r),r},this)})},editEvent:function(e,t,n){this.createView(Loaders.Account.get("views/event_form"),{initialize:_.bind(function(e){var r=null;if(this.appView.currentView.eventsView){var i=this.appView.currentView.eventsView;if(i.collection){var s=Number(n);r=i.collection.findWhere({id:s?s:n})}}var o={model:OnShift.employee,eventType:t};n!=="new"&&_.extend(o,{event:r,eventID:n,showDelete:!0}),t==="available"?_.extend(o,{eventTypeName:"Availability",namePlaceHolder:"Will Work"}):t==="no-comm-range"&&_.extend(o,{eventTypeName:"Blockout",namePlaceHolder:"Name..."});var u=new e(o);return this.listenToViewNavigate(u),u},this),showOpts:{afterRender:_.bind(function(){$(".content-wrapper").animate({scrollTop:0})},this)}})},logout:function(){f.logOutHandler()},defaultRoute:function(e){this.navigate("/calendar",{trigger:!0,replace:!0})}});return c}),define("app",["lib","lib/models/user","views/header","mixins/error_handler","mixins/notify_header"],function(e,t,n,r,i){var s=e.Models.Model.extend({url:"/rest/bootstrap"});_.extend(e.Views.Layout.prototype,i);var o=function(r){if(!r)throw new TypeError("App requires an anchor");this.anchor=r,this.user=new t({id:OnShift.USER.id}),OnShift.osToken=OnShift.USER.access_token,OnShift.user=this._processUser(),this.appView=this._setupAppView(),this.header=new n({el:$("#navbar")}),OnShift.header=this.header,this.bootstrapData=new s};return o.prototype._processUser=function(){return this.user.setupCrossDomainAjax(),this.user},o.prototype._setupAppView=function(){return new e.Plugins.AppView(this.anchor)},o.prototype.run=function(e){e||(e={}),this.bootstrapData=new s,OnShift.BootstrapData=this.bootstrapData;if(!OnShift.osToken){this._run(this.bootstrapData);return}this._fetchBootstrapData(e)},o.prototype._fetchBootstrapData=function(e){e||(e={}),$.when(this.bootstrapData.fetch({data:{target:"login"}})).done(_.bind(function(){this._run(this.bootstrapData,e),e.success&&e.success(this.bootstrapData)},this)).fail(_.bind(function(e,t,n){this._handleError()},this)),e.response&&e.response(this.bootstrapData)},o.prototype._run=function(e,t){t||(t={}),require(["routes/employee"],_.bind(function(e){if(t.afterRouter){t.afterRouter("employee");return}var n=new e({user:this.user,header:this.header,appView:this.appView,bootstrapData:this.bootstrapData});n.on("route",function(e,t){OnShift.CurrentRoute=e,e=="messages"?(OnShift.OnMessageView=!0,window.localStorage.getItem("showMessageTutorial")===null&&($("body").bind("touchmove",function(e){e.preventDefault()}),$("#dvMainApp").addClass("hidden"),$("#dvMessages").removeClass("hidden"),window.localStorage.setItem("showMessageTutorial","true"))):OnShift.OnMessageView=!1,e=="availableShifts"&&window.localStorage.getItem("showShiftsTutorial")===null&&($("body").bind("touchmove",function(e){e.preventDefault()}),$("#dvMainApp").addClass("hidden"),$("#dvShifts").removeClass("hidden"),window.localStorage.setItem("showShiftsTutorial","true")),setTimeout(function(){var e=function(e){var t={prop:$(this).prop("href"),attr:$(this).attr("href")},n=location.protocol+"//"+location.host+"/";t.prop.slice(0,n.length)===n&&(e.preventDefault(),Backbone.history.navigate(t.attr,!0))};$(document).off("click","a[href]:not([data-bypass])"),$(document).on("click","a[href]:not([data-bypass])",e)},100),this.header.noReset?this.header.resetMenuButton():this.header.reset(),this.header.noReset=!1}),OnShift.RouterObj=n,OnShift.Utils.queryPushNotificationDb(),OnShift.Utils.cordovaHelper("WaitingDialog","hide",""),this.start(),$("#btnCalendar").click(),setTimeout(function(){OnShift.TransitionEnabled=!0},500),$("body").addClass("in-app")},this))},o.prototype.start=function(){Backbone.History.started?console.log("Dont restart backbone history"):typeof window.history.pushState=="undefined"?Backbone.history.start({pushState:!1}):Backbone.history.start({pushState:!0})},o.prototype.stop=function(){Backbone.history.stop()},_.extend(o.prototype,r),o}),define("appcontroller",[],function(){function n(){OnShift.CurrentRoute="login",OnShift.DeviceVersion=device.version,e.initClickHandlers(),cordova.exec(function(t){var n=$.parseJSON(t);OnShift.username=n.user_name,OnShift.API_SERVER_URL=n.apiURL,OnShift.AUTH_SERVER_URL=n.authURL,OnShift.deviceType=n.deviceType,OnShift.AppVersion=n.appVersion;var r=n.userJson;e.parseUserData(r)},function(e){console.log("Error: "+e)},"OSPlugin","getappconfig",[""]),parseFloat(OnShift.DeviceVersion)>=4.1&&FastClick.attach(document.body),document.addEventListener("backbutton",e.backKeyDown,!1),document.addEventListener("menubutton",e.onMenuKeyDown,!1),document.addEventListener("offline",e.deviceWentOffline,!1),document.addEventListener("online",e.deviceOnline,!1),document.addEventListener("pause",e.onPause,!1),document.addEventListener("resume",e.onResume,!1),(OnShift.DeviceVersion==="4.0.4"||OnShift.DeviceVersion==="4.0.3")&&$("body").append('<link rel="stylesheet" type="text/css" href="css/android-fonts.css">')}var e,t=function(){e=this,FastClick.attach(document.body),document.addEventListener("deviceready",n,!1)};return t.prototype.initClickHandlers=function(){$(".user-name").click(function(e){e.preventDefault()}),$(".navbar-text pull-right").click(function(e){e.preventDefault()}),$("#sectionTitle").click(function(e){e.preventDefault()}),$("#btnTutorial").off("click").on("click",function(e){OnShift.CurrentRoute=="messages"?($("body").bind("touchmove",function(e){e.preventDefault()}),$("#dvMainApp").addClass("hidden"),$("#dvMessages").removeClass("hidden")):OnShift.CurrentRoute=="availableShifts"?($("body").bind("touchmove",function(e){e.preventDefault()}),$("#dvMainApp").addClass("hidden"),$("#dvShifts").removeClass("hidden")):OnShift.Utils.cordovaHelper("OSPlugin","startTutorial","")}),$("#btnMessagesDone").off("click").on("click",function(e){$("body").unbind("touchmove"),$("#dvMainApp").removeClass("hidden"),$("#dvMessages").addClass("hidden")}),$("#btnShiftsDone").off("click").on("click",function(e){$("body").unbind("touchmove"),$("#dvMainApp").removeClass("hidden"),$("#dvShifts").addClass("hidden")});var e;setTimeout(function(){$("#basic-dropdown").css("height","400px"),e=new iScroll("basic-dropdown",{momentum:!1,bounce:!1,hScrollbar:!1,vScrollbar:!1,checkDOMChanges:!0})},100)},t.prototype.parseUserData=function(t){window.localStorage.getItem("showTutorial")===null&&window.localStorage.setItem("showTutorial","true"),window.localStorage.setItem("OnShiftUSER",t),OnShift.USER=$.parseJSON(t),e.startApplication()},t.prototype.startApplication=function(){var e=new OnShift.App(".page-content");OnShift.MainApp=e,e.run(),OnShift.Utils.cordovaHelper("OSPlugin","unlock","")},t.prototype.onMenuKeyDown=function(){OnShift.Utils.cordovaHelper("OSPlugin","show","")},t.prototype.backKeyDown=function(){if($(".dwb.dwb1.dwb-e").length>0)$(".dwb.dwb1.dwb-e").click();else{var e=OnShift.CurrentRoute;e==="calendar"||e==="defaultRoute"||e==="login"?navigator.app.exitApp():window.history.back()}},t.prototype.deviceWentOffline=function(){OnShift.Utils.cordovaHelper("WaitingDialog","show","A network connection is required for this application.\n\nNormal operation will continue when the network is available.")},t.prototype.deviceOnline=function(){OnShift.Utils.cordovaHelper("WaitingDialog","hide","")},t.prototype.onPause=function(){OnShift.TransitionEnabled=!1,parseFloat(OnShift.DeviceVersion)>=4&&Backbone.history.stop()},t.prototype.onResume=function(){parseFloat(OnShift.DeviceVersion)>=4&&(Backbone.History.started||(typeof window.history.pushState=="undefined"?Backbone.history.start({pushState:!1}):Backbone.history.start({pushState:!0})),setTimeout(function(){OnShift.TransitionEnabled=!0},500))},t}),function(e){function t(e){return _.object(["hours","minutes"],_.map(e.split(":"),function(e){return Number(e)}))}e.OnShift?OnShift=e.OnShift:OnShift=e.OnShift={},OnShift.CSRF_TOKEN=function(){var e=$("<span></span>"),t=$("<input type='hidden' name='csrfmiddlewaretoken' value='' />");return t.val($("meta[name=csrf-token]").attr("content")),e.append(t),e.html()},OnShift.addSpinner=function(e,t){var n=$("<div class='os-spinner'><div id='Spinner'></div><h4>"+t+"<h4>"+"</div>");return $(e).append(n),n},OnShift.getUTCTimestamp=function(e){return Math.floor((new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())).getTime()/1e3)},OnShift.dateTimeCombine=function(e,n){n=t(n);var r=e.clone();return r.addHours(n.hours),r.addMinutes(n.minutes),r}}(window);var domReady=function(){this.domReady(function(){require(["app","appcontroller","utils"],function(e,t,n){function i(){$(".menu-toggle").on("click",function(e){n.cordovaHelper("OSPlugin","show","")})}var r=function(e){var t={prop:$(this).prop("href"),attr:$(this).attr("href")},n=window.location.protocol+"//"+window.location.host+"/";t.prop.slice(0,n.length)===n&&(e.preventDefault(),Backbone.history.navigate(t.attr,!0))};$(document).on("click","a[href!=#]:not([data-bypass])",r),Backbone.emulateJSON=!0,i(),OnShift.App=e,OnShift.Utils=n;var s=new t;$.event.trigger({type:"DocReady"}),OnShift.DocReady=!0})})};require(["common"],function(e){Backbone.ajax=function(){var e=arguments[0].url;return parseFloat(OnShift.DeviceVersion)<4?e.indexOf("/rest")===0?arguments[0].url=OnShift.API_SERVER_URL+e+"?time="+$.now():e.indexOf("/api")===0&&(arguments[0].url=OnShift.DJANGO_SERVER_URL+e+"?time="+$.now()):e.indexOf("/rest")===0?arguments[0].url=OnShift.API_SERVER_URL+e:e.indexOf("/api")===0&&(arguments[0].url=OnShift.DJANGO_SERVER_URL+e),Backbone.$.ajax.apply(Backbone.$,arguments)},$.i18n.init({resGetPath:"static/locale/__lng__/__ns__.json",ns:{namespaces:["app"],defaultNs:"app"}},_.bind(domReady,e))}),define("main",function(){}),define("views/terminated",["layout"],function(e){var t=e.extend({className:"terminated",template:Handlebars.compile("<a href='/account/employee/{{id}}/unlink'><p><span class='account-link-unstyled'>Your account with {{orgName}} has been terminated. </span><span class='account-link'>Unlink your account</span><span class='account-link-unstyled'> before linking to a new employer.</span></a>"),serialize:function(){return _.extend(OnShift.employee.toJSON(),{orgName:OnShift.employee.organization.get("name")})}});return t}),define("views/org_disabled",["layout","utils"],function(e,t){var n=e.extend({className:"org-disabled",template:Handlebars.compile("<p>The {{orgName}} account has been suspended by OnShift. </p><p>There is no problem with your account. However, you will not have full access to your account information.</p><p>For more information, please leave a message with <a href='#'>customer support</a> or contact your scheduler at {{orgName}}."),events:{click:"handleClick"},handleClick:function(e){e.stopPropagation(),t.cordovaHelper("OSPlugin","showEmailComposer","")},serialize:function(){return _.extend(OnShift.employee.toJSON(),{orgName:OnShift.employee.organization.get("name")})}});return n}),define("text!pages/account/templates/section.html",[],function(){return'<a href="{{ linkTo }}" {{#if doDisable}}disabled{{/if}}>\n    <div class="title">\n        <label>{{ title }}</label>\n    </div>\n    <div class="description">\n        <p>{{ description }}</p>\n    </div>\n</a>\n'}),define("pages/account/views/sections",["layout","lib/views/collection","text!pages/account/templates/section.html"],function(e,t,n){var r=e.extend({tagName:"li",className:"section",events:{"click a.disabled":"handleDisabled","click a[disabled]":"handleDisabled"},template:Handlebars.compile(n),handleDisabled:function(e){return e.preventDefault(),!1}}),i=t.extend({tagName:"ul",className:"sections",defaults:{ElementView:r}});return i}),define("views/back_button",[],function(){return{callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")}}),define("pages/account/views/main",["layout","pages/account/views/sections","views/back_button","config"],function(e,t,n,r){var i=new r,s=e.extend({className:"account-main",template:Handlebars.compile("<ul class='sections'></ul>"),initialize:function(n){e.prototype.initialize.call(this,n),this.sections=new Backbone.Collection([{title:"Personal Info",description:"Your personal information",linkTo:"/account/profile"}]),this.sections.add({title:"Account Settings",description:"Your user name and password",linkTo:"/account/settings"}),this.sections.add({title:"Employee Preferences",description:"Your work preferences, including availability, communications and do-not-disturb times",linkTo:"/account/employee"}),this.sectionsView=new t({collection:this.sections}),this.registerView(this.sectionsView,{anchor:".sections",replace:!0})},afterRender:function(){this.$el.append(this.sectionsView.el),this.notifyTitle("Profile"),this.notifyActivate("account")}});return s}),define("text!pages/account/templates/profile.html",[],function(){return'<form>\n  <fieldset>\n    <div class="row">\n      <div class="col-xs-12">\n        <legend>Personal Info</legend>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label for="firstNameInput">First Name</label>\n          <input id="first_name" type="text" class="form-control removeDouble" name="first_name" value="{{ first_name }}" />\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label>Last Name</label>\n          <input type="text" id="last_name" class="form-control removeDouble" name="last_name" value="{{ last_name }}" />\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n         <div class="row">\n           <div class="col-xs-12">\n             <label>Mobile Number</label>\n             <input type="text" id="mobile_number" class="form-control removeDouble"\n                    placeholder="555-555-5555" name="mobile_number" value="{{ mobile_number }}" {{#if lockedMobileNumber}}disabled{{/if}}/>\n           </div>\n         </div>\n       </div>\n       <div class="form-group">\n         <div class="row">\n           <div class="col-xs-12">\n             <label>Home Number</label>\n             <input type="text" id="home_number" class="form-control removeDouble"\n                    placeholder="555-555-5555" name="home_number" value="{{ home_number }}" {{#if lockedHomeNumber}}disabled{{/if}}/>\n           </div>\n         </div>\n       </div>\n       <div class="form-group">\n         <div class="row">\n           <div class="col-xs-12">\n             <label>Email</label>\n             <input type="text" id="comm_email" class="form-control removeDouble"\n                 placeholder="Email address" name="comm_email" value="{{ email }}"\n{{#if lockedEmail}}disabled{{/if}}/>\n           </div>\n         </div>\n       </div>\n  </fieldset>\n  <!--<fieldset>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label for="emailInput">Personal Email Address (Used for login)</label>\n          <input id="emailInput" type="email" class="form-control removeDouble" name="email" value="{{ email }}" readonly />\n        </div>\n      </div>\n 	  <div class="row">\n         <div class="col-xs-6">\n           <a href="/account/profile/username">Change email</a>\n         </div>\n         <div class="col-xs-6">\n           <label>\n             <input type="checkbox" name="allow_email_updates" {{#if allow_email_updates}}checked="checked"{{/if}} />\n                 Allow email updates from OnShift\n           </label>\n         </div>\n       </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label>Password</label>\n          <input type="password" class="form-control removeDouble" name="dummy_pword" value="***********" readonly />\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-xs-12">\n          <a href="/account/profile/password">Change password</a>\n        </div>\n      </div>\n    </div>\n  </fieldset>-->\n  <fieldset>\n    <div class="row">\n      <div class="col-xs-12">\n        <legend>Address</legend>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label for="street">Street Address</label>\n          <input id="street" type="text" class="form-control removeDouble" name="street" value="{{ street }}" />\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label for="street2">Apt</label>\n          <input id="street2" type="text" class="form-control removeDouble" name="street2" value="{{ street2 }}" />\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-12">\n          <label for="city">City</label>\n          <input id="city" type="text" class="form-control removeDouble" name="city" value="{{ city }}" />\n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="row">\n        <div class="col-xs-6">\n          <label for="state">State</label>\n          <select id="state" class="form-control">\n            {{#select state}}\n            <option></option>\n            <option value="AL">Alabama</option>\n            <option value="AK">Alaska</option>\n            <option value="AZ">Arizona</option>\n            <option value="AR">Arkansas</option>\n            <option value="CA">California</option>\n            <option value="CO">Colorado</option>\n            <option value="CT">Connecticut</option>\n            <option value="DE">Delaware</option>\n            <option value="DC">District Of Columbia</option>\n            <option value="FL">Florida</option>\n            <option value="GA">Georgia</option>\n            <option value="HI">Hawaii</option>\n            <option value="ID">Idaho</option>\n            <option value="IL">Illinois</option>\n            <option value="IN">Indiana</option>\n            <option value="IA">Iowa</option>\n            <option value="KS">Kansas</option>\n            <option value="KY">Kentucky</option>\n            <option value="LA">Louisiana</option>\n            <option value="ME">Maine</option>\n            <option value="MD">Maryland</option>\n            <option value="MA">Massachusetts</option>\n            <option value="MI">Michigan</option>\n            <option value="MN">Minnesota</option>\n            <option value="MS">Mississippi</option>\n            <option value="MO">Missouri</option>\n            <option value="MT">Montana</option>\n            <option value="NE">Nebraska</option>\n            <option value="NV">Nevada</option>\n            <option value="NH">New Hampshire</option>\n            <option value="NJ">New Jersey</option>\n            <option value="NM">New Mexico</option>\n            <option value="NY">New York</option>\n            <option value="NC">North Carolina</option>\n            <option value="ND">North Dakota</option>\n            <option value="OH">Ohio</option>\n            <option value="OK">Oklahoma</option>\n            <option value="OR">Oregon</option>\n            <option value="PA">Pennsylvania</option>\n            <option value="RI">Rhode Island</option>\n            <option value="SC">South Carolina</option>\n            <option value="SD">South Dakota</option>\n            <option value="TN">Tennessee</option>\n            <option value="TX">Texas</option>\n            <option value="UT">Utah</option>\n            <option value="VT">Vermont</option>\n            <option value="VA">Virginia</option>\n            <option value="WA">Washington</option>\n            <option value="WV">West Virginia</option>\n            <option value="WI">Wisconsin</option>\n            <option value="WY">Wyoming</option>\n            {{/select}}\n          </select>\n        </div>\n        <div class="col-xs-6">\n          <label for="zip_code">Zip</label>\n          <input id="zip_code" type="number" class="form-control removeDouble" name="zip_code" value="{{ zip_code }}" />\n        </div>\n      </div>\n    </div>\n  </fieldset>\n  <button type="submit" class="btn btn-lg btn-primary btn-block">Save</button>\n</form>\n\n<!-- vim:filetype=htmldjango:ts=2:sw=2:\n-->\n'}),define("pages/account/views/profile",["layout","views/system_alert","text!pages/account/templates/profile.html","views/back_button","config","common"],function(e,t,n,r,i){var s=new i,o=function(e){return e.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")},u=e.extend({className:"profile-main",template:Handlebars.compile(n),events:{"submit form":"saveUserInfo"},initialize:function(t){e.prototype.initialize.call(this,t)},saveUserInfo:function(e){e.preventDefault();var n=$("#mobile_number").val().replace(/\D/g,""),r=$("#home_number").val().replace(/\D/g,""),i=$("#comm_email").val(),s=!1;[n,r].forEach(function(e){e&&e.length!==10&&(s=!0)});if(s){var u=new t({message:"Invalid phone number, please enter a ten digit number",type:"danger"});return u.render(),!1}n=o(n),r=o(r);var a=$("#street").val(),f=$("#street2").val(),l=$("#city").val(),c=$("#state").val(),h=$("#zip_code").val();if(h&&!/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(h)){var p=new t({message:"Invalid zip code, please enter a valid zip code",type:"danger"});return p.render(),!1}if(i&&!/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(i)){var d=new t({message:"Invalid email, please enter a valid email",type:"danger"});return d.render(),!1}this.options.user.save({first_name:$("#first_name").val(),last_name:$("#last_name").val(),mobilenumber:n,homenumber:r,email_address:i,address_street:a,address_apt_num:f,address_city:l,address_state:c,address_zip:h},{error:function(e,t){console.log(t),console.log(t.responseText)}}).done(function(e){require(["views/system_alert"],_.bind(function(e){var t=new e({message:"Personal information updated"});t.render()})),OnShift.USER.first_name=$("#first_name").val(),OnShift.USER.last_name=$("#last_name").val(),OnShift.USER.mobilenumber=n,OnShift.USER.homenumber=r,OnShift.USER.email=i,OnShift.USER.address_street=a,OnShift.USER.address_apt_num=f,OnShift.USER.address_city=l,OnShift.USER.address_state=c,OnShift.USER.address_zip=h,window.localStorage.setItem("OnShiftUSER",JSON.stringify(OnShift.USER))})},afterRender:function(){OnShift.Utils.cordovaHelper("WaitingDialog","hide",""),this.notifyTitle("Profile"),this.notifyActivate("account");var e=this;this.notifyMenuButton({callback:function(){$("#btnAccount").click()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},serialize:function(){var e=!0;return OnShift.deviceType.indexOf("HTC")!==-1&&(e=!1),{notHTC:e,first_name:OnShift.USER.first_name,last_name:OnShift.USER.last_name,mobile_number:OnShift.USER.mobilenumber,home_number:OnShift.USER.homenumber,email:OnShift.USER.email,allow_email_updates:OnShift.USER.allow_email_updates,street:OnShift.USER.address_street,street2:OnShift.USER.address_apt_num,city:OnShift.USER.address_city,state:OnShift.USER.address_state,zip_code:OnShift.USER.address_zip,lockedHomeNumber:!s.get("emp_can_modify_home_number"),lockedMobileNumber:!s.get("emp_can_modify_mobile_number"),lockedEmail:!s.get("emp_can_modify_email_address")}}});return u}),define("text!pages/account/templates/settings.html",[],function(){return'<form>\n  <fieldset>\n    <div class="row">\n      <div class="col-xs-12">\n        <legend>Account Settings</legend>\n      </div>\n    </div>\n   <div class="form-group">\n     <div class="row">\n       <div class="col-xs-12">\n         <label for="username">User name</label>\n         <input id="username" type="text" class="form-control" name="username" value="{{ username }}" readonly />\n       </div>\n     </div>\n     <div class="row">\n       <div class="col-xs-6">\n           {{#if lockedUsername}}\n               <a href="/account/settings/username">Change user name</a>\n           {{/if}}\n       </div>\n     </div>\n   </div>\n   <div class="form-group">\n     <div class="row">\n       <div class="col-xs-12">\n         <label>Password</label>\n         <input type="password" class="form-control" name="dummy_pword" value="***********" readonly />\n       </div>\n     </div>\n     <div class="row">\n       <div class="col-xs-12">\n         <a href="/account/settings/password">Change password</a>\n       </div>\n     </div>\n   </div>\n</fieldset>\n</form>'}),define("pages/account/views/settings",["layout","text!pages/account/templates/settings.html","views/back_button","config","common"],function(e,t,n,r){var i=new r,s=e.extend({className:"settings-main",template:Handlebars.compile(t),initialize:function(t){e.prototype.initialize.call(this,t)},afterRender:function(){OnShift.Utils.cordovaHelper("WaitingDialog","hide",""),this.notifyTitle("Account Settings"),this.notifyActivate("account"),this.notifyMenuButton({callback:function(){$("#btnAccount").click()},template:Handlebars.compile("<span class='glyphicon btn-link icon-prev'></span>")})},serialize:function(){return{username:OnShift.username,lockedUsername:i.get("emp_can_modify_username")}}});return s}),define("text!pages/account/templates/username.html",[],function(){return'{{{csrf_token}}}\n<fieldset>\n    <legend>Change username</legend>\n    <div class="form-group">\n        <label>Your current username is</label>\n        <input type="hidden" name="user_id" class="form-control" value={{user_id}} />\n        <input type="hidden" name="user_name_type" class="form-control" value={{user_name_type}} />\n        <input type="text" name="old_user_name" id="old_user_name" class="form-control {{#if notHTC}}removeDouble{{/if}}" value={{user_name}} readonly />\n    </div>\n    <div class="form-group has-feedback">\n        <label>Type a new username</label>\n        <input type="text" name="user_name" id="user_name" class="form-control {{#if notHTC}}removeDouble{{/if}}" placeholder="user name/email" required />\n        <i class="indicator osicon form-control-feedback"></i>\n        <p class="help-block">Your username is visible to managers</p>\n    </div>\n    <div class="form-group">\n        <button type="submit" disabled>Change username</button>\n    </div>\n</fieldset>'}),define("text!templates/modal.html",[],function(){return'<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header"> </div> <!--//modal-header-->\n        <div class="modal-body"> </div> <!--//modal-body-->\n        <div class="modal-footer"> </div> <!--//modal-footer-->\n    </div> <!--//modal-content-->\n</div> <!--//modal-dialog-->'}),define("views/confirm",["layout","text!templates/modal.html"],function(e,t){var n=e.extend({tagName:"div",className:"modal-header",template:Handlebars.compile("<h4 class='modal-title'>{{ title }}</h4>"),initialize:function(t){e.prototype.initialize.call(this,t),this.headerClose=null,t.showHeaderClose&&(this.headerClose=new(e.extend({tagName:"button",className:"close",template:Handlebars.compile("&times;"),attributes:{"data-dismiss":"modal","aria-hidden":!0,type:"button"}})),this.registerView(this.headerClose))},afterRender:function(){this.headerClose&&this.$el.prepend(this.headerClose.el)},serialize:function(){return{title:this.options.title}}}),r=e.extend({tagName:"div",className:"modal-footer",initialize:function(t){e.prototype.initialize.call(this,t),this.options.cancelButtonText&&(this.cancelButton=new(e.extend({tagName:"button",className:"btn btn-default",template:Handlebars.compile("{{label}}"),attributes:{"data-dismiss":"modal",type:"button"},serialize:function(){return{label:t.cancelButtonText}}})),this.registerView(this.cancelButton)),this.confirmButton=new(e.extend({tagName:"button",className:"btn btn-primary",template:Handlebars.compile("{{label}}"),attributes:{id:"confirm",type:"button"},events:{click:"clickHandler"},clickHandler:_.bind(t.confirmClickHandler,this),serialize:function(){return{label:t.confirmButtonText}}})),this.registerView(this.confirmButton)},hideParent:function(){this.trigger("hide",this)},afterRender:function(){this.cancelButton&&this.$el.append(this.cancelButton.el),this.$el.append(this.confirmButton.el)}}),i=e.extend({tagName:"div",className:"modal fade",attributes:{role:"dialog","aria-labelledby":"modalLabel","aria-hidden":"true","data-backdrop":"static","data-keyboard":"true",tabindex:"-1"},template:Handlebars.compile(t),defaults:{title:"",showHeaderClose:!0,body:new e,confirmButtonText:"OK",confirmClickHandler:function(){}},initialize:function(t){e.prototype.initialize.call(this,t),this.header=new n(t),this.footer=new r(t),this.registerView(this.header,{anchor:".modal-header",replace:!0}),this.registerView(this.options.body,{anchor:".modal-body"}),this.registerView(this.footer,{anchor:".modal-footer",replace:!0}),this.on("hide",function(){this.hide()},this)},render:function(){return e.prototype.render.call(this),this},show:function(){return this.render().$el.modal({show:!0}),this},hide:function(){return this.$el.modal("hide"),this}});return i}),define("pages/account/views/username",["layout","text!pages/account/templates/username.html"],function(e,t){var n=e.extend({tagName:"form",attributes:{action:OnShift.AUTH_SERVER_URL+"/api/v1.0/user/change_username",method:"POST",role:"form"},className:"profile-username",events:{submit:"handleSubmit","keyup #user_name":"checkIfUsernameAvailable"},template:Handlebars.compile(t),afterRender:function(){this.notifyTitle("Account Settings"),this.notifyActivate("account"),this.notifyMenuButton({callback:function(){$("#btnAccountSettings").click()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},checkIfUsernameAvailable:_.debounce(function(e){var t=/^[.@a-zA-Z0-9-]+$/;$(e.currentTarget).val().length>5?!/\s/.test($(e.currentTarget).val())&&t.test($(e.currentTarget).val())?$.ajax({url:OnShift.AUTH_SERVER_URL+"/api/v1.0/user/check_username",type:"GET",data:{user_name:$(e.currentTarget).val(),user_name_type:OnShift.USER.user_name_type},success:function(e){e.STATUS==="AVAILABLE"?($(":submit").prop("disabled",!1),$("i.indicator").removeClass("osicon--x").addClass("osicon--check")):($(":submit").prop("disabled",!0),$("i.indicator").removeClass("osicon--check").addClass("osicon--x"))},error:function(){$(":submit").prop("disabled",!0),$("i.indicator").removeClass("osicon--check").addClass("osicon--x")}}):($(":submit").prop("disabled",!0),$("i.indicator").removeClass("osicon--check").addClass("osicon--x")):($(":submit").prop("disabled",!0),$("i.indicator").removeClass("osicon--check").removeClass("osicon--x"))},500),handleSubmit:function(e){e.preventDefault(),$.ajaxSetup({crossDomain:!0}),$.ajax({url:this.$el.attr("action"),type:"POST",data:this.$el.serialize(),success:_.bind(function(e,t,n){var r=_.uniqueId("context"),i=_.uniqueId("main");define(r,e),define(i,this),require(["views/confirm","layout",r,i],function(e,t,n,r){var i=new(t.extend({template:Handlebars.compile("<p>User name was successfully updated</p>")})),s=new e({title:"User name change",body:i,confirmButtonText:"Ok",confirmClickHandler:function(e){this.hideParent(),OnShift.username=$("#user_name").val(),OnShift.Utils.cordovaHelper("OSPlugin","updateusername",OnShift.username),$("#btnAccountSettings").click()}});s.show()})},this),error:_.bind(function(e,t,n){Raven.captureException("Version "+OnShift.AppVersion+": username change error - "+JSON.stringify(n)),require(["views/confirm","layout"],function(t,n){var r=new(n.extend({template:Handlebars.compile(e.responseJSON)})),i=new t({title:"Error",body:r,confirmButtonText:"Ok",confirmClickHandler:function(e){this.hideParent()}});i.show()})},this)})},serialize:function(){var e=!0;return OnShift.deviceType.indexOf("HTC")!==-1&&parseFloat(OnShift.DeviceVersion)<4&&(e=!1),{user_id:OnShift.USER.id,user_name:OnShift.username,user_name_type:OnShift.USER.user_name_type,notHTC:e}}});return n}),define("text!pages/account/templates/password.html",[],function(){return'<fieldset>\n  <div class="row">\n    <div class="col-xs-12">\n      <legend>Change password</legend>\n    </div>\n  </div>\n  <div class="dv-alert form-group hidden">\n      <div class="row">\n        <div class="col-xs-12">\n            <i class="osicon osicon--warning"><span class="alert-text"></span></i>\n        </div>\n      </div>\n  </div>\n  <p>Your new password must contain at least six characters, including at least one number,\n      one upper case character, and one lower case character.</p>\n  <div class="form-group">\n    <div class="row">\n      <div class="col-xs-12">\n        <label>New password</label>\n        <input type="hidden" name="user_id" class="form-control" value={{user_id}} />\n        <input type="hidden" name="user_name_type" class="form-control" value={{user_name_type}} />\n        <input type="password" class="form-control {{#if notHTC}}removeDouble{{/if}}" required name="password" id="password" placeholder="Type your new password" />\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="row">\n      <div class="col-xs-12">\n        <label>Confirm new password</label>\n        <input type="password" class="form-control {{#if notHTC}}removeDouble{{/if}}" required name="confirm_password" id="confirm_password" placeholder="Confirm your new password" />\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12">\n      <input type="submit" class="main-btn" value="Change Password" />\n    </div>\n  </div>\n</fieldset>'}),define("pages/account/views/password",["layout","views/system_alert","text!pages/account/templates/password.html","views/back_button","common"],function(e,t,n,r){var i=e.extend({template:Handlebars.compile(n),tagName:"form",className:"profile-password",attributes:{method:"POST",dataType:"json",action:OnShift.AUTH_SERVER_URL+"/api/v1.0/user/change_password"},events:{submit:"handleSubmit"},handleSubmit:function(e){e.stopPropagation(),e.preventDefault();var t=$("#password").val(),n=$("#confirm_password").val(),r=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#\$%\^\&*\)\(+=._-]{6,}$/;t.length>=6?t.match(r)?t===n?($(".dv-alert").addClass("hidden"),$("input[type=password]").removeClass("has-error"),this.updatePassword()):($(".alert-text").text("The two password fields didn't match"),$(".dv-alert").removeClass("hidden"),$("input[type=password]").addClass("has-error")):($(".alert-text").text("The new password must include at least one number, one upper case character, and one lower case character"),$(".dv-alert").removeClass("hidden"),$("input[type=password]").addClass("has-error")):($(".alert-text").text("The new password must be at least 6 characters long"),$(".dv-alert").removeClass("hidden"),$("input[type=password]").addClass("has-error"))},updatePassword:function(){$.ajax({url:this.$el.attr("action"),type:"POST",data:this.$el.serialize(),success:_.bind(function(e,t,n){var r=_.uniqueId("context"),i=_.uniqueId("main");define(r,e),define(i,this),require(["views/confirm","layout",r,i],function(e,t,n,r){var i=new(t.extend({template:Handlebars.compile("<p>Password was successfully updated</p>")})),s=new e({title:"Password change",body:i,confirmButtonText:"Ok",confirmClickHandler:function(e){this.hideParent(),$("#btnAccountSettings").click()}});s.show()})},this),error:_.bind(function(e,t,n){require(["views/confirm","layout"],function(t,n){var r=new(n.extend({template:Handlebars.compile(e.responseJSON)})),i=new t({title:"Error",body:r,confirmButtonText:"Ok",confirmClickHandler:function(e){this.hideParent()}});i.show()})},this)})},afterRender:function(){this.notifyTitle("Profile"),this.notifyActivate("account"),this.notifyMenuButton({callback:function(){$("#btnAccount").click()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},serialize:function(){var e=!0;return OnShift.deviceType.indexOf("HTC")!==-1&&parseFloat(OnShift.DeviceVersion)<4&&(e=!1),{user_id:OnShift.USER.id,user_name_type:OnShift.USER.user_name_type,notHTC:e}}});return i}),define("text!pages/account/templates/event_form.html",[],function(){return'<fieldset>\n    <div class="form-group">\n        <label class="control-label">Label</label>\n        <div class="event-value">\n            <input type="text" class="form-control removeDouble" name="name" placeholder="{{namePlaceHolder}}" value="{{name}}" />\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <div id="starting" class="form-group">\n        <label class="control-label">Starts</label>\n        <div class=\'event-value\'>\n            <input type="text" class="form-control" name="start_day"  placeholder="mm/dd/yyyy" value="{{start_day}} {{start_time}}" />\n            <span class="help-block"></span>\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <div id="ending" class="form-group">\n        <label class="control-label">Ends</label>\n        <div class=\'event-value\'>\n            <input type="text" class="form-control" name="stop_day"  placeholder="mm/dd/yyyy" value="{{stop_day}} {{stop_time}}" />\n            <span class="help-block"></span>\n        </div>\n    </div>\n</fieldset>\n\n<div class="form-group">\n    <div class=\'event-value event-value-block\'>\n        <div class="radio">\n            <label>\n                <input type="radio" name="repeatRadios" value="0" {{#eq repeatDays 0}}checked{{/eq}} />\n                Never repeats\n            </label>\n        </div>\n        <div class="radio">\n            <label>\n                <input type="radio" name="repeatRadios" value="1" {{#eq repeatDays 1}}checked{{/eq}} />\n                Repeats every day\n            </label>\n        </div>\n        <div class="radio">\n            <label>\n                <input type="radio" name="repeatRadios" value="7" {{#eq repeatDays 7}}checked{{/eq}} />\n                Repeats every week\n            </label>\n        </div>\n        <div class="radio">\n            <label>\n                <input type="radio" name="repeatRadios" value="?" {{#if regularInterval}} {{else}}checked{{/if}}/>\n                Repeats every <input type="number" class="form-control removeDouble" id="repeatDayValue" name="repeats"\n                                    value="{{repeatDays}}" {{#if regularInterval}}disabled{{/if}}> days\n            </label>\n        </div>\n    </div>\n</div>\n\n<div class="form-group">\n    <div class="buttons">\n        <button class="submit-btn" type="submit">Save</button>\n        {{#if showDelete}}\n        <button class="delete delete-btn" type="button">Delete</button>\n        {{/if}}\n        <button class="cancel cancel-btn" type="button">Cancel</button>\n    </div>\n</div>'}),define("pages/account/views/event_form",["layout","lib/models/event","text!pages/account/templates/event_form.html","utils"],function(e,t,n,r){var i=e.extend({tagName:"form",template:Handlebars.compile(n),className:"event-form form-horizontal",initialize:function(n){e.prototype.initialize.call(this,n),this.eventTypeName=n.eventTypeName,this.namePlaceHolder=n.namePlaceHolder||"",this.eventType=n.eventType,this.showDelete=n.showDelete,this.event=n.event,!this.event&&n.eventID?(this.event=new t({id:n.eventID}),this.listenTo(this.event,"sync",this.render,this),this.event.fetch()):!this.event&&!this.eventID&&(this.event=n.event||new t({event_typeID:OnShift.eventTypes.findWhere({name:this.eventType}).id})),this.$el.attr("action","/account/employee/"+this.model.id+"/event_list/"+this.eventTypeName.toLowerCase()),this.$el.attr("role","form")},events:{"change input[name=repeats]":"handleRepeatChange","change input[name=name]":"handleNameChange","change input[name=start_day]":"handleStartDayChange","change input[name=stop_day]":"handleStopDayChange","change input[name=repeatRadios]":"handleRepeatRadioChange","click button.cancel":"handleCancelClick","click button.delete":"handleDeleteClick",submit:"handleSubmit"},handleRepeatChange:function(e){var t=Number($(e.target).val());t<0&&($("input[name=repeats]").val(0),t=0),this.event.setRepeatInterval(t*60*60*24)},handleNameChange:function(e){this.event.set("name",e.target.value)},handleRepeatRadioChange:function(e){var t=e.target.value,n=$("#repeatDayValue");t!=="?"?(n.val(t),this.event.setRepeatInterval(Number(t)*60*60*24),n.prop("disabled","disabled")):n.prop("disabled",!1)},validateDates:function(){var e=Date.parse($("input[name=start_day]",this.el).val()),t=Date.parse($("input[name=stop_day]",this.el).val());return e>=t?(this.addWarning($("#starting",this.el),"The start time must be before ending time."),!1):t<e?(this.addWarning($("#ending",this.el),"The ending time must be after the start time."),!1):(this.removeWarning($("#starting",this.el)),this.removeWarning($("#ending",this.el)),!0)},handleStartDayChange:function(e){this.validateDates();var t=$(e.target),n=Date.parse(t.val());this.event.setStartDateTime(n)},handleStopDayChange:function(e){this.validateDates();var t=$(e.target),n=Date.parse(t.val());this.event.setStopDateTime(n)},handleCancelClick:function(e){window.history.back()},handleDeleteClick:function(e){e.preventDefault(),require(["views/confirm","layout"],_.bind(function(e,t){var n=new(t.extend({template:Handlebars.compile("<p>Are you sure you want to delete this time period?</p>")})),r=new e({title:"Really delete?",body:n,confirmButtonText:"Yes",cancelButtonText:"No",confirmClickHandler:_.bind(function(e){this.event.destroy({success:_.bind(function(e,t,n){var i=this;require(["views/system_alert"],function(t){var n=new t({message:""+e.get("name")+" has been deleted."});n.render(),r.hide(),i.trigger("navigate",i.$el.attr("action"))})},this)})},this)});r.show()},this))},handleSubmit:function(e){return e.preventDefault(),!this.event.get("name")&&this.eventTypeName!=="Blockout"&&this.event.set("name",this.namePlaceHolder),this._saveEvent(),!1},_saveEvent:function(){return this.event.save([],{success:_.bind(this.saveSuccessHandler,this),error:_.bind(this.saveErrorHandler,this)})},saveSuccessHandler:function(e,t,n){var r=this;require(["views/system_alert"],function(e){var t=new e({message:this.successMessage||""+r.event.get("name")+" saved."});t.render(),r.trigger("navigate",r.$el.attr("action"))})},saveErrorHandler:function(e,t,n){var r=this;Raven.captureException("Version "+OnShift.AppVersion+": cannot save event - "+JSON.stringify(t)),require(["views/system_alert"],function(e){var n=new e({message:t.responseJSON.errors.model.msg,type:"danger"});n.render()})},addWarning:function(e,t){e.addClass("has-warning"),$(".help-block",e).text(t)},removeWarning:function(e){e.removeClass("has-warning"),$(".help-block",e).text("")},afterRender:function(){var e={theme:"default",display:"bottom",mode:"mixed",minDate:Date.today().addDays(-2),dateFormat:"D, mm/dd/yy",timeFormat:"hh:ii A",stepMinute:15};setTimeout(function(){OnShift.DeviceVersion!="4.0.4"?$("input[name=stop_day], input[name=start_day]",this.el).mobiscroll().datetime(e):$("input[name=stop_day], input[name=start_day]",this.el).click(function(){OnShift.DatePicker=this,r.cordovaHelper("OSPlugin","showPicker","")}),$(document).off("click","a[href]:not([data-bypass])"),$(document).on("click","a[href]:not([data-bypass])",function(){return!1})},200);var t=document.location.href,n="Communication";t.indexOf("/availability")!=-1&&(n="Availability",t="communication"),t.indexOf("/blockout")!=-1&&(n="Do Not Disturb",t="communication"),this.notifyTitle(n),this.notifyActivate(t),this.notifyMenuButton({callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>"),title:n})},serialize:function(){var e=Math.floor(this.event.getRepeatInterval()/60/60/24),t=[0,1,7].indexOf(e)!==-1?!0:!1;return{name:this.event.get("name"),start_time:this.event.getStartDateTime().toString("h:mm tt"),start_day:this.event.getStartDateTime().toString("ddd, MM/dd/yyyy"),stop_time:this.event.getStopDateTime().toString("h:mm tt"),stop_day:this.event.getStopDateTime().toString("ddd, MM/dd/yyyy"),repeatDays:e,regularInterval:t,title:this.eventTypeName,namePlaceHolder:this.namePlaceHolder,showDelete:this.showDelete}}});return i}),define("mixins/restricted_data_handler",["mixins/error_handler"],function(e){var t=function(e,t,n){n.callback&&n.callback(),require([e],function(e){var r=new e(_.omit(n,["callback","consider"]));t.append(r.render().el)})},n={_handleRestrictedData:function(e,n,r){if(!e)return;if(!n)return;r||(r={model:this.model}),r.consider||(r.consider=["terminated","org_disabled"]);if(e.responseJSON&&e.responseJSON.data){var i=e.responseJSON.data||{};i.reason==="terminated"&&_.contains(r.consider,"terminated")?t("views/terminated",n,r):i.reason==="org_disabled"&&_.contains(r.consider,"org_disabled")?t("views/org_disabled",n,r):this._handleError()}return!1}};return _.extend(n,e),n}),define("text!pages/account/templates/event.html",[],function(){return"<a href=\"/account/employee/{{empId}}/event/{{eventTypeName}}/{{id}}\">\n<h4 class=\"wraptext\">{{name}}</h4>\n<div class=\"date-range\">from {{formatDate start \"h:mmtt\"}} to {{formatDate stop \"h:mmtt\"}}</div>\n{{#each metas}}\n{{#with this}}\n<div class='meta'>\n    <div class='starting'>\n    Starting <span class='date'>{{day}}</span>\n    </div>\n    <div class='repeats'>\n    Repeats <span class='repeats-message'>{{repeats}}</span>\n    </div>\n</div>\n{{/with}}\n{{/each}}\n</a>"}),define("pages/account/views/event_list",["layout","lib/views/collection","lib/collections/events","mixins/restricted_data_handler","text!pages/account/templates/event.html"],function(e,t,n,r,i){var s=e.extend({tagName:"li",template:Handlebars.compile(i),serialize:function(){var e=Date.parseExact(this.model.get("start_time"),"HH:mm:ss"),t=e.clone().addSeconds(this.model.get("interval")),n=_.map(this.model.get("metas"),function(e){var t=new Date(Number(e.repeat_day.meta_value)*1e3);t.addMinutes(t.getTimezoneOffset());var n=Number(e.interval.meta_value)/60/60/24;return{day:t.toString("ddd MMM dd"),repeats:n?"every "+(n===1?"day":n+" days"):"never"}}),r=OnShift.eventTypes.findWhere({id:this.model.get("event_typeID")}).get("name");return{start:e,stop:t,metas:n,name:this.model.get("name"),id:this.model.id,empId:this.options.employee.id,eventTypeName:r}}}),o=t.extend({tagName:"ul",ElementView:s,className:"events-list",afterRender:function(){this.fetch({reset:!0,data:{event_type:OnShift.eventTypes.findWhere({name:this.options.eventTypeName}).id},success:_.bind(function(e,t,n){e.length||this.$el.append($("<h5 class='info'><p>No time ranges have been created yet</p></h5>"))},this),error:_.bind(function(e,t,n){this._handleRestrictedData(t,this.$el,{model:this.model,callback:_.bind(function(){this.trigger("forbidden",t)},this)})},this)})},getViewArgs:function(e){return _.extend(t.prototype.getViewArgs.call(this,e),{employee:this.model})}});_.extend(o.prototype,r);var u=e.extend({className:"settings-events",template:Handlebars.compile("<h5 class='info'><strong>{{topMessage}}</strong></h5><div class='events-wrapper'></div><div class='buttons'><a href='/account/employee/{{id}}/event/{{eventType}}/new' type='button' class='new-range'>Create New Time Period</a></div>"),initialize:function(t){e.prototype.initialize.call(this,t),this.eventTypeName=t.eventTypeName,this.eventType=t.eventType,this.topMessage=t.topMessage,this.title=t.title;var r=new n;this.eventsView=new o({collection:r,model:this.model,eventTypeName:this.eventTypeName}),this.registerView(this.eventsView,{anchor:".events-wrapper",replace:!0}),this.on("forbidden",function(){$(".new-range",this.el).hide()},this)},afterRender:function(){this.notifyTitle(this.title),this.notifyActivate("account");var e=this;this.notifyMenuButton({callback:function(){e.trigger("navigate","/account/employee")},template:Handlebars.compile("<span class='btn-link icon-prev'></span>"),title:this.eventType+" preferences"})},serialize:function(){return _.extend(this.model.toJSON(),{eventType:this.eventTypeName,topMessage:this.topMessage})}});return u}),define("text!pages/account/templates/communication.html",[],function(){return'<form action=\'#\'>\n    <fieldset class=\'communication-method\'>\n        <hr />\n        <p>\n            {{#if noCommSetup}}\n            Visit your <a href="/account/profile">profile</a> first to set up communication methods.\n            {{else}}\n            Select your preferred way to receive messages from {{ orgName }}\n            {{/if}}\n        </p>\n        <div class="form-group">\n            <div class=\'radio\'>\n                <!--<label {{#if disablePush}}class="text-muted"{{/if}}>-->\n                <label>\n                    <input type=\'radio\' name=\'communication-method\' value=\'Push\' \n                            {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                            {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                            {{#eq preferredSendMethod "Push"}}checked="checked"{{/eq}} /> \n                           <!-- {{#if disablePush}}disabled="disabled"{{/if}} -->             \n                    Push notification\n                </label>\n            </div>\n        </div>\n        <div class=\'form-group\'>\n            <div class=\'radio\'>\n                <label {{#if disableSMS}}class="text-muted"{{/if}}>\n                    <input type=\'radio\' name=\'communication-method\' value=\'SMS\' \n                            {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                            {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                            {{#eq preferredSendMethod "SMS"}}checked="checked"{{/eq}}\n                            {{#if disableSMS}}disabled="disabled"{{/if}} />\n                    Text message to <span class=\'phone-number\'>{{mobileNumber}}</span>\n                </label>\n            </div>\n        </div>\n        <div class=\'form-group shortcode-input\'>\n            <label class="checkbox {{#if disablePreferred}}text-muted{{/if}} ">\n                <input type="checkbox" name="use_shortcode"\n                {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                {{#if useShortcode}}checked="checked"{{/if}}\n                {{#if disablePreferred}}disabled="disabled"{{/if}} />\n                Allow shortcodes for text messages\n            </label>\n        </div>\n        <div class=\'form-group\'>\n            <div class=\'radio\'>\n                <label {{#if disableIVR}}class="text-muted"{{/if}}>\n                    <input type=\'radio\' name=\'communication-method\' value=\'IVR\' \n                            {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                            {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                            {{#eq preferredSendMethod "IVR"}}checked="checked"{{/eq}}\n                            {{#if disableIVR}}disabled="disabled"{{/if}} />\n                    Phone call\n                </label>\n            </div>\n        </div>\n        <div class="form-group phone-destination">\n            <div class="radio">\n                <label {{#if disableHomeNumber}}class="text-muted"{{/if}}>\n                    <input type="radio" name="phone-destination" value="{{mobileNumber}}"\n                        {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                        {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                        {{#if disableHomeNumber}}disabled="disabled"{{/if}}\n                        {{#eq callDestination "mobile"}}checked="checked"{{/eq}} />\n                        to mobile number {{mobileNumber}}\n                </label>\n            </div>\n            <div class="radio">\n                <label {{#if disableMobileNumber}}class="text-muted"{{/if}}>\n                    <input type="radio" name="phone-destination" value="{{homeNumber}}"\n                        {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                        {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                        {{#if disableMobileNumber}}disabled="disabled"{{/if}}\n                        {{#eq callDestination "home"}}checked="checked"{{/eq}} />\n                        to home number {{homeNumber}}\n                </label>\n            </div>\n        </div>\n        <div class=\'form-group\'>\n            <div class=\'radio\'>\n                <label {{#if disableEmail}}class="text-muted"{{/if}}>\n                    <input type=\'radio\' name=\'communication-method\' value=\'email\' \n                            {{#if isDroidX}}style=\'margin:-10px 0 0;min-height:30px;min-width:30px;\'\n                            {{else}}style=\'min-height:30px;min-width:30px;\'{{/if}}\n                            {{#eq preferredSendMethod "email"}}checked="checked"{{/eq}}\n                            {{#if disableEmail}}disabled=\'disabled\'{{/if}} />\n                    Email <span class=\'email-address\'>{{email}}</span>\n                </label>\n            </div>\n        </div>\n        <div class="form-group submit">\n            <input type="submit" class="main-btn" value="Save">\n        </div>\n    </fieldset>\n</form>'}),define("pages/account/views/communication",["layout","lib/models/push_notification_token","mixins/restricted_data_handler","text!pages/account/templates/communication.html","config"],function(e,t,n,r,i){var s=new i,o=e.extend({className:"settings-communication",template:Handlebars.compile(r),events:{submit:"updateCommunication"},initialize:function(n){e.prototype.initialize.call(this,n),this.token=new t,this.listenTo(this.token,"sync",this.render),this.token.fetch()},updateCommunication:function(e){e.stopPropagation(),e.preventDefault();var t=$("input:radio[name=communication-method]:checked").val();t==="Push"&&OnShift.Utils.registerOrUpdatePushCommPreference(),this.model.set("preferred_send_methodID",OnShift.sendMethods.where({name:t})[0].id),this.model.set("fibityfoo_ivrnumber",$("input:radio[name=phone-destination]:checked").val()),this.model.set("use_shortcode",$("input[name=use_shortcode]").prop("checked")),this.model.save(null,{success:function(){require(["views/system_alert"],function(e){var t=new e({message:"Communication method updated"});t.render()})}})},serialize:function(){var e=this.model.get("homenumber")?this.model.get("homenumber"):"",t=this.model.get("mobilenumber")?this.model.get("mobilenumber"):"",n=this.model.get("fibityfoo_ivrnumber")?this.model.get("fibityfoo_ivrnumber"):"",r=t===n?"mobile":"home",i=OnShift.employee.get("preferred_send_methodID")?OnShift.sendMethods.get(OnShift.employee.get("preferred_send_methodID")).get("name"):"",o=this.token.keys().length>0,u=this.model.get("use_shortcode"),a=this.model.get("email_address");a=a?"to "+a:"";var f=!1;!t&&!e&&!o&&!a&&(f=!0);var l=!1;OnShift.deviceType.indexOf("DROIDX")!==-1&&(l=!0);var c=!s.get("emp_can_modify_preferred_communication_method"),h=!s.get("emp_can_modify_phone_call_destination"),p=!o||c,d=!a||c,v=!t||c,m=!t&&!e||c,g=!e||h,y=!t||h;return{email:a,mobileNumber:t,homeNumber:e,preferredSendMethod:i,callDestination:r,useShortcode:u,noCommSetup:f,isDroidX:l,displayName:this.model.displayName(),orgName:this.model.organization.get("name"),id:this.model.get("id"),disablePush:p,disablePreferred:c,disableIVR:m,disableEmail:d,disableSMS:v,disableHomeNumber:g,disableMobileNumber:y}},afterRender:function(){OnShift.Utils.cordovaHelper("WaitingDialog","hide",""),this.notifyTitle("Communication Preferences"),this.notifyActivate("account"),this.notifyMenuButton({callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>"),title:"Communication preferences"})}});return _.extend(o.prototype,n),o}),define("pages/account/views/linked_accounts",["layout","pages/account/views/sections","views/back_button","config"],function(e,t,n,r){var i=new r,s=t.extend({className:"linked-accounts",initialize:function(e){var n=this.model.isTerminated(),r=this.model.isTerminated(),s=this.model.organization.get("is_turned_off");this.collection=new Backbone.Collection([{title:"Communication Preferences",description:"How you want to receive your messages",linkTo:"/account/employee/"+this.model.id+"/communication",doDisable:r||s}]),i.get("emp_can_configure_availability")&&this.collection.add({title:"Availability",description:"When you want to work",linkTo:"/account/employee/"+this.model.id+"/event_list/availability",doDisable:r||s}),i.get("emp_can_modify_notification_window")&&this.collection.add({title:"Do Not Disturb",description:"When you don't want to receive messages from work",linkTo:"/account/employee/"+this.model.id+"/event_list/blockout",doDisable:r||s}),t.prototype.initialize.call(this,e)}}),o=e.extend({className:"linked-accounts-main",template:Handlebars.compile("<ul class='linked-accounts'></ul>"),initialize:function(t){e.prototype.initialize.call(this,t),this.linkedAccounts=new s({model:this.model}),this.registerView(this.linkedAccounts,{anchor:".linked-accounts",replace:!0})},afterRender:function(){this.notifyTitle("Employee Preferences"),this.notifyActivate("account"),this.notifyMenuButton(n),this.notifyMenuButton({callback:function(){$("#btnAccount").click()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},serialize:function(){return{displayName:this.model.displayName(),orgName:this.model.organization.get("name")}}});return o}),define("text!pages/shift/templates/main.html",[],function(){return'<form class="form-horizontal" role="form">\n     <div class="form-group">\n        <label>Date:</strong></label>\n        <div class="data-content">\n            {{ formatDate start_date \'dddd MMM d, yyyy\' }}\n        </div>\n      </div>\n      <div class="form-group">\n         <label>Time:</strong></label>\n         <div class="data-content">\n             {{ formatDate start_date \'h:mmtt\' }} to {{ formatDate stop_time \'h:mmtt\' }}\n         </div>\n      </div>\n      <div class="form-group">\n         <label>Position:</strong></label>\n         <div class="data-content">\n             {{ shiftType }}\n         </div>\n      </div>\n      {{#if showLocation}}\n      <div class="form-group">\n         <label>Location:</strong></label>\n         <div class="data-content">\n             {{ location }}\n         </div>\n      </div>\n      {{/if}}\n      {{#if showNote}}\n      {{#if noteText}}\n      <div class="form-group">\n         <label>Note:</strong></label>\n         <div class="data-content">\n             {{ noteText }}\n         </div>\n      </div>\n      {{/if}}\n      {{/if}}\n      {{#if requestFillIn}}\n      {{#if _requested_emp}}\n      <div class="form-group">\n         <label>Requested Fill-in</strong></label>\n         <div class="data-content">\n             You have requested {{_requested_emp}} to fill in for this shift.\n         </div>\n      </div>\n      {{/if}}\n      {{/if}}\n</form>\n<div class=\'buttons\'>\n    {{#if allowFillIn}}\n    {{#if requestFillIn}}\n    <button class="cancel-fillin secondary-btn" type="button">Cancel Fill-in Request</button>\n    {{else}}\n    <button class="request-fillin btn-submit main-btn" type="button" data-bypass="true">Request Fill-in</button>\n    {{#if allowPick}}\n    <a href="/shift/{{ id }}/fillin" class="main-btn">Suggest Fill-in Candidate</a>\n    {{/if}}\n    {{/if}}\n    {{/if}}\n</div>\n<div class=\'center\'>\n    {{#if numberAvailable}}\n    <h5>Dial <a href="tel:+{{ orgPhoneNumber }}">{{ orgPhoneNumber }}</a> to call your scheduler</h5>\n    {{/if}}\n</div>\n<!-- vim:filetype=htmldjango:ts=2:sw=2:\n-->'}),define("pages/shift/views/main",["layout","lib/models/shift","text!pages/shift/templates/main.html","config","common"],function(e,t,n,r){var i=new r,s=e.extend({className:"shift-detail",initialize:function(){_.bindAll(this,"render"),this.model.bind("sync",this.render),this.model.fetch()},template:Handlebars.compile(n),events:{"click .cancel-fillin":"cancelFillinClickHandler","click .request-fillin":"requestFillinClickHandler"},afterRender:function(){this.notifyTitle("Scheduled Shift"),this.notifyActivate("calendar");var e=this;this.notifyMenuButton({callback:function(){var t=new Date(e.model.startDate.getTime());t.setHours(0,0,0,0),e.trigger("navigate","/calendar/"+t.getTime())},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})},cancelFillinClickHandler:function(e){this.model.save({request_fill_in:!1},{success:_.bind(function(e){OnShift.deviceType.indexOf("HTC")===-1?require(["views/system_alert"],function(e){var t=(new e({message:"This shift is no longer marked as available for a replacement."})).render()}):navigator.notification.alert("This shift is no longer marked as available for a replacement.",function(){},"OnShift Mobile","OK"),this.trigger("shift:requestfillin:success"),this.model.unset("_requested_emp")},this),error:_.bind(function(e){require(["views/system_alert"],function(t){var n=e.responseJSON.model.errors.model;Raven.captureException("Version "+OnShift.AppVersion+": cannot cancel fillin - "+JSON.stringify(n));var r=(new t({message:n.msg,type:"danger"})).render()})},this)})},requestFillinClickHandler:function(e){this.model.requestFillIn({success:_.bind(function(e){OnShift.deviceType.indexOf("HTC")===-1?require(["views/system_alert"],function(e){var t=(new e({message:"You've requested a replacement for this shift."})).render()}):navigator.notification.alert("You've requested a replacement for this shift.",function(){},"OnShift Mobile","OK"),this.trigger("shift:requestfillin:success")},this),error:_.bind(function(e,t,n){require(["views/system_alert"],_.bind(function(e){var n=t.responseJSON.errors.model;Raven.captureException("Version "+OnShift.AppVersion+": cannot request fillin - "+JSON.stringify(n));var r=(new e({message:n.msg,type:"danger"})).render();this.trigger("shift:requestfillin:error",n)},this))},this)})},serialize:function(){var e,t,n,r,s,o,u=!this.model.get("home_v2organization_id")||this.model.get("home_v2organization_id")===OnShift.employee.organization.id;if(!u){var a=OnShift.extendedOrgs.get(this.model.get("home_v2organization_id"));e=a.locations.get(this.model.get("locationID")).get("name"),t=a.shiftTypes.get(this.model.get("shift_typeID")).get("name"),n=a.get("allow_employee_fill_in_requests"),r=a.get("default_location_on_emp_schedule"),s=a.get("emp_can_pick_fillin_candidate"),o=a.get("show_shift_notes_to_emps")}else e=OnShift.employee.organization.locations.get(this.model.get("locationID")).get("name"),t=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_typeID")).get("name"),n=i.get("allow_employee_fill_in_requests"),r=i.get("default_location_on_emp_schedule"),s=i.get("emp_can_pick_fillin_candidate"),o=i.get("show_shift_notes_to_emps");var f=this.model.getStartDate(),l=this.model.getStopDate(),c=OnShift.employee.organization.get("org_phone_number"),h=!1;return c===null?c="":h=!0,_.extend(this.model.toJSON(),{start_date:f,stop_time:l,location:e,shiftType:t,orgPhoneNumber:c,numberAvailable:h,requestFillIn:this.model.get("request_fill_in"),showLocation:r,allowFillIn:n,allowPick:s,showNote:o,noteText:this.model.get("note_text"),homeOrg:u})}});return s}),define("lib/collections/available_employees",["collection","lib/models/user"],function(e,t){var n=e.extend({url:function(){return"/rest/shift?shift="+this.shiftID+"&get_qualified_emps=true"},model:t,initialize:function(e){this.shiftID=e.shiftID},comparator:function(e){return e.get("last_name")+e.get("first_name")}});return n}),define("text!pages/shift/templates/fillin.html",[],function(){return'<div class="panel-body">\n  <div id="fillinwrapper" class="wrapper">\n    <form class="emp-search-form">\n      <div class=form-group>\n        <label><h4>Choose your fill-in candidate from the list of available employees</h4></label>\n          <div class="input-group">\n            <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>\n            <input type="text" class="form-control" placeholder="Search by name" id="empFilter" />\n          </div>\n      </div>\n    </form>\n    <ul class="list-unstyled">\n	{{#if availableEmps}}\n    {{#each availableEmps}}\n    <li class="emp-row emp-list-item">\n      <a href="" data-bypass="true" class=\'emp-list-link\'>\n        <div class="emp-row-content">\n          <div class="avatar">\n            <img class="img-rounded"\n              src="http://www.gravatar.com/avatar/0?d=mm&f=y"\n              alt="avatar" width="50" />\n          </div>\n            <strong>{{this}}</strong>\n        </div>\n      </a>\n    </li>\n    {{/each}}\n    {{else}}\n    <strong>No available employees found...</strong>\n    {{/if}}\n    </ul>\n  </div>\n</div>\n<!-- vim:filetype=htmldjango:ts=2:sw=2:\n-->'}),define("pages/shift/views/fillin",["layout","lib/collections/available_employees","config","text!pages/shift/templates/fillin.html"],function(e,t,n,r){var i=new n,s=e.extend({className:"shift-fillin",template:Handlebars.compile(r),events:{"click .emp-list-item":"doFillInRequest","keyup input#empFilter":"filterEmps","propertychange input#empFilter":"filterEmps","input input#empFilter":"filterEmps","paste input#empFilter":"filterEmps"},initialize:function(n){e.prototype.initialize.call(this,n),this.availableEmployees=new t({shiftID:this.model.get("id")});var r=this;this.model.fetch({success:function(){r.availableEmployees.fetch()}}),this.listenTo(this.availableEmployees,"sync",this.render)},filterEmps:_.throttle(function(e){var t=e.target.value.toLowerCase();$(".emp-list-item").each(function(e,n){var r=$(n),i=r.text().toLowerCase();i.indexOf(t)!==-1?r.show():r.hide()})},1e3),serialize:function(){var e=[],t=this;return this.empMap={},_.each(this.availableEmployees.models,function(n){t.empMap[n.displayName()]=n.get("id"),e.push(n.displayName())}),_.extend(this.model.toJSON(),{availableEmps:e})},doFillInRequest:function(e){e.stopPropagation(),e.preventDefault();var t=$(e.target).text().trim(),n=this.availableEmployees.where({id:this.empMap[t]})[0],r=this;navigator.notification.confirm("Suggest "+t+" to fill in for this shift?",function(e){var t=e.toString();t=="2"&&r.model.requestFillIn({success:_.bind(function(e){r.model.request({fillInEmpID:n.id,success:_.bind(function(){require(["views/system_alert"],function(e){var t=new e({message:"You've requested "+n.displayName()+" to fill in for this shift. Your scheduler must approve "+"this replacement before the shift will be removed from your schedule."});t.render(),r.trigger("shift:requestfillin:success"),r.trigger("navigate","/shift/"+r.model.get("id"))})},this),error:_.bind(function(){r.model.save({request_fill_in:!1}),require(["views/system_alert"],function(e){var t=new e({message:"An error occcurred when "+n.displayName()+" requested to fill in for this shift",type:"danger"});t.render(),r.trigger("shift:requestfillin:error")})},this)})},this),error:_.bind(function(e,t,n){require(["views/system_alert"],_.bind(function(e){var n=t.responseJSON.errors.model;Raven.captureException("Version "+OnShift.AppVersion+": fillin request error - "+JSON.stringify(n));var i=(new e({message:n.msg,type:"danger"})).render();r.trigger("shift:requestfillin:error",n)},this))},this)})},"Fill-In","Cancel,OK")},afterRender:function(){if(parseFloat(OnShift.DeviceVersion)<4){var e;setTimeout(function(){$("#fillinwrapper").css("height","100%"),e=new iScroll("fillinwrapper",{momentum:!1,bounce:!1,hScrollbar:!1,vScrollbar:!1,checkDOMChanges:!0})},100)}else setTimeout(function(){$(".shift-fillin").addClass("overthrow")},100)}});return s}),define("collections/schedule_like",["collection","lib/models"],function(e,t){var n=e.extend({urlRoot:"/rest/calendar",model:function(e,n){var r=null;switch(e.type){case"ScheduleShift":r=t.Shift;break;case"PersonalTimeRequest":r=t.PTO;break;case"OpenV2Shift":r=t.V2Shift;break;case"FillinShift":r=t.Shift.extend({isFillinShift:!0});break;default:r=t.Model}return delete e.type,new r(e,n)},translate:function(e){var t=_.keys(e)[0],n=_.values(e)[0];return n.type=t,n},comparator:function(e){return e.getStartDate()}});return n}),define("text!pages/calendar/templates/week_chooser.html",[],function(){return'<ul class="pager">\n  <li class="previous">\n    <a data-nav-target="prev" class="btn-nav pull-left">\n      <span class=\'icon-prev-sm\'></span>\n    </a>\n  </li>\n  <span id="current-week"><p>\n		  {{#eq startMonth stopMonth }}\n		  {{ formatDate start \'MMM yyyy\' }} \n		  {{ else }}\n		  {{ formatDate start \'MMM yyyy\' }} to {{ formatDate stop \'MMM yyyy\'}}	\n		  {{/eq}}\n	  </p></span>\n  <li class="next goNext">\n    <a data-nav-target="next" class="btn-nav pull-right" id="nextbtn">\n      <span class="icon-next-sm"></span>\n    </a>\n  </li>\n</ul>\n<!-- vim:filetype=htmldjango:ts=2:sw=2:\n-->'}),define("pages/calendar/views/calendar",["layout","lib/models","lib/views/collection","text!pages/calendar/templates/week_chooser.html"],function(e,t,n,r){var i=e.extend({tagName:"div",className:"week-chooser",template:Handlebars.compile(r),events:{"click .btn-nav":"doNavigate"},initialize:function(t){e.prototype.initialize.call(this,t),this.listenTo(this.collection,"reset",this.update,this),this.update()},update:function(){this.options.start=this.collection.first().get("date"),this.options.stop=this.collection.last().get("date"),this.render()},doNavigate:function(e){var t=$(e.target);t.is("a")||(t=t.parents("a").first());var n=t.data("navTarget"),r=this.model.getSunday(),i=this.model.get("current").clone();n==="prev"?i.addDays(-14):i.addDays(14),this.trigger("navigate","/calendar/"+i.getTime(),!1),this.model.set("current",i)},serialize:function(){return{start:this.options.start,stop:this.options.stop,startMonth:this.getMonth(this.options.start),stopMonth:this.getMonth(this.options.stop)}},getMonth:function(e){var t=new Date(e);return t.getMonth()}}),s=e.extend({tagName:"ul",className:"datesgrid-header",template:Handlebars.compile("<li><strong>Sun</strong></li><li><strong>Mon</strong></li><li><strong>Tue</strong></li><li><strong>Wed</strong></li><li><strong>Thu</strong></li><li><strong>Fri</strong></li><li><strong>Sat</strong></li>")}),o=n.extend({tagName:"ul",className:"datesgrid-dates",initialize:function(e){this.listenTo(this.options.scheduleCollection,"sync",this.update,this),this.listenTo(this.collection,"reset",function(){this.render(),this.update()},this),this.listenTo(this.model,"change:current",this.activateCurrent,this),n.prototype.initialize.call(this,e)},update:function(e){e||(e={});var n=this.options.scheduleCollection;this.collection.each(function(e){e.set("scheduleItems",n.filter(function(n){var r=n.getStartDate();r=new Date(r.getFullYear(),r.getMonth(),r.getDate());if(n instanceof t.Shift&&r.equals(e.get("date"))&&n.get("employeeID")===OnShift.employee.id)return!0}))},this),!e.ignoreActivate&&this.activateCurrent()},activateCurrent:function(){this.collection.each(function(e){e.set("isActive",!1)});var e=this.collection.filter(function(e){return e.get("date").getTime()===this.model.get("current").getTime()},this);_.each(e,function(e){e.set("isActive",!0)},this)},afterRender:function(){this.activateCurrent()}}),u=e.extend({tagName:"li",className:function(){var e="datesgrid-date";return this.showMonth()?e+" showMonth":e},template:Handlebars.compile("<a href='/calendar/{{ timestamp }}'><div class='month'><h6 class='month-text'><strong>{{ formatDate date 'MMM' }}</strong></h6></div><div class='day'><strong>{{ formatDate date ' d' }} </strong></div><div class='bullets'></div></a>"),initialize:function(t){e.prototype.initialize.call(this,t),this.listenTo(this.model,"change:isActive",this.handleActiveChange),this.listenTo(this.model,"change:scheduleItems",this.handleScheduleItemChange),this.bullets=new l,this.registerView(this.bullets,{anchor:".bullets",replace:!0})},handleActiveChange:function(e,t,n){this.$el.toggleClass("active",t),!t&&!this.showMonth()?this.$el.removeClass("showMonth"):this.$el.addClass("showMonth")},handleScheduleItemChange:function(e,t,n){this.bullets.onClose(),e.get("scheduleItems").length>0&&this.addBullet("shift")},addBullet:function(e){this.bullets.add(e)},showMonth:function(){return this.model.get("date").getDate()==1},serialize:function(){var e=this.model.toJSON();return e.timestamp=e.date.getTime(),e}}),a=e.extend({tagName:"div",className:"dates-grid",initialize:function(t){e.prototype.initialize.call(this,t),this.header=new s({model:this.model}),this.datesView=OnShift.d=new o({model:this.model,ElementView:u,scheduleCollection:this.options.scheduleCollection,collection:this.collection}),this.registerView(this.header),this.registerView(this.datesView)},getDates:function(){return this.datesView.collection},afterRender:function(){if(parseFloat(OnShift.DeviceVersion)<4){this.$el.append("<div class='calendarwrapper' style='margin-top:1px'></div>");var e=this;setTimeout(function(){$(".calendarwrapper").append(e.header.el),e.$el.append(e.datesView.el)},100)}else this.$el.append(this.header.el),this.$el.append(this.datesView.el)}}),f=e.extend({tagName:"div",className:function(){return"bullet + bullet-"+this.options.bulletType}}),l=e.extend({tagName:"div",className:"bullets",initialize:function(t){e.prototype.initialize.call(this,t),this.bullets=[],this.on("bullets:add",function(e){this.$el.append(e.render().el)},this)},onClose:function(){_.each(this.bullets,function(e){e.close()},this)},add:function(e){var t=new f({bulletType:e});this.bullets.push(t),this.trigger("bullets:add",t)}}),c=e.extend({tagName:"div",className:"calendar-view",initialize:function(t){e.prototype.initialize.call(this,t),this.weekChooser=new i({model:this.model,collection:this.options.dayCollection}),this.datesGrid=new a({model:this.model,collection:this.options.dayCollection,scheduleCollection:this.collection}),this.registerView(this.weekChooser),this.registerView(this.datesGrid)},afterRender:function(){this.$el.append(this.weekChooser.el),this.$el.append(this.datesGrid.el)}});return c}),define("text!pages/calendar/templates/schedule_item.html",[],function(){return'<div class="day panel-heading">\n    <h6 class=\'item-label\'><strong>{{ itemType }}</strong></h6>\n    <h6 class=\'date-label\'><strong>{{ formatDate start \'ddd, MMM d\' }}</strong></h6>\n    {{#if orgName}}\n        <h6 class=\'shift-loc\'><strong>at {{orgName}}</strong></h6>\n    {{/if}}\n</div>\n<div class="panel-body">\n    <div class="item-details">\n        <div class="item-time">\n            <h4 class=\'time-label\'></h4>\n        </div>\n        <div class="item-extras"></div>\n    </div>\n    <div class="tag"></div>\n</div>'}),define("pages/calendar/views/schedule_like",["layout","text!pages/calendar/templates/schedule_item.html"],function(e,t){var n=e.extend({tagName:"li",className:"schedule-like",events:{click:"goToDetail"},template:Handlebars.compile(t),initialize:function(t){this.timeLabel=this.getTimeLabel(),this.extras=this.getExtras(),this.tagView=this.getTagView(),this.timeLabel&&this._registerTimeLabel(),this.extras&&this._registerExtras(),this.tagView&&this._registerTagView(),e.prototype.initialize.call(this,t)},getTimeLabel:function(){return null},getExtras:function(){return null},getTagView:function(){return null},_registerTimeLabel:function(){this.registerView(this.timeLabel,{anchor:".time-label",replace:!0})},_registerExtras:function(){this.registerView(this.extras,{anchor:".item-extras",replace:!0})},_registerTagView:function(){this.registerView(this.tagView,{anchor:".tag",replace:!0})},serialize:function(){return{start:this.model.getStartDate(),stop:this.model.getStopDate()}},goToDetail:function(e){this.trigger("navigate",this.model)}});return n}),define("pages/calendar/views/time_label",["layout"],function(e){var t=e.extend({tagName:"h4",className:"time-label",serialize:function(){return{start:this.options.start,stop:this.options.stop}}});return t}),define("pages/calendar/views/basic_time_label",["pages/calendar/views/time_label"],function(e){var t=e.extend({template:Handlebars.compile("{{ formatDate start 'h:mmtt' }} &ndash; {{ formatDate stop 'h:mmtt' }}")});return t}),define("pages/calendar/views/tag",["layout"],function(e){var t=e.extend({className:"tag"});return t}),define("pages/calendar/views/basic_tag",["pages/calendar/views/tag"],function(e){var t=e.extend({template:Handlebars.compile("<span class='badge {{lowerStatus}}'>{{status}}</span>{{#if isOverlap}}<div><span class='badge overlap'>Overlapping</span></div>{{/if}}"),serialize:function(){return{status:this.options.status,lowerStatus:this.options.status.toLowerCase().replace(/\s+/g,"-"),isOverlap:this.options.isOverlap?!0:!1}}});return t}),define("pages/calendar/views/extras",["layout"],function(e){var t=e.extend({className:"extras"});return t}),define("pages/calendar/views/shift",["pages/calendar/views/schedule_like","pages/calendar/views/basic_time_label","pages/calendar/views/basic_tag","pages/calendar/views/extras","config"],function(e,t,n,r,i){var s=new i,o=r.extend({template:Handlebars.compile("<div class='extra'>{{ shiftTypeName }}{{#if showLocation}} at {{ locationName }}{{/if}}</div>"),serialize:function(){return{shiftTypeName:this.options.shiftTypeName,locationName:this.options.locationName,showLocation:s.get("default_location_on_emp_schedule")}}}),u=e.extend({className:"shift-list-item shift-item schedule-item",initialize:function(t){this.start=this.getStartDate(),this.stop=this.getStopDate();if(OnShift.extendedOrgs.models.length&&this.model.get("home_v2organization_id")&&this.model.get("home_v2organization_id")!==OnShift.employee.organization.id){var n=OnShift.extendedOrgs.get(this.model.get("home_v2organization_id"));this.location=n.locations.get(this.model.get("locationID")),this.shiftType=n.shiftTypes.get(this.model.get("shift_typeID"))}else this.location=OnShift.employee.organization.locations.get(this.model.get("locationID")),this.shiftType=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_typeID"));_.bindAll(this,"getStartDate","getStartDate"),e.prototype.initialize.call(this,t)},getTimeLabel:function(){return this.timeLabel||new t({start:this.start,stop:this.stop})},getExtras:function(){return this.extras||new o({locationName:this.location.get("name"),shiftTypeName:this.shiftType.get("name")})},getTagView:function(){return this.model.get("request_fill_in")?this.tagView||new n({status:"Fill-in Requested"}):null},serialize:function(){var e;return OnShift.extendedOrgs.models.length&&(this.model.get("home_v2organization_id")?e=OnShift.extendedOrgs.get(this.model.get("home_v2organization_id")).get("name"):e=OnShift.employee.organization.get("name")),{itemType:"Scheduled Shift",start:this.start,stop:this.stop,orgName:e}},goToDetail:function(e){this.trigger("navigate",this.model)},getStartDate:function(){return this.model.getStartDate()},getStopDate:function(){return this.model.getStopDate()}});return u}),define("pages/calendar/views/pto",["pages/calendar/views/schedule_like","pages/calendar/views/time_label","pages/calendar/views/basic_tag"],function(e,t,n){var r=t.extend({template:Handlebars.compile("<div class='time'>{{ formatDate start 'ddd, MMM d h:mmtt' }}</div><div class='time'> to </div><div class='time'>{{ formatDate stop 'ddd, MMM d h:mmtt' }}</div>")}),i=e.extend({className:"shift-list-item pto-item schedule-item",getTimeLabel:function(){return this.timeLabel||new r({start:this.model.getStartDate(),stop:this.model.getStopDate()})},getTagView:function(){return this.tagView||new n({status:OnShift.ptoStatus.findWhere({id:this.model.get("statusID")}).get("name")})},serialize:function(){var e=this.model.getStartDate(),t=this.model.getStopDate();return{itemType:"Time Off Request",start:this.model.getStartDate(),stop:this.model.getStopDate()}}});return i}),define("pages/calendar/views/open_shift",["pages/calendar/views/schedule_like","pages/calendar/views/basic_time_label","pages/calendar/views/basic_tag","pages/calendar/views/extras","config"],function(e,t,n,r,i){var s=new i,o=r.extend({template:Handlebars.compile("<div class='extra'>{{ shiftTypeName }}{{#if showLocation}} at {{ locationName }}{{/if}}</div>"),serialize:function(){return{shiftTypeName:this.options.shiftTypeName,locationName:this.options.locationName,showLocation:s.get("default_location_on_emp_open_shifts")}}}),u=e.extend({className:"open-shift-item shift-list-item schedule-item",initialize:function(t){if(OnShift.extendedOrgs.models.length&&this.model.get("v2organization_id")!==OnShift.employee.organization.id){var n=OnShift.extendedOrgs.get(this.model.get("v2organization_id"));this.location=n.locations.get(this.model.get("location_id")),this.shiftType=n.shiftTypes.get(this.model.get("shift_type_id"))}else this.location=OnShift.employee.organization.locations.get(this.model.get("location_id")),this.shiftType=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_type_id"));e.prototype.initialize.call(this,t)},getTimeLabel:function(){return this.timeLabel||new t({start:this.model.getStartDate(),stop:this.model.getStopDate()})},getTagView:function(){return this.tagView||new n({status:this.model.get("_requested")?"Requested":"Open Shift",isOverlap:this.model.get("_temp_overlap")})},getExtras:function(){return this.extras||new o({locationName:this.location.get("name"),shiftTypeName:this.shiftType.get("name")})},serialize:function(){var e;return OnShift.extendedOrgs.models.length&&(this.model.get("v2organization_id")!==OnShift.employee.organization.id?e=OnShift.extendedOrgs.get(this.model.get("v2organization_id")).get("name"):e=OnShift.employee.organization.get("name")),{itemType:"Open Shift",start:this.model.getStartDate(),stop:this.model.getStopDate(),orgName:e}}});return u}),define("pages/calendar/views/fillin",["pages/calendar/views/schedule_like","pages/calendar/views/basic_time_label","pages/calendar/views/basic_tag","pages/calendar/views/extras","config"],function(e,t,n,r,i){var s=new i,o=r.extend({template:Handlebars.compile("<div class='extra'>{{ shiftTypeName }}{{#if showLocation}} at {{ locationName }}{{/if}}</div>"),serialize:function(){return{shiftTypeName:this.options.shiftTypeName,locationName:this.options.locationName,showLocation:s.get("default_location_on_emp_open_shifts")}}}),u=e.extend({className:"fillin-item shift-list-item schedule-item",initialize:function(t){if(OnShift.extendedOrgs.models.length&&this.model.get("v2organizationID")!==OnShift.employee.organization.id){var n=OnShift.extendedOrgs.get(this.model.get("v2organizationID"));this.location=n.locations.get(this.model.get("locationID")),this.shiftType=n.shiftTypes.get(this.model.get("shift_typeID"))}else this.location=OnShift.employee.organization.locations.get(this.model.get("locationID")),this.shiftType=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_typeID"));e.prototype.initialize.call(this,t)},getTimeLabel:function(){return this.timeLabel||new t({start:this.model.getStartDate(),stop:this.model.getStopDate()})},getTagView:function(){return this.tagView||new n({status:this.model.get("_requested")?"Requested":"Fill in request",isOverlap:this.model.get("_temp_overlap")})},getExtras:function(){return this.extras||new o({locationName:this.location.get("name"),shiftTypeName:this.shiftType.get("name")})},serialize:function(){var e;return OnShift.extendedOrgs.models.length&&(this.model.get("v2organizationID")!==OnShift.employee.organization.id?e=OnShift.extendedOrgs.get(this.model.get("v2organizationID")).get("name"):e=OnShift.employee.organization.get("name")),{itemType:"Fill-in Request",start:this.model.getStartDate(),stop:this.model.getStopDate(),orgName:e}}});return u}),define("pages/calendar/views/day_detail",["layout","lib/models","pages/calendar/views/shift","pages/calendar/views/pto","pages/calendar/views/open_shift","pages/calendar/views/fillin","lib/views/collection"],function(e,t,n,r,i,s,o){var u=e.extend({tagName:"li",className:"schedule-item no-schedule",template:Handlebars.compile("<h4>{{message}}</h4>"),serialize:function(){var e=window.localStorage.getItem("calendar_filter"),t=null;return e==="available"?t="No Open Shifts":t="No Schedule",{message:t}}}),a=o.extend({tagName:"ul",className:"events",createView:function(e){var o=null;return e instanceof t.Shift&&e.isFillinShift?o=s:e instanceof t.Shift?o=n:e instanceof t.PTO?o=r:e instanceof t.V2Shift?o=i:o=u,new o({model:e})}}),f=e.extend({tagName:"div",className:"day-details",initialize:function(t){e.prototype.initialize.call(this,t),this.eventsView=new a({collection:new Backbone.Collection}),this.registerView(this.eventsView),this.listenTo(this.collection,"sync",this.update,this)},update:function(){this.eventsView.collection.reset();var e=this.collection.filter(function(e){var n=e.getStartDate().clone(),r=this.model.get("current").clone();n.setHours(0),n.setMinutes(0),n.setSeconds(0);if(e instanceof t.PTO){var i=e.getStopDate().clone();return r.addSeconds(1),r.between(n,i)}return n.getTime()==r.getTime()},this);e.length||(this.noRecord=new u,e.push(this.noRecord)),this.eventsView.collection.add(e)},afterRender:function(){if(parseFloat(OnShift.DeviceVersion)<4)if(OnShift.user.isReady()){this.$el.append("<div style='margin-top:10px'></div>"),this.$el.append("<div id='schedulewrapper'></div>");var e=this,t;setTimeout(function(){$("#schedulewrapper").append(e.eventsView.el),$("#schedulewrapper").css("height","100%"),t=new iScroll("schedulewrapper",{momentum:!1,bounce:!1,hScrollbar:!1,vScrollbar:!1,checkDOMChanges:!0})},100)}else this.$el.append("<div style='margin-top:10px'></div>"),this.$el.append(this.eventsView.el);else this.$el.append("<div style='margin-top:10px'></div>"),this.$el.append(this.eventsView.el)}});return f}),define("views/dropdown/button",["layout"],function(e){var t=e.extend({tagName:"button",className:"dropdown-btn dropdown-toggle",attributes:{"data-toggle":"dropdown"},template:Handlebars.compile("<div class='wrapper'>  <div class='state'>{{ text }}</div>  <span class='caret'></span>  <span class='icon-filter'></span></div>"),initialize:function(t){e.prototype.initialize.call(this,t),this.model=new(Backbone.Model.extend())(t),this.listenTo(this.model,"change:text",this.handleTextChange)},handleTextChange:function(e,t,n){this.updateText(t)},updateText:function(e){$(".state",this.el).text(e)}});return t}),define("views/dropdown/option",["layout"],function(e){var t=e.extend({tagName:"li",className:"dropdown-option",template:Handlebars.compile("<a {{#if dataBypass}} data-bypass='true' {{/if}}   id='{{stripWhiteSpace text}}' href='{{href}}'>{{text}}</a>"),events:{click:"handleClick"},initialize:function(t){e.prototype.initialize.call(this,t),this.listenTo(this.model,"change:active",this.activeChanged)},afterRender:function(){this.model.get("active")&&this.toggleActiveClass(!0)},handleClick:function(e){e.stopPropagation();var t=!this.model.get("active");if(!this.options.allowEmptySelection&&!t&&this.model.collection.where({active:true,group:this.model.get("group")}).length==1)return this.doCloseMenu(this.model,!0,{}),!1;this.model.set("active",t);if(parseFloat(OnShift.DeviceVersion)<4||OnShift.deviceType.indexOf("HTC")!==-1)return!1},activeChanged:function(e,t,n){n||(n={}),this.toggleActiveClass(t),_.defaults(n,{doClose:!0,trigger:!0}),n.trigger&&(this.deActivateOthers(e,t,n),n.doClose&&this.doCloseMenu(e,t,n))},deActivateOthers:function(e,t,n){var r=e.get("group"),i=this.model.collection.where({group:r});_.each(i,function(t){if(t===e)return;t.set("active",!1,{trigger:!1})})},doCloseMenu:function(e,t,n){this.trigger("togglemenu",this)},toggleActiveClass:function(e){this.$el.toggleClass("active",e)}});return t}),define("views/dropdown/menu",["layout","lib/views/collection","views/dropdown/option"],function(e,t,n){var r=e.extend({tagName:"li",className:"divider"}),i=t.extend({tagName:"ul",className:"dropdown-menu",defaults:{ElementView:n},createView:function(e){return e.get("divider")?new r:t.prototype.createView.call(this,e)},getViewArgs:function(e){var t=this.options.groupOpts[e.get("group")];return{model:e,allowEmptySelection:t?t.allowEmptySelection:!1}}});return i}),define("views/dropdown/base",["layout","lib/views/collection","views/dropdown/button","views/dropdown/menu"],function(e,t,n,r){var i=Backbone.Model.extend({defaults:{active:!1,dataBypass:!0,href:"#",group:"main",isMulti:!1}}),s=e.extend({tagName:"div",className:"btn-group basic-dropdown",defaults:{initialText:"Select",options:[],groupOpts:{}},initialize:function(t){e.prototype.initialize.call(this,t),this.options.options=_.map(this.options.options,function(e){return e==="divider"?{divider:!0}:e}),this.optionsCollection=new(Backbone.Collection.extend({model:i}))(this.options.options),this.button=new n({text:this.generateDropdownButtonText()}),this.menu=new r({collection:this.optionsCollection,groupOpts:this.options.groupOpts}),this.listenTo(this.menu,"togglemenu",this.toggleMenu),this.listenTo(this.optionsCollection,"change:active",this.handleActiveChange,this),this.registerView(this.button),this.registerView(this.menu)},handleActiveChange:function(e,t,n){n||(n={});if(!n.trigger)return;this.trigger("dropdown:change:active",e,this.getActive())},getActive:function(e){e||(e="main");var t={active:!0};return e!=="all"&&(t.group=e),this.optionsCollection.where(t)},generateDropdownButtonText:function(){return this.options.initialText},setText:function(e){this.button.model.set("text",e)},toggleMenu:function(){this.button.$el.dropdown("toggle")},afterRender:function(){this.$el.append(this.button.el),this.$el.append(this.menu.el)}});return s}),define("views/dropdown/singleselect",["views/dropdown/base"],function(e){var t=e.extend({initialize:function(t){t||(t={}),t.allowEmptySelection=!1,e.prototype.initialize.call(this,t)},generateDropdownButtonText:function(){var e=this.getActive();return e.length?e[0].get("text"):"Select"}});return t}),define("views/dropdown",["views/dropdown/base","views/dropdown/button","views/dropdown/menu","views/dropdown/option","views/dropdown/singleselect"],function(e,t,n,r,i){return{Base:e,DropdownButton:t,Menu:n,OptionView:r,SingleSelect:i}}),define("pages/calendar/views/main",["layout","collections/schedule_like","pages/calendar/views/calendar","pages/calendar/views/day_detail","config","views/dropdown","mixins/restricted_data_handler"],function(e,t,n,r,i,s,o){var u=new i,a=Backbone.Model.extend({defaults:function(){return{current:Date.today()}},getSunday:function(){var e=new Date(this.get("current"));return e.setDate(e.getDate()-e.getDay()),e}}),f=e.extend({tagName:"a",initialize:function(t){e.prototype.initialize.call(this,t),this.listenTo(this.model,"change:current",this.updateLink),this.updateLink()},className:"action-button",updateLink:function(){this.el.href="/requests/new/"+this.model.get("current").getTime()},attributes:{href:"/requests/new"},template:Handlebars.compile("<span class='icon-plus'></span>")}),l=e.extend({tagName:"a",className:"action-button",events:{click:"printReport"},printReport:function(){OnShift.Utils.cordovaHelper("OSPlugin","showPrintDialog","")},template:Handlebars.compile("<span class='icon-print'></span>")}),c=e.extend({tagName:"a",className:"action-button",attributes:function(){var e=Date.today().getTime();return{href:"/calendar/"+e,title:"Today"}},template:Handlebars.compile("<span class='icon-today'></span>")}),h=e.extend({className:"action-btn-group",initialize:function(t){e.prototype.initialize.call(this,t),this.button=new t.Button({model:this.model}),this.registerView(this.button)},afterRender:function(){this.$el.append(this.button.el)}}),p=e.extend({tagName:"div",className:"calendar-main",initialize:function(i){e.prototype.initialize.call(this,i),i.filters||(i.filters=["schedule","pto"]),this.model=new a({current:i.date}),this.collection=new t,this.dayCollection=new Backbone.Collection(this.getDays(this.model.getSunday())),this.setFilters(i.filters),this.calendarView=new n({model:this.model,collection:this.collection,dayCollection:this.dayCollection}),this.dayDetailView=new r({model:this.model,collection:this.collection}),this.registerView(this.calendarView),this.registerView(this.dayDetailView),this.listenTo(this.model,"change:current",function(){var e=this.dayCollection.filter(function(e){return e.get("date").getTime()===this.model.get("current").getTime()},this);e.length?this.collection.trigger("sync",{ignoreActivate:!0}):(this.dayCollection.reset(this.getDays(this.model.getSunday())),this.fetchSchedule())},this);var o=window.localStorage.getItem("calendar_filter"),u=[{text:"All",value:"all",active:o==="all"},{text:"Schedule",value:"schedule",active:o==="schedule"||!o},{text:"Available Shifts",value:"available",active:o==="available"}];if(OnShift.extendedOrgs.models.length){var f=Number(docCookies.getItem("calendar_orgs")),l=OnShift.employee.organization;this.orgFilter=f,u.push("divider",{text:"All orgs",group:"orgs",value:0,active:f===0||!f},{text:l.get("name"),value:l.id,group:"orgs",active:f===l.id}),OnShift.extendedOrgs.each(function(e){u.push({text:e.get("name"),value:e.id,group:"orgs",active:f===e.id})})}else this.orgFilter=0;this.dropdown=new s.SingleSelect({options:u}),this.listenTo(this.dropdown,"dropdown:change:active",function(e,t){_.isNumber(e.get("value"))?(window.localStorage.setItem("calendar_orgs",e.get("value")),this.orgFilter=e.get("value")):(window.localStorage.setItem("calendar_filter",e.get("value")),this.setFilters(e.get("value")),this.dropdown.setText(e.get("text"))),this.fetchSchedule()},this),this.setFilters(this.dropdown.getActive()[0].get("value"))},getDays:function(e){return _.map(_.range(0,14),function(t){return{date:(new Date(e)).addDays(t),isActive:!1}})},fetchSchedule:function(){if(!OnShift.user.isReady())return;this.addSpinner(),$(".events").hide();var e=this.dayCollection,t=e.first().get("date"),n=e.last().get("date");this.collection.once("reset",function(e){this.removeSpinner(),$(".events").show()},this),this.collection.on("sync",function(e){this.removeSpinner()},this),this.collection.fetch({data:{start:t.getTime(),stop:n.getTime(),filters:this.getFilters(),org_filter:this.orgFilter},reset:!0,remove:!0,error:_.bind(function(e,t,n){this._handleRestrictedData(t,this.dayDetailView.$el,{model:this.model,callback:_.bind(function(){this.removeSpinner()},this)})},this)})},setFilters:function(e){this.filters=e},getFilters:function(){return this.filters},removeSpinner:function(){this.spinner&&this.spinner.remove()},addSpinner:function(){this.removeSpinner(),this.spinner=OnShift.addSpinner($(".day-details",this.el)[0],"Loading Schedule")},afterRender:function(){OnShift.Utils.cordovaHelper("OSPlugin","callPushMessage",""),this.$el.append(this.calendarView.el),this.$el.append(this.dayDetailView.el),this.notifyTitle("Calendar"),this.notifyActivate("calendar"),u.get("show_emp_printable_schedule_link")&&this.notifyPrintButton(new h({Button:l})),this.notifyDropdown(this.dropdown),u.get("emp_can_request_time_off")&&this.notifyActionButton(new h({model:this.model,Button:f})),this.notifyActionButton2(new h({Button:c})),this.fetchSchedule()}});return _.extend(p.prototype,o),p}),define("pages/requests/views/request_action_base",["layout","views/system_alert"],function(e,t){var n=e.extend({tagName:"form",className:"request-form form-horizontal",attributes:{role:"form",action:"/calendar/"},initialize:function(t){e.prototype.initialize.call(this,t),this.ptoTypes=[],OnShift.ptoTypes.models.forEach(function(e){e.get("visible_to_emp")&&this.ptoTypes.push(e.get("name"))},this),this.ptoTypes.sort()},events:{submit:"handleSubmit","click button.cancel":"handleCancelClick","change input[name=start_day]":"validateDates","change input[name=stop_day]":"validateDates","change input[name=repeat_days]":"toggleRepeatUntil","click button.recurring":"showRecurringOption"},handleCancelClick:function(e){window.history.back()},showRecurringOption:function(e){e.preventDefault(),$(e.target).hide(),$("#recurringOptions",this.el).show()},validateDates:function(){var e=Date.parse($("input[name=start_day]",this.el).val()),t=Date.parse($("input[name=stop_day]",this.el).val());return e>=t?(this.addWarning($("#starting",this.el),"The start time must be before ending time."),!1):(this.removeWarning($("#starting",this.el)),this.removeWarning($("#ending",this.el)),!0)},toggleRepeatUntil:function(e){var t=Number(e.target.value);t<0?($(".until",this.el).hide(),e.target.value="0"):t>0?$(".until",this.el).show():$(".until",this.el).hide()},handleSubmit:function(e){e.preventDefault();var n=Date.parse($("input[name=start_day]").val()),r=Date.parse($("input[name=stop_day]").val()),i=Number($("input[name=repeat_days]").val()),s=Date.parse($("input[name=repeat_until]").val());if(!n||!r)return(new t({message:"You must choose a start and end date.",type:"warning"})).render(),!1;if(n>=r)return(new t({message:"The start date must be earlier than the ending date.",type:"warning"})).render(),!1;var o=$("textarea[name=reason]").val(),u=OnShift.ptoTypes.where({name:$("select[name=time_off_type]").val()});if(u.length===0)return(new t({message:"You must choose a time off type.",type:"warning"})).render(),!1;var a=u[0].get("id");return this.request.set({start_time:n.toString("yyyy-MM-dd HH:mm:ss"),stop_time:r.toString("yyyy-MM-dd HH:mm:ss"),employeeID:OnShift.employee.id,time_off_type_id:a,statusID:1,reason:o}),this.request.save(null,{data:{model:JSON.stringify(this.request.toJSON()),repeat_days:i,repeat_until:s.getTime()},success:_.bind(function(e,n,r){(new t({message:"Time-off request submitted"})).render(),this.trigger("navigate",this.$el.attr("action")+this.date.getTime())},this),error:_.bind(function(e,n,r){Raven.captureException("Version "+OnShift.AppVersion+": cannot submit timeoff - "+JSON.stringify(n)),(new t({message:n.responseJSON.error.error,type:"danger"})).render()},this)}),!1},addWarning:function(e,t){e.addClass("has-warning"),$(".help-block",e).text(t)},removeWarning:function(e){e.removeClass("has-warning"),$(".help-block",e).text("")},serialize:function(){var e=OnShift.ptoTypes.get(this.request.get("time_off_type_id"));e=e?e.get("name"):"";var t=OnShift.ptoStatus.findWhere({id:this.request.get("statusID")}).get("name"),n=t==="Submitted",r,i=this.request.get("repeat_days");return i&&(r=Date.parse(this.request.get("repeat_until")).toString("MM/dd/yyyy")),{start_time:this.request.getStartDate(),stop_time:this.request.getStopDate(),reason:this.request.get("reason"),ptoTypes:this.ptoTypes,ptoType:e,showDelete:n,repeatDays:i,repeatUntil:r}}});return n}),define("text!pages/requests/templates/view_request.html",[],function(){return'<fieldset>\n    <legend>Time Off Type</legend>\n    <div class="form-group">\n        <div class=\'request-value\'>\n            {{ptoType}}\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <legend>Starts</legend>\n    <div class="form-group">\n        <div class=\'request-value\'>\n            {{formatDate start_time "h:mmtt on MMMM d yyyy"}}\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <legend>Ends</legend>\n    <div class="form-group">\n        <div class=\'request-value\'>\n            {{formatDate stop_time "h:mmtt on MMMM d yyyy"}}\n        </div>\n    </div>\n</fieldset>\n{{#if reason}}\n<fieldset>\n    <legend>Reason</legend>\n    <div class="form-group">\n        <div class=\'request-value\'>\n            {{reason}}\n        </div>\n    </div>\n</fieldset>\n{{/if}}\n{{#if repeatDays}}\n<fieldset>\n    <legend>Repeats</legend>\n    <div class="form-group">\n        <div class="request-value">\n            Repeats every {{repeatDays}} day(s) until {{repeatUntil}}\n        </div>\n    </div>\n</fieldset>\n{{/if}}\n<div class="form-group">\n    <div class="buttons">\n        {{#if showDelete}}\n        <button class="submit-btn delete-button" type="button" id="delete-button">\n        {{#if repeatDays}}\n            Delete This Request\n        </button>\n        <button class="submit-btn delete-button" type="button" id="delete-following-button">\n            Delete This And All Following Requests\n        </button>\n        <button class="submit-btn delete-button" type="button" id="delete-all-button">\n            Delete All Recurring Requests\n        </button>\n        {{else}}\n            Delete\n        </button>\n        {{/if}}\n        {{/if}}\n        <button class="cancel cancel-btn" type="button">Cancel</button>\n    </div>\n</div>'}),define("pages/requests/views/view_request",["pages/requests/views/request_action_base","lib/models/pto","text!pages/requests/templates/view_request.html","views/system_alert"],function(e,t,n,r){var i=e.extend({events:_.extend(e.prototype.events,{"click button.delete-button":"handleDeleteClick"}),template:Handlebars.compile(n),initialize:function(n){e.prototype.initialize.call(this,n),this.request=n.request||new t({id:n.requestID}),this.listenTo(this.request,"sync",this.render,this),n.request||this.request.fetch()},handleDeleteClick:function(e){e.preventDefault();var t,n,i;return e.target.id==="delete-all-button"?(t="Are you sure you want to delete all recurring instances of this time-off request?",n=!0,i=!1):e.target.id==="delete-following-button"?(t="Are you sure you want to delete this request and all following recurring instances of this request?",n=!0,i=!0):(t="Are you sure you want to delete this time-off request?",n=!1,i=!1),require(["views/confirm","layout"],_.bind(function(e,s){var o=new(s.extend({template:Handlebars.compile("<p>"+t+"</p>")})),u=new e({title:"Cancel Request?",body:o,confirmButtonText:"Yes",cancelButtonText:"No",confirmClickHandler:_.bind(function(e){this.request.destroy({url:this.request.url()+"?delete_recurring="+n+"&following="+i,success:_.bind(function(e,t,n){var i=this;(new r({message:"Time-off request has been deleted."})).render(),u.hide(),i.trigger("navigate",i.$el.attr("action")+i.request.startDate.getTime())},this),processData:!0})},this)});u.show()},this)),!1},afterRender:function(){var e=this.request.get("time_off_type_id");$("select[name=time_off_type]",this.el).val(e),this.notifyTitle("Time Off Request"),this.notifyActivate("calendar"),this.notifyMenuButton({callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>"),title:"Requests"})}});return i}),define("lib/collections/requests",["collection","lib/models/pto"],function(e,t){var n=e.extend({model:t,url:"/rest/pto"});return n}),define("text!pages/requests/templates/request.html",[],function(){return'<a href="/requests/{{id}}">\n<h4>Time Off Request</h4>\n<div class="date-range">from {{formatDate start "h:mmtt on MMMM d yyyy"}} to {{formatDate stop "h:mmtt on MMMM d yyyy"}}</div>\n<strong>{{approved}}</strong>\n</a>'}),define("pages/requests/views/requests",["layout","lib/views/collection","lib/collections/requests","text!pages/requests/templates/request.html"],function(e,t,n,r){var i=e.extend({tagName:"li",className:"request",template:Handlebars.compile(r),serialize:function(){var e=new Date(this.model.get("start_time")),t=new Date(this.model.get("stop_time")),n="Approval pending";return this.model.get("approval_date")&&(n="Approved"),this.model.get("denial_date")&&(n="Denied"),{start:e,stop:t,id:this.model.id,approved:n}}}),s=t.extend({tagName:"ul",className:"requests",ElementView:i,afterRender:function(){this.fetch({reset:!0,success:_.bind(function(e,t,n){e.length||this.$el.append($("<h5 class='info'><strong>No PTO requests found.</strong></h5>"))},this)})}}),o=e.extend({className:"requests-main",template:Handlebars.compile("<h5 class='info'><strong>Time Off Requests</strong></h5><div class='requests-wrapper'><ul class='requests'></ul></div><div class='buttons'><a href='/requests/new' type='button' class='new-request'>Create new request</button></div>"),initialize:function(t){e.prototype.initialize.call(this,t);var r=OnShift.requests=new n;this.requestsView=new s({collection:r}),this.registerView(this.requestsView,{anchor:".requests",replace:!0})},afterRender:function(){this.notifyTitle("Requests"),this.notifyActivate("requests")}});return o}),define("text!pages/requests/templates/new_request_form.html",[],function(){return'<fieldset>\n    <legend>Time off request</legend>\n    <div class="form-group">\n        <label class="control-label">Time off type</label>\n        <div class=\'request-value\'>\n            <select class="form-control" name="time_off_type">\n                <option value="Select a time off type">Select a time off type</option>\n                {{#each ptoTypes}}\n                <option value="{{this}}">{{truncate this 15}}</option>\n                {{/each}}\n            </select>\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <div id="starting" class="form-group">\n        <label class="control-label">Starts</label>\n        <div class=\'request-value\'>\n            <input type="text" class="form-control" name="start_day"\n                placeholder="mm/dd/yyyy hh:mm"\n                value="{{start}}" />\n            <span class="help-block"></span>\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <div id="ending" class="form-group">\n        <label class="control-label">Ends</label>\n        <div class=\'request-value\'>\n            <input type="text" class="form-control" name="stop_day"\n                placeholder="mm/dd/yyyy hh:mm"\n                value="{{stop}}" />\n            <span class="help-block"></span>\n        </div>\n    </div>\n</fieldset>\n<fieldset>\n    <div class="form-group">\n        <label class="control-label">Reason</label>\n        <div class=\'request-value\'>\n            <textarea class="form-control removeDouble" name="reason" placeholder="Enter a description">{{ reason }}</textarea>\n            <span class="help-block"></span>\n        </div>\n    </div>\n</fieldset>\n<fieldset id="recurringOptions" style="display: none;">\n    <div class="form-group">\n        <label class="control-label">Repeats Every</label>\n        <div class=\'request-value\'>\n            <div class="repeat-row">\n                <div class="repeat-days">\n                    <input type="number" class="form-control removeDouble" name="repeat_days" value="0" />\n                    <span class="help-block"></span>\n                </div>\n                <div class="days-label">\n                    Days\n                </div>\n                <div class="until-label until">\n                    until\n                </div>\n                <div class="repeat-until until">\n                    <input type="text" class="form-control removeDouble" name="repeat_until" style="width:110px;" value="{{repeatUntil}}" />\n                </div>\n            </div>\n        </div>\n    </div>\n</fieldset>\n<div class="form-group">\n    <div class="buttons">\n        <button class="recurring cancel-btn" type="button">Make Request Recurring</button>\n        <button id="requestTimeOff" class="submit-btn" type="submit">Submit</button>\n        <button class="cancel cancel-btn" type="button">Cancel</button> \n    </div>\n</div>\n'}),define("pages/requests/views/new_request",["pages/requests/views/request_action_base","lib/models/pto","text!pages/requests/templates/new_request_form.html","views/back_button","utils"],function(e,t,n,r,i){var s=function(e){return e.toString("MM/dd/yyyy hh:mm tt")},o=e.extend({template:Handlebars.compile(n),initialize:function(n){e.prototype.initialize.call(this,n),this.request=new t,this.date=n.date?new Date(Number(n.date)):Date.today()},afterRender:function(){var e={theme:"default",display:"bottom",mode:"mixed",minDate:Date.today().addDays(-2),dateOrder:"M D d yyyy",stepMinute:15},t={theme:"default",display:"bottom",mode:"mixed",inputClass:"form-control",label:"Time off type"};setTimeout(function(){$("input[name=repeat_days]").focusin(function(){$(".until",this.el).show();if($(this).val()==="0")$(this).val("");else{var e=$(this).val();$(this).val("");var t=$(this);setTimeout(function(){t.val(e)},1)}}),$("input[name=repeat_days]").focusout(function(){$(this).val().length===0?($(this).val("0"),$(".until",this.el).hide()):$(this).val()==="0"&&$(".until",this.el).hide()}),OnShift.DeviceVersion!="4.0.4"?($("select[name=time_off_type]",this.el).mobiscroll().select(t),$("input[name=stop_day], input[name=start_day]",this.el).mobiscroll().datetime(e),$("input[name=repeat_until]",this.el).mobiscroll().date({display:"bottom",theme:"default",mode:"mixed",minDate:Date.today().addDays(-2),maxDate:Date.today().addDays(183)}),$(document).off("click","a[href]:not([data-bypass])"),$(document).on("click","a[href]:not([data-bypass])",function(){return!1})):($("input[name=start_day]",this.el).click(function(){OnShift.DatePicker=this,i.cordovaHelper("OSPlugin","showPicker","")}),$("input[name=stop_day]",this.el).click(function(){OnShift.DatePicker=this,i.cordovaHelper("OSPlugin","showPicker","")}),$("input[name=repeat_until]",this.el).click(function(){OnShift.DatePicker=this,i.cordovaHelper("OSPlugin","showDatePicker","")}))},200),this.notifyTitle("Time Off Request"),this.notifyActivate("calendar"),this.notifyMenuButton(r)},serialize:function(){var e=s(this.date),t=s(this.date.clone().addDays(1)),n=this.date.clone().addDays(1).toString("MM/dd/yyyy");return _.extend(this.model.toJSON(),{start:e,stop:t,repeatUntil:n,ptoTypes:this.ptoTypes})}});return o}),define("text!pages/available_shifts/templates/available_shifts.html",[],function(){return'<ul class="available-shifts"></ul>\n<div class=\'buttons\'>\n<button class="load-more" {{#unless isReady}}disabled{{/unless}}>Load More</button>\n</div>\n'}),define("text!pages/available_shifts/templates/available_shift.html",[],function(){return"<div class=\"panel-heading\">\n  <div class='start-date'>\n    <h6><strong>{{ formatDate startDate 'ddd, MMM d' }}</strong></h6>\n    {{#if orgName}}\n        <h6 class='shift-loc'><strong>at {{orgName}}</strong></h6>\n    {{/if}}\n  </div>\n</div>\n<div class=\"panel-body\">\n  <a href='{{ linkTo }}'>\n  <div class='detail-row'>\n    <div class='shift-time'>\n      <h4>{{ formatDate startDate 'h:mmtt' }} &ndash; {{ formatDate stopDate 'h:mmtt' }}</h4>\n    </div>\n    <div class='available-tag'>\n      <span class='{{ badge }}'>{{ tagText }}</span>\n    </div>\n    </div>\n  <div class='detail-row'>\n    <div class=\"shift-components\">\n      {{ shiftType }} {{#if show_location}}at {{ location }}{{/if}}\n    </div>\n    <div class='available-tag'>\n        {{#if isOverlap}}<div><span class='badge overlap'>Overlapping</span></div>{{/if}}\n    </div>\n    <!--<div class='linkto'>\n      <span class='icon-next-sm'></span>\n    </div>-->\n  </div>\n  </a>\n</div>\n<!-- vim:filetype=htmldjango:ts=2:sw=2:\n-->\n"}),define("pages/available_shifts/views/available_shifts_collection",["lib/views/collection","lib/collections/available_shifts","layout","lib/models/shift","lib/models/v2shift","text!pages/available_shifts/templates/available_shift.html","config"],function(e,t,n,r,i,s,o){var u=new o,a=n.extend({tagName:"li",className:"available-shift",template:Handlebars.compile(s),initialize:function(e){n.prototype.initialize.call(this,e),this.listenTo(this.model,"remove",this.close)}}),f=a.extend({serialize:function(){var e,t,n;if(OnShift.extendedOrgs.models.length)if(this.model.get("v2organizationID")!==OnShift.employee.organization.id){var r=OnShift.extendedOrgs.get(this.model.get("v2organizationID"));e=r.get("name"),n=r.locations.get(this.model.get("locationID")).get("name"),t=r.shiftTypes.get(this.model.get("shift_typeID")).get("name")}else e=OnShift.employee.organization.get("name");return!t&&!n&&(n=OnShift.employee.organization.locations.get(this.model.get("locationID")).get("name"),t=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_typeID")).get("name")),_.extend(this.model.toJSON(),{startDate:this.model.getStartDate(),stopDate:this.model.getStopDate(),location:n,shiftType:t,tagText:this.model.get("_requested")?"Fill in: Requested":"Fill-in",badge:this.model.get("_requested")?"badge-requested":"badge",linkTo:"/available_shifts/fillin/"+this.model.id,show_location:u.get("default_location_on_emp_open_shifts"),orgName:e})}}),l=a.extend({serialize:function(){var e,t,n;if(OnShift.extendedOrgs.models.length)if(this.model.get("_v2organization_id")!==OnShift.employee.organization.id){var r=OnShift.extendedOrgs.get(this.model.get("_v2organization_id"));e=r.get("name"),n=r.locations.get(this.model.get("location_id")).get("name"),t=r.shiftTypes.get(this.model.get("shift_type_id")).get("name")}else e=OnShift.employee.organization.get("name");return!t&&!n&&(n=OnShift.employee.organization.locations.get(this.model.get("location_id")).get("name"),t=OnShift.employee.organization.shiftTypes.get(this.model.get("shift_type_id")).get("name")),_.extend(this.model.toJSON(),{startDate:this.model.getStartDate(),stopDate:this.model.getStopDate(),location:n,shiftType:t,tagText:this.model.get("_requested")?"Open Shift: Requested":"Open Shift",badge:this.model.get("_requested")?"badge-requested":"badge",linkTo:"/available_shifts/open/"+this.model.id,isOverlap:this.model.get("_temp_overlap"),show_location:u.get("default_location_on_emp_open_shifts"),orgName:e})}}),c=e.extend({tagName:"ul",className:"available-shifts-list",constructor:function(n){n||(n={}),n.collection=new t,e.prototype.constructor.call(this,n)},initialize:function(t){e.prototype.initialize.call(this,t),this._filter="all",this._orgFilter=0,this.spinner=null},createView:function(e){var t=null;if(e instanceof r)t=f;else{if(!(e instanceof i))throw new Error("model must be a Shift or V2Shift");t=l}return new t({model:e})},afterRender:function(){this.fetch({reset:!0}),this.collection.once("reset",function(e){this.removeSpinner()},this)},removeSpinner:function(){this.spinner&&this.spinner.remove()},addSpinner:function(){this.removeSpinner(),this.spinner=OnShift.addSpinner(this.el,"Loading Available Shifts")},setFilter:function(e){this._filter=e},setOrgFilter:function(e){this._orgFilter=e},fetch:function(e){if(!OnShift.user.isReady())return;this.addSpinner(),e.data=e.data||{},_.defaults(e.data,{limit:10,filter:this._filter,org_filter:this._orgFilter}),this.collection.fetch(e)}});return c}),define("pages/available_shifts/views/available_shifts",["layout","text!pages/available_shifts/templates/available_shifts.html","pages/available_shifts/views/available_shifts_collection","views/dropdown","mixins/restricted_data_handler","config"],function(e,t,n,r,i,s){var o=new s,u=e.extend({className:"available-shifts-layout",events:{"click .load-more":"handleLoadMore"},template:Handlebars.compile(t),initialize:function(t){e.prototype.initialize.call(this,t),this.availableShifts=new n,this.registerView(this.availableShifts,{anchor:".available-shifts",replace:!0});var i=[];if(o.get("allow_employee_fill_in_requests")){var s=window.localStorage.getItem("available_shifts_filter");this.availableShifts.setFilter(s),i.push({text:"All",dataBypass:!0,value:"all",active:s==="all"||!s},{text:"Open Shifts",dataBypass:!0,value:"open-shifts",active:s==="open-shifts"},{text:"Fill-in Requests",dataBypass:!0,value:"fillin",active:s==="fillin"})}if(OnShift.extendedOrgs.models.length){var u=Number(docCookies.getItem("available_shifts_org")),a=OnShift.employee.organization;this.availableShifts.setOrgFilter(u),i.length&&i.push("divider"),i.push({text:"All orgs",group:"orgs",value:0,active:u===0||!u},{text:a.get("name"),value:a.id,group:"orgs",active:u===a.id}),OnShift.extendedOrgs.each(function(e){i.push({text:e.get("name"),value:e.id,group:"orgs",active:u===e.id})})}i.length&&(this.dropdown=new r.SingleSelect({options:i}),this.listenTo(this.dropdown,"dropdown:change:active",function(e,t){var n,r,i,s;o.get("allow_employee_fill_in_requests")?(n=this.dropdown.getActive()[0].get("value"),r=this.dropdown.getActive()[0].get("text")):n="all",OnShift.extendedOrgs.models.length?(i=this.dropdown.getActive("orgs")[0].get("value"),s=this.dropdown.getActive("orgs")[0].get("text")):i=0,_.isNumber(e.get("value"))?window.localStorage.setItem("available_shifts_org",i):window.localStorage.setItem("available_shifts_filter",n),this.dropdown.setText(r||s),this.filter(n,i)},this))},_handleFetchError:function(e,t,n){this._handleRestrictedData(t,this.availableShifts.$el,{model:this.model,callback:_.bind(function(){this.availableShifts.removeSpinner();var e=$(".load-more");e.prop("disabled","disabled")},this)})},loadMore:function(){if(!OnShift.user.isReady())return;var e=this.availableShifts,t=e.collection.meta;e.fetch({remove:!1,data:{limit:t.limit,offset:t.offset+t.limit},success:_.bind(function(e){this.availableShifts.removeSpinner();if(e.meta.offset+e.meta.limit>=e.meta.total){var t=$(".load-more");t.prop("disabled","disabled"),t.html("No more available shifts")}},this),error:_.bind(this._handleFetchError,this)})},handleLoadMore:function(e){this.loadMore()},filter:function(e,t){if(!OnShift.user.isReady())return;this.availableShifts.setFilter(e),this.availableShifts.setOrgFilter(t);while(this.availableShifts.collection.length)var n=this.availableShifts.collection.pop();this.availableShifts.addSpinner(),that=this,this.availableShifts.fetch({reset:!0,success:_.bind(function(e){that.availableShifts.removeSpinner();var t=$(".load-more");e.meta.offset+e.meta.limit>=e.meta.total?(t.prop("disabled","disabled"),t.html("No more available shifts")):(t.prop("disabled",!1),t.html("Load more"))},this),error:_.bind(this._handleFetchError,this)})},afterRender:function(){this.notifyTitle("Available Shifts"),this.notifyActivate("available-shifts");if(this.dropdown){this.notifyDropdown(this.dropdown);var e,t;o.get("allow_employee_fill_in_requests")?e=this.dropdown.getActive()[0].get("value"):e="all",OnShift.extendedOrgs.models.length?t=this.dropdown.getActive("orgs")[0].get("value"):t=0,this.filter(e,t)}else this.filter("open-shifts")},serialize:function(){return{isReady:OnShift.user.isReady()}}});return _.extend(u.prototype,i),u}),define("pages/available_shifts/views/available_base",["layout"],function(e){var t=e.extend({events:{"click .btn-bid":"handleBidClick","click .btn-withdraw":"handleWithdrawClick","click .btn-cancel":"handleCancelClick"},initialize:function(t){e.prototype.initialize.call(this,t),this.model||(this.model=new this.Model({id:t.shiftID})),this.listenTo(this.model,"sync",this.render,this),this.listenTo(this.model,"change:_requested",this.render,this),this.isLoaded()||this.model.fetch()},isLoaded:function(){return!1},afterRender:function(){this.notifyActivate("available-shifts"),this.notifyMenuButton({callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>")})}});return t}),define("text!pages/available_shifts/templates/open_shift.html",[],function(){return'<form class="form-horizontal" role="form">\n  {{#if requested}}\n  <div class="form-group">\n    <div class="requested">\n      <p>You have requested this shift.</p>\n    </div>\n  </div>\n  {{/if}}\n  <div class="form-group">\n    <label>Date:</label>\n    <div class="data-content">\n      {{ date }}\n    </div>\n  </div>\n  <div class="form-group">\n    <label>Time:</label>\n    <div class="data-content">\n      {{ start }}{{#if start}} to {{/if}}{{ stop }}\n    </div>\n  </div>\n  <div class="form-group">\n    <label>Position:</label>\n    <div class="data-content">\n      {{ position }}\n    </div>\n  </div>\n  {{#if show_location}}\n  <div class="form-group">\n    <label>Location:</label>\n    <div class="data-content">\n      {{ location }}\n    </div>\n  </div>\n  {{/if}}\n  {{#if neighboringShiftWarning}}\n   <div class="form-group text-danger">\n     <label>Warning:</label>\n     <div class="data-content">\n       {{ neighboringShiftWarning }}\n     </div>\n   </div>\n   {{/if}}\n</form>\n\n<div class=\'buttons\'>\n  {{#if requested}}\n  <button class="btn-withdraw secondary-btn">Cancel Request</button>\n  {{else}}\n  <button class="btn-bid main-btn">Request This Shift</button>\n  <button class="btn-cancel secondary-btn">Cancel</button>\n  {{/if}}\n</div>\n'}),define("pages/available_shifts/views/open_shift",["layout","lib/models/v2shift","pages/available_shifts/views/available_base","text!pages/available_shifts/templates/open_shift.html","config"],function(e,t,n,r,i){var s=new i,o=n.extend({template:Handlebars.compile(r),className:"open-shift",Model:t,isLoaded:function(){return this.model.get("location_id")!==undefined},handleBidClick:function(e){this.model.request({success:_.bind(function(){var e=this;require(["views/system_alert"],function(t){var n=new t({message:"You have requested this open shift.Your scheduler must approve your request before it will appear on your schedule."});n.render(),e.model.set("_requested",!0)})},this)})},handleWithdrawClick:function(e){this.model.withdraw({success:_.bind(function(){var e=this;require(["views/system_alert"],function(t){var n=new t({message:"You have cancelled your request for this open shift."});n.render(),e.model.set("_requested",!1)})},this)})},handleCancelClick:function(e){this.trigger("cancel")},afterRender:function(){n.prototype.afterRender.call(this),this.notifyTitle("Open Shift"),this.model.get("location_id")||(this.$el.empty(),this.spinner=OnShift.addSpinner(this.el,""))},serialize:function(){var e=this.model.getStartDate(),t=this.model.getStopDate(),n=OnShift.employee.organization.shiftTypes.findWhere({id:this.model.get("shift_type_id")}),r=OnShift.employee.organization.locations.findWhere({id:this.model.get("location_id")}),i=this.model.get("_temp_overlap"),o=this.model.get("_neighboring_shift_msg"),u=!this.model.get("_v2organization_id")||this.model.get("_v2organization_id")===OnShift.employee.organization.id;if(!u){var a=OnShift.extendedOrgs.get(this.model.get("_v2organization_id"));r=a.locations.get(this.model.get("location_id")),n=a.shiftTypes.get(this.model.get("shift_type_id"))}return{date:e?e.toString("dddd MMM d, yyyy"):"",start:e?e.toString("h:mmtt"):"",stop:t?t.toString("h:mmtt"):"",position:n?n.get("name"):"",location:r?r.get("name"):"",requested:this.model.get("_requested"),show_location:s.get("default_location_on_emp_open_shifts"),overlapWarning:i,neighboringShiftWarning:o}}});return o}),define("text!pages/available_shifts/templates/fillin.html",[],function(){return'<form class="form-horizontal" role="form">\n  <div class="form-group">\n    <div class="posted-by">\n      {{#if requested}}\n      <p>You have requested to fill in for this shift.</p>\n      {{else}}\n        {{#if date}}\n        <p>{{ requester }} is requesting a fill-in for this shift.</p>\n        {{else}}\n        <p>&nbsp;</p>\n        {{/if}}\n      {{/if}}\n    </div>\n  </div>\n  <div class="form-group">\n    <label>Date</label>\n    <div class="data-content">\n      {{ date }}\n    </div>\n  </div>\n  <div class="form-group">\n    <label>Time</label>\n    <div class="data-content">\n      {{ start }}{{#if start}} to {{/if}}{{ stop }}\n    </div>\n  </div>\n  <div class="form-group">\n    <label>Position</label>\n    <div class="data-content">\n      {{ position }}\n    </div>\n  </div>\n  {{#if show_location}}\n  <div class="form-group">\n    <label>Location</label>\n    <div class="data-content">\n      {{ location }}\n    </div>\n  </div>\n  {{/if}}\n  {{#if neighboringShiftWarning}}\n   <div class="form-group text-danger">\n     <label>Warning:</label>\n     <div class="data-content">\n       {{ neighboringShiftWarning }}\n     </div>\n   </div>\n   {{/if}}\n   {{#if overlapWarning}}\n   <div class="form-group text-danger">\n     <label>Warning:</label>\n     <div class="data-content">\n       You\'re working 1 or more overlapping shifts\n     </div>\n   </div>\n   {{/if}}\n</form>\n\n<div class=\'buttons\'>\n  {{#if requested}}\n  <button class="btn-withdraw main-btn">Cancel Request</button>\n  {{else}}\n  <button class="btn-bid main-btn">Request This Shift</button>\n  {{/if}}\n  <button class="btn-cancel secondary-btn">Cancel</button>\n</div>'}),define("pages/available_shifts/views/fillin",["layout","lib/models/shift","pages/available_shifts/views/available_base","text!pages/available_shifts/templates/fillin.html","config"],function(e,t,n,r,i){var s=new i,o=n.extend({template:Handlebars.compile(r),className:"fillin",isLoaded:function(){return this.model.get("locationID")!==undefined},Model:t,handleBidClick:function(e){this.model.request({success:_.bind(function(){var e=this;require(["views/system_alert"],function(t){var n=new t({message:"You have requested this shift."});n.render(),e.model.set("_requested",!0)})},this)})},handleWithdrawClick:function(e){this.model.withdraw({success:_.bind(function(){var e=this;require(["views/system_alert"],function(t){var n=new t({message:"You have withdrawn your request to fill in for this shift."});n.render(),e.model.set("_requested",!1)})},this)})},handleCancelClick:function(e){this.trigger("cancel")},afterRender:function(){n.prototype.afterRender.call(this),this.notifyTitle("Fill-in")},serialize:function(){var e=this.model.getStartDate(),t=this.model.getStopDate(),n=OnShift.employee.organization.shiftTypes.findWhere({id:this.model.get("shift_typeID")}),r=OnShift.employee.organization.locations.findWhere({id:this.model.get("locationID")}),i=this.model.get("_temp_overlap"),o=this.model.get("_neighboring_shift_msg"),u=!this.model.get("v2organizationID")||this.model.get("v2organizationID")===OnShift.employee.organization.id;if(!u){var a=OnShift.extendedOrgs.get(this.model.get("v2organizationID"));r=a.locations.get(this.model.get("locationID")),n=a.shiftTypes.get(this.model.get("shift_typeID"))}return{date:e?e.toString("dddd MMM d, yyyy"):"",start:e?e.toString("h:mmtt"):"",stop:t?t.toString("h:mmtt"):"",position:n?n.get("name"):"",location:r?r.get("name"):"",requested:this.model.get("_requested"),requester:this.model.get("employee_name"),show_location:s.get("default_location_on_emp_open_shifts"),overlapWarning:i,neighboringShiftWarning:o}}});return o}),define("pages/available_shifts/views/single_shift",["layout","pages/available_shifts/views/open_shift","lib/models/v2shift","lib/models/send","lib/collections/sends"],function(e,t,n,r,i){var s="<div class='available-shifts'></div>",o=e.extend({className:"available-shifts-layout",template:Handlebars.compile(s),initialize:function(s){this.shiftmodel=new n({id:OnShift.ShiftId}),this.shiftview=new t({model:this.shiftmodel});var o=new r({messageID:OnShift.MessageId});this.unreadSends=new i,this.unreadSends.on("add",function(e,t,n){t.update({filters:["read_date"]})}),this.unreadSends.add(o),this.listenTo(this.shiftmodel,"sync",function(e,t,n){this.registerView(this.shiftview,{anchor:".available-shifts",replace:!0}),$(".available-shifts",this.el).append(this.shiftview.render().el)},this),e.prototype.initialize.call(this,s)},afterRender:function(){this.notifyTitle("Open Shift"),this.notifyActivate("available-shifts"),this.notifyMenuButton({callback:function(){window.history.back()},template:Handlebars.compile("<span class='btn-link icon-prev'></span>"),title:"Messages"}),typeof OnShift.header!="undefined"&&OnShift.header.closeButtons(),this.shiftmodel.fetch({reset:!0,success:_.bind(function(e){},this)}),OnShift.MessageId="",OnShift.LoadSingleMessage=!1}});return o}),define("text!pages/messages/templates/reply.html",[],function(){return"{{#if replyYesNo}}\n    <div class='button-row'>\n        <strong class=\"col-xs-5 center\">Can you {{#if dropShift}}drop{{else}}work{{/if}} this shift?</strong>\n	    <div class=\"col-xs-4 col-sm-5\">\n           <div class='wrapper'> <button type='button' class='btn btn-reply-yes'>Yes</button> </div>\n           <div class='wrapper'> <button type='button' class='btn btn-reply-no'>No</button> </div>\n           <div class='wrapper'> <button type='button' class='btn btn-reply-conditions'>Maybe</button> </div>\n        </div>\n        <div class='col-xs-3 col-sm-2'>\n           <button type='button' class='btn btn-cancel'>Cancel</button>\n        </div>\n    </div>\n{{else}}\n	<label class='response-label'>{{responseLabel}}</label>\n	<textarea style=\"width:100%\" class=\"removeDouble\" placeholder=\"{{placeholder}}\"></textarea>\n    <div class='button-row'>\n        <div class='btn-wrapper'>\n            <button type='button' class='btn btn-reply'>Send</button>\n        </div>\n        <div class='btn-wrapper'>\n            <button type='button' class='btn btn-cancel'>Cancel</button>\n        </div>\n    </div>\n{{/if}}"}),define("pages/messages/views/reply",["layout","lib/models/message","text!pages/messages/templates/reply.html"],function(e,t,n){var r=e.extend({className:"message-reply",template:Handlebars.compile(n),events:{"click .btn-reply":"handleReply","click .btn-reply-yes":"handleReply","click .btn-reply-no":"handleReply","click .btn-reply-conditions":"handleReply","click .btn-cancel":"handleCancel"},initialize:function(){var e=OnShift.messageTypes.findWhere({id:this.model.get("message_typeID")}).get("name");this.dropShift=e==="Drop Shift Request",this.replyYesNo=e==="Open Shift"||this.dropShift},handleReply:function(e){var n;if($(e.target).hasClass("btn-reply-yes"))n="Yes";else if($(e.target).hasClass("btn-reply-no"))n="No";else{if($(e.target).hasClass("btn-reply-conditions")){this.replyYesNo=!1,this.responseLabel="Maybe",this.placeholderText="Please explain",this.render();return}n=$("textarea",this.$el).val()}var r=new t({messagetext:n});this.model.respond(r,{success:_.bind(function(){require(["views/system_alert"],function(e){(new e({message:"Your response has been sent."})).render()}),this.trigger("reply:success")},this),error:_.bind(function(e){var t=e.responseJSON.errors.model;Raven.captureException("Version "+OnShift.AppVersion+": cannot reply to message - "+JSON.stringify(t)),require(["views/system_alert"],function(e){(new e({message:t.msg,type:"danger"})).render()}),this.trigger("reply:error",t)},this)})},handleCancel:function(e){this.trigger("reply:cancel"),this.close()},serialize:function(){return{replyYesNo:this.replyYesNo,dropShift:this.dropShift,responseLabel:this.responseLabel||"",placeholder:this.placeholderText||"Type your response"}}});return r}),define("text!pages/messages/templates/message.html",[],function(){return'<div class="message-content">\n  <div class="avatar">\n    <!--<img class="img-rounded"\n      src="http://www.gravatar.com/avatar/0?d=mm&f=y"\n      alt="avatar" width="50" />-->\n        <div id="myImage"></div>\n  </div>\n  <div class="message-header">\n    <div class="user-info">\n      <strong>{{ call sender "displayName" }}</strong>\n      {{#if orgName}}\n      <br /><strong>{{ orgName }}</strong>\n      {{/if}}\n    </div>\n    <div class="timestamp">\n      <span> {{ formatDateString send_time_tz }} </span>\n    </div>\n    <div class="message-type">\n       <span class="badge">{{messageType}}</span>\n    </div>\n    {{#if isUnread}}\n    <div class="message-unread">\n      <span class=\'badge\'>New</span>\n    </div>\n    {{/if}}\n  </div>\n  <div class="message-body">\n    <div class="message-text">\n      {{#if isSystemMessage}}\n      {{{ messagetext }}}\n      {{else}}\n      {{ messagetext }}\n      {{/if}}\n    </div>\n  </div>\n  <div class="message-footer"></div>\n</div>\n\n\n'}),define("text!pages/messages/templates/message_footer.html",[],function(){return"<div class='reply'>\n    <button type='button'\n            title='Reply to this message'\n            class='btn btn-primary btn-sm'\n            {{#if disableReply}}disabled {{/if}} >\n        Reply\n    </button>\n</div>\n<div class='response-indicator'>\n    <span class='replied' {{#unless responded}}style='display:none;'{{/unless}}> Replied</span>\n</div>\n<div class='archive-button'>\n    <button class='btn btn-close {{#if archived}}archived{{/if}}' type='button' title='Close'>\n        {{#if archived}}Archived{{else}}Archive{{/if}}\n    </button>\n</div>"}),define("pages/messages/views/message",["layout","pages/messages/views/reply","lib/models/send","text!pages/messages/templates/message.html","text!pages/messages/templates/message_footer.html"],function(e,t,n,r,i){var s=e.extend({className:"message-footer",template:Handlebars.compile(i),events:{"click .reply button":"notifyReply","click .archive-button button":"archive"},initialize:function(t){e.prototype.initialize.call(this),this.parentView=t.parentView,this.listenTo(this.model,"remove",this.close),this.model.get("_send")&&(this.send=new n(this.model.get("_send")))},archive:function(e){this.send?this.archiveSend():this.archiveMessage()},notifyReply:function(e){this.trigger("reply",e)},archiveSend:function(e){var t=this,n=!this.send.get("archived");this.send.save({archived:n},{success:function(e,r){t.conditionalClose(n)}})},archiveMessage:function(){var e=this,t=!this.model.get("archived_for_sender");this.model.save({archived_for_sender:t},{success:function(n,r){e.conditionalClose(t)}})},conditionalClose:function(e){var t=docCookies.getItem("messages_show_archived")==="true";e&&!t?this.parentView.close():this.render()},toggle:function(e){e||(e={}),_.defaults(e,{reply:!0,replied:!1}),this.toggleReply(e.reply,e.replied)},toggleReply:function(e,t){e?$(".reply button",this.el).show():$(".reply button",this.el).hide(),t&&$(".response-indicator .badge",this.el).show()},serialize:function(){var e;this.model.get("sender")?e=this.model.get("sender").id===OnShift.employee.id:e=!1;var t=this.model.get("alert_stateID")===OnShift.alertStates.where({description:"Closed"})[0].id,n=OnShift.messageTypes.get(this.model.get("message_typeID")).get("name")==="System Message",r=this.model.get("accept_responses");return{responded:this.model.get("_responded_to"),disableReply:e||n||!r,isClosed:t,archived:this.send&&this.send.get("archived")||!this.send&&this.model.get("archived_for_sender")}}}),o=e.extend({tagName:"li",className:"message-row",template:Handlebars.compile(r),initialize:function(t){e.prototype.initialize.call(this),this.footer=new s({model:this.model,parentView:this}),this.registerView(this.footer,{anchor:".message-footer",replace:!0}),this.listenTo(this.footer,"reply",this.doReply)},doReply:function(e){this.reply&&this.reply.close(),this.reply=new t({model:this.model}),this.footer.toggle({reply:!1}),this.$el.append(this.reply.render().el),this.listenTo(this.reply,"reply:cancel",function(){this.stopListening(this.reply),this.reply.close(),this.footer.toggle({replied:!1})},this),this.listenTo(this.reply,"reply:success",function(){this.stopListening(this.reply),this.reply.close(),this.footer.toggle({replied:!0})},this),this.listenTo(this.reply,"reply:close",function(){this.footer.toggle({reply:!0})},this)}});return o}),define("pages/messages/views/messages",["layout","lib/models/user","lib/models/message","lib/models/send","lib/collections/sends","lib/views/collection","pages/messages/views/message","lib/collections/messages","mixins/restricted_data_handler","views/dropdown","common"],function(e,t,n,r,i,s,o,u,a,f){var l=s.extend({tagName:"ul",id:"messageList",className:"messages list-unstyled wraptext",initialize:function(e){s.prototype.initialize.call(this,e),this._filter=e.filter,this.unreadSends=new i},createView:function(e){return new this.options.ElementView({model:e,serialize:function(){var e=this.model.toJSON();e.sender=this.model.sender;var t=OnShift.messageTypes.get(this.model.get("message_typeID")).get("name")==="System Message";(!this.model.get("senderID")||t)&&this.model.sender.set({first_name:"System",last_name:"message"});var n;this.model.get("_send")&&(n=this.model.get("_send").read_date===null);var r;if(OnShift.extendedOrgs.models.length){var i=this.model.get("v2organizationID");i===254?r="OnShift":i!==OnShift.employee.organization.id?r=OnShift.extendedOrgs.get(i).get("name"):r=OnShift.employee.organization.get("name")}var s=OnShift.messageTypes.findWhere({id:this.model.get("message_typeID")}).get("name");return _.extend(e,{messageType:s!=="Calloff"?s:"Open Shift",isSystemMessage:t,isUnread:n,orgName:r})}})},addSpinner:function(){this.removeSpinner(),this.spinner=OnShift.addSpinner(this.el,"Loading messages")},removeSpinner:function(){this.spinner&&this.spinner.remove()},setFilter:function(e){this._filter=e},fetch:function(e){e.data=e.data||{},_.defaults(e.data,{limit:10,filter:this._filter}),this.collection.fetch(e)},ElementView:o}),c=n.extend({initialize:function(e,r){n.prototype.initialize.call(this,e,r),this.sender=new t(this.get("sender"))}}),h="<ul class='messages'></ul><button id='loadMore' type='button' class='hidden btn-lg btn-primary btn-block'>Load Older Messages</button>",p=e.extend({template:_.template(h),events:{"click #loadMore":"loadMore"},id:"messagesMain",initialize:function(t){this.messages=new u([],{model:c}),this.messagesCollection=new l({collection:this.messages,filter:t.filter}),this.listenTo(this.messages,"reset",function(e,t,n){var r=e.filter(function(e){return e.get("_send")&&_.isNull(e.get("_send").read_date)});this.messagesCollection.unreadSends.reset(r.map(function(e){return e.get("_send")}))}),this.listenTo(this.messagesCollection.unreadSends,"reset",function(e,t,n){e.update({filters:["read_date"]})}),this.registerView(this.messagesCollection,{anchor:".messages",replace:!0}),e.prototype.initialize.call(this,t);var n=window.localStorage.getItem("messages_filter"),r=window.localStorage.getItem("messages_show_closed")==="true",i=window.localStorage.getItem("messages_show_archived")==="true",s=[{text:"All",value:"all",active:n==="all"||!n},{text:"Open Shift",value:"open-shift",active:n==="open-shift"},{text:"Drop Shift",value:"drop-shift-request",active:n==="drop-shift-request"},{text:"Shift Request",value:"shift-request",active:n==="shift-request"},{text:"General",value:"general",active:n==="general"},{text:"Response",value:"response",active:n==="response"},"divider",{text:"Show Closed Messages",value:"show-closed",group:"closed",active:r},{text:"Show Archived Messages",value:"show-archived",group:"archived",active:i}];if(OnShift.extendedOrgs.models.length){var o=Number(window.localStorage.getItem("messages_orgs")),a=OnShift.employee.organization;s.push("divider",{text:"All orgs",group:"orgs",value:0,active:o===0||!o},{text:a.get("name"),value:a.id,group:"orgs",active:o===a.id}),OnShift.extendedOrgs.each(function(e){s.push({text:e.get("name"),value:e.id,group:"orgs",active:o===e.id})})}this.dropdown=new f.SingleSelect({options:s,groupOpts:{closed:{allowEmptySelection:!0},archived:{allowEmptySelection:!0}}}),this.listenTo(this.dropdown,"dropdown:change:active",function(e,t){var n=this.dropdown.getActive()[0].get("value"),r=this.dropdown.getActive("closed").length?!0:!1,i=this.dropdown.getActive("archived").length?!0:!1,s=OnShift.extendedOrgs.models.length?this.dropdown.getActive("orgs")[0].get("value"):0;e.get("value")==="show-closed"?window.localStorage.setItem("messages_show_closed",e.get("active")):e.get("value")==="show-archived"?window.localStorage.setItem("messages_show_archived",e.get("active")):_.isNumber(e.get("value"))?window.localStorage.setItem("messages_orgs",e.get("value")):(window.localStorage.setItem("messages_filter",e.get("value")),this.dropdown.setText(e.get("text"))),this.filter(n,r,s,i)},this)},afterRender:function(){this.notifyTitle("Messages"),this.notifyActivate("messages"),this.notifyDropdown(this.dropdown),this.messages.once("reset",function(e){$("button",this.el).removeClass("hidden")},this);var e=this.dropdown.getActive()[0].get("value"),t=this.dropdown.getActive("closed").length?!0:!1,n=this.dropdown.getActive("archived").length?!0:!1,r=OnShift.extendedOrgs.models.length?this.dropdown.getActive("orgs")[0].get("value"):0;this.filter(e,t,r,n)},loadMore:_.throttle(function(e){if(!OnShift.user.isReady())return;var t=this.messagesCollection,n=t.collection.meta;t.fetch({remove:!1,data:{limit:n.limit,offset:n.offset+n.limit,show_closed:this.dropdown.getActive("closed").length?!0:!1,show_archived:this.dropdown.getActive("archived").length?!0:!1},success:_.bind(function(e){var t=this.messagesCollection.collection.filter(function(e){return e.get("_send")&&_.isNull(e.get("_send").read_date)});this.messagesCollection.unreadSends.reset(t.map(function(e){return e.get("_send")}));if(e.meta.offset+e.meta.limit>=e.meta.total){var n=$("#loadMore");n.prop("disabled","disabled"),n.html("No More Messages")}},this)})},1e3),filter:function(e,t,n,r){if(!OnShift.user.isReady())return;this.messagesCollection.setFilter(e);while(this.messagesCollection.collection.length)var i=this.messagesCollection.collection.pop();this.messagesCollection.addSpinner(),this.messagesCollection.fetch({reset:!0,success:_.bind(function(e){this.messagesCollection.removeSpinner();var t=$("#loadMore");e.meta.offset+e.meta.limit>=e.meta.total?(t.prop("disabled","disabled"),t.html("No More Messages")):(t.prop("disabled",!1),t.html("Load Older Messages"))},this),data:{show_closed:t,selected_org:n,show_archived:r},error:_.bind(function(e,t,n){this._handleRestrictedData(t,this.messagesCollection.$el,{model:this.model,callback:_.bind(function(){this.messagesCollection.removeSpinner()},this)})},this)})}});return _.extend(p.prototype,a),p});